{
    "version": "https://jsonfeed.org/version/1",
    "title": "一位Blog",
    "subtitle": "bit =>byte KB MB GB TB ... 积跬步而行千里",
    "icon": "http://adamshang2333.github.io/images/favicon.ico",
    "description": "<div style='font-size: 0.8em;'> I.is(null); <br/>If(U.appear()) <br/>I.turn(new World('Fill With Love')) <br/>// 我的世界 <br/>// 直至遇见你 <br/>// 才熠熠生辉 </div> ",
    "home_page_url": "http://adamshang2333.github.io",
    "items": [
        {
            "id": "http://adamshang2333.github.io/hou-duan/zhong-jian-jian/redis/",
            "url": "http://adamshang2333.github.io/hou-duan/zhong-jian-jian/redis/",
            "title": "redis基础",
            "date_published": "2023-03-12T11:31:14.387Z",
            "content_html": "<h2 id=\"一-redis特性\"><a class=\"anchor\" href=\"#一-redis特性\">#</a> 一. Redis 特性</h2>\n<ol>\n<li>\n<p>速度快</p>\n<p>基于内存，C 语言实现，单线程架构，集性能和优雅于一身的代码</p>\n</li>\n<li>\n<p>基于键值对的数据结构服务器</p>\n<p>REmote DIctionary Server. 值可以是字符串 / 哈希 / 列表 / 集合 / 有序集合，Bitmap 等等</p>\n</li>\n<li>\n<p>丰富的功能</p>\n<p>键过期功能。发布 - 订阅功能 (实现消息系统), Lua 脚本，简单的事务，流水线 (Pipeline)</p>\n</li>\n<li>\n<p>简单稳定</p>\n<p>代码少，早期版本 2 万行. 3.0 版本以后加入集群功能，5 万行。单线程模型</p>\n</li>\n<li>\n<p>客户端语言多</p>\n</li>\n<li>\n<p>持久化</p>\n<p>(RDB 和 AOF 方式) 存放到硬盘中</p>\n</li>\n<li>\n<p>主从复制</p>\n</li>\n<li>\n<p>高可用和分布式</p>\n</li>\n</ol>\n<h2 id=\"二-redis使用场景\"><a class=\"anchor\" href=\"#二-redis使用场景\">#</a> 二. Redis 使用场景</h2>\n<ol>\n<li>\n<p>缓存 /session</p>\n</li>\n<li>\n<p>排行榜系统</p>\n</li>\n<li>\n<p>计数器应用</p>\n<p>视频的播放 / 浏览次数。并发量太大，对传统数据库挑战较大</p>\n</li>\n<li>\n<p>社交网络</p>\n<p>赞 / 踩，粉丝，共同好友 / 喜好等等杂的数据</p>\n</li>\n<li>\n<p>消息队列系统</p>\n<p>主要用于业务解耦</p>\n</li>\n</ol>\n<h2 id=\"三-redis安装\"><a class=\"anchor\" href=\"#三-redis安装\">#</a> 三. Redis 安装</h2>\n<p>使用 docker 安装 redis</p>\n<h2 id=\"四-redis-shell\"><a class=\"anchor\" href=\"#四-redis-shell\">#</a> 四. Redis Shell</h2>\n<ol>\n<li>\n<p>redis-server 启动 Redis</p>\n<p>默认端口 6379, 使用 <code>--port xxx</code>  指定端口号<br />\n指定配置文件</p>\n</li>\n<li>\n<p>redis-cli 命令行接口</p>\n</li>\n</ol>\n<h2 id=\"五-redis使用\"><a class=\"anchor\" href=\"#五-redis使用\">#</a> 五. Redis 使用</h2>\n<h3 id=\"1-全局命令\"><a class=\"anchor\" href=\"#1-全局命令\">#</a> 1. 全局命令</h3>\n<p>keys *</p>\n<p>dbsize</p>\n<p>exists key</p>\n<p>del key</p>\n<p>expire key seconds</p>\n<p>type key</p>\n<h3 id=\"2-数据结构和内部编码\"><a class=\"anchor\" href=\"#2-数据结构和内部编码\">#</a> 2. 数据结构和内部编码</h3>\n<h4 id=\"21-数据结构\"><a class=\"anchor\" href=\"#21-数据结构\">#</a> 2.1 数据结构</h4>\n<ol>\n<li>\n<p>string 字符串</p>\n<p>key 都是字符串类型，而且其他几种数据结构都是在字符串类型基础上构建的.</p>\n<p>字符串类型的值实际上可以是简单或复杂的字符串 (JSON/XML), 数字，甚至是二进制 (图片，音频，视频，最大 512M)</p>\n<p>mset, 批量设置值，可以提高开发效率<br />\n mget, 批量获取值</p>\n<p>计数，<br />\nincr key, ++<br />\ndecr key, --<br />\nincrby key xx,<br />\ndecrby key xx</p>\n<p>开发中合理的 key 名，业务名：对象名🆔属性</p>\n</li>\n<li>\n<p>hash 哈希</p>\n<p>hset key field value<br />\nhget key field<br />\nhdel key field<br />\nhlen key<br />\nhmget key field<br />\nhmset key field value<br />\nhexists key field<br />\nhkeys key<br />\nhvals key<br />\nhgetall key</p>\n</li>\n<li>\n<p>list 列表</p>\n<p>存储多个有序的字符串<br />\n rpush key value ... 右边插入元素<br />\n lpush key value ... 左边<br />\n lrange key start end<br />\nlpop key 左侧 pop<br />\nlrem key count value</p>\n</li>\n<li>\n<p>set 集合</p>\n<p>不允许有重复元素.</p>\n<p>同时处理多个集合的交集 / 并集 / 差集</p>\n<p>sadd key element ...<br />\nexists key<br />\nsrem key element ... 删除元素<br />\n scard key 元素个数<br />\n sismember key element 判断是否在集合中<br />\n smembers key 所有元素</p>\n</li>\n<li>\n<p>zset 有序集合</p>\n<p>zadd key score member [score member...]<br />\nzcard key<br />\nzscore key member<br />\nzrem key member<br />\nzincrby key score member<br />\nzrevrange key start end</p>\n</li>\n</ol>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/hou-duan/zhong-jian-jian/mybatis/",
            "url": "http://adamshang2333.github.io/hou-duan/zhong-jian-jian/mybatis/",
            "title": "Mybatis",
            "date_published": "2023-03-12T11:31:14.367Z",
            "content_html": "<p>[toc]</p>\n<h2 id=\"重要组成部分\"><a class=\"anchor\" href=\"#重要组成部分\">#</a> 重要组成部分</h2>\n<ul>\n<li>\n<p>SqlSessionFactory</p>\n</li>\n<li>\n<p>SqlSession</p>\n</li>\n<li>\n<p>configuration</p>\n</li>\n</ul>\n<h3 id=\"sqlsessionfactory\"><a class=\"anchor\" href=\"#sqlsessionfactory\">#</a> SqlSessionFactory</h3>\n<blockquote>\n<ol>\n<li>是用来创建 SqlSession 对象的 ，而 SqlSession 用来操作数据库的</li>\n<li><strong>SqlSessionFactory 是线程安全的</strong>，它一旦被创建，应该在应用执行期间都存在。在应用运行期间不要重复创建多次，建议使用单例模式。</li>\n<li>SqlSessionFactoryBuilder 则可以从 XML 配置文件或一个预先定制的 Configuration 的实例构建出 SqlSessionFactory 的实例.</li>\n</ol>\n</blockquote>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 定义配置文件的路径</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">String</span> resource <span class=\"token operator\">=</span> <span class=\"token string\">\"org/mybatis/example/mybatis-config.xml\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// 通过 Mybatis 中的工具类 Resources 获取一个流</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token class-name\">InputStream</span> inputStream <span class=\"token operator\">=</span> <span class=\"token class-name\">Resources</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResourceAsStream</span><span class=\"token punctuation\">(</span>resource<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">// 实例化一个 SqlSessionFactory</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token class-name\">SqlSessionFactory</span> sqlSessionFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionFactoryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span>inputStream<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h3 id=\"sqlsession\"><a class=\"anchor\" href=\"#sqlsession\">#</a> SqlSession</h3>\n<blockquote>\n<p>Mybatis 中的核心<br />\n Mybatis 工作最重要的  java 接口，通过这个接口来执行命令，获取 mapper 以及管理事务<br />\n sqlSession，顾名思义，就是 sql 的一个会话，<br />\n<strong>在这个会话中发生的事不影响别的会话，如果会话提交，则生效，不提交不生效</strong>。<br />\n　  　---&gt; 即: <mark><strong>如果在事务里，则 Spring 给你的 sqlSession 是一个；<br />\n　　　　否则，每一个 sql 给你一个新的 sqlSession , 且每次都会提交</strong></mark></p>\n</blockquote>\n<h3 id=\"configuration\"><a class=\"anchor\" href=\"#configuration\">#</a> configuration</h3>\n<blockquote>\n<p>用来设置 Mybatis 的各项，配置文件包含了会深深影响 MyBatis 行为的设置和属性信息<br />\n其中，envirments -- datasources &amp; transactionManager ; mappers 都是最基础和重要的</p>\n<pre><code>配置文档的层级结构:\n configuration（配置）\n</code></pre>\n</blockquote>\n<pre><code>properties（属性）\nsettings（设置 !!）\ntypeAliases（类型别名 !）\ntypeHandlers（类型处理器 !）\nobjectFactory（对象工厂）\nplugins（插件）\nenvironments（环境配置 !!!)\n   environment（环境变量）\n      transactionManager（事务管理器）\n      dataSource（数据源）\ndatabaseIdProvider（数据库厂商标识）\nmappers（映射器 !!!）\n</code></pre>\n<blockquote>\n<pre><code></code></pre>\n</blockquote>\n<p><strong>配置文件实例</strong></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">configuration</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//mybatis.org//DTD Config 3.0//EN\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token string\">\"http://mybatis.org/dtd/mybatis-3-config.dtd\"</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 选择 mybatis 的运行环境 --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 在该标签下可以创建多个配置，例如开发环境 (localhost) 和生产环境 (部署后)--></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>environments</span> <span class=\"token attr-name\">default</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>development<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>environment</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>development<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>      <span class=\"token comment\">&lt;!-- 选择事务管理器，默认使用 JDBC 的事务管理器 --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>transactionManager</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>JDBC<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>       <span class=\"token comment\">&lt;!-- 配置数据源，实际上就是数据库连接池 --></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dataSource</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>POOLED<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driver<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$&#123;driver&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$&#123;url&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$&#123;username&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$&#123;password&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dataSource</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>environment</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>environments</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mappers</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>  <span class=\"token comment\">&lt;!--mappers 元素则是包含一组映射器（mapper），</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>  这些映射器的 XML 映射文件包含了 SQL 代码和映射定义信息。--></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>  <span class=\"token comment\">&lt;!-- 映射器的作用就是将 xml 中的文件和命名空间中对应的接口类做映射  </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>  生成相应的接口实现类 --></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>BookMapper.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>CategoryMapper.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">resource</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UserMapper.xml<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mappers</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h2 id=\"mybatis-xml配置-environmentsmapperdatasourcesetting\"><a class=\"anchor\" href=\"#mybatis-xml配置-environmentsmapperdatasourcesetting\">#</a> Mybatis XML 配置  (environments&amp;mapper&amp;datasource&amp;setting)</h2>\n<blockquote>\n<p><strong>注意！！</strong>:<br />\n 在 Mybatis 的  <code>&lt;configuration&gt; </code>  中配置的其他子标签是有顺序的<br />\n　即: setting --&gt; typeAliases --&gt; typeHandlers --&gt; environments --&gt; mappers<br />\n<mark> 如果不按照顺序，那么会报错 无法创建 SessionFactory</mark></p>\n</blockquote>\n<h3 id=\"setting-配置\"><a class=\"anchor\" href=\"#setting-配置\">#</a> Setting 配置</h3>\n<p>setting 是 MyBatis 中极为重要的调整设置，它们会改变 MyBatis 的运行时行为</p>\n<h4 id=\"setting-常用配置表格\"><a class=\"anchor\" href=\"#setting-常用配置表格\">#</a> Setting 常用配置表格</h4>\n<p>以下是部分设置，标记高亮的是常用设置:</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">设置名</th>\n<th style=\"text-align:left\">描述</th>\n<th style=\"text-align:left\">有效值</th>\n<th style=\"text-align:left\">默认值</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">cacheEnabled</td>\n<td style=\"text-align:left\">全局地开启或关闭配置文件中的所有映射器已经配置的任何缓存。</td>\n<td style=\"text-align:left\">true / false</td>\n<td style=\"text-align:left\">true</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">lazyLoadingEnabled</td>\n<td style=\"text-align:left\">延迟加载的全局开关。当开启时，所有关联对象都会延迟加载。 特定关联关系中可通过设置 fetchType 属性来覆盖该项的开关状态。</td>\n<td style=\"text-align:left\">true / false</td>\n<td style=\"text-align:left\">false</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong><mark>useGeneratedKeys</mark></strong></td>\n<td style=\"text-align:left\">允许 JDBC 支持自动生成主键，需要驱动支持。 如果设置为 true 则这个设置强制使用自动生成主键，尽管一些驱动不能支持但仍可正常工作（比如 Derby）</td>\n<td style=\"text-align:left\">true / false</td>\n<td style=\"text-align:left\">False</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">autoMappingBehavior</td>\n<td style=\"text-align:left\">指定 MyBatis 应如何自动映射列到字段或属性。 NONE 表示取消自动映射；PARTIAL 只会自动映射没有定义嵌套结果集映射的结果集。 FULL 会自动映射任意复杂的结果集（无论是否嵌套）。</td>\n<td style=\"text-align:left\">NONE, PARTIAL, FULL</td>\n<td style=\"text-align:left\">PARTIAL</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:left\">defaultStatementTimeout</td>\n<td style=\"text-align:left\">设置超时时间，它决定驱动等待数据库响应的秒数。</td>\n<td style=\"text-align:left\">任意正整数</td>\n<td style=\"text-align:left\">未设置 (null)</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><strong><mark>mapUnderscoreToCamelCase</mark></strong></td>\n<td style=\"text-align:left\">是否开启自动驼峰命名规则（camel case）映射，即从经典数据库列名 A_COLUMN 到经典 Java 属性名 aColumn 的类似映射</td>\n<td style=\"text-align:left\">true / false</td>\n<td style=\"text-align:left\">False</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td style=\"text-align:left\"><mark><strong>logImpl</strong></mark></td>\n<td style=\"text-align:left\">指定 MyBatis 所用日志的具体实现，未指定时将自动查找。</td>\n<td style=\"text-align:left\">SLF4J  / LOG4J/LOG4J2 / JDK_LOGGING / COMMONS_LOGGING / STDOUT_LOGGING / NO_LOGGING</td>\n<td style=\"text-align:left\">未设置</td>\n</tr>\n</tbody>\n</table>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9teWJhdGlzLm9yZy9teWJhdGlzLTMvemgvY29uZmlndXJhdGlvbi5odG1sI3NldHRpbmdz\">完整的 setting 设置链接</span></p>\n<p><strong>setting 的 Demo</strong></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>settings</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token comment\">&lt;!-- 开启 Mybatis 缓存 (默认开启一级缓存)--></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">&lt;!--</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        一级缓存：同一个 sqlSession 才会从缓存中获取数据</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        二级缓存：不同的 sqlSession 也会从缓存中获取数据</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        --></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>cacheEnabled<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token comment\">&lt;!-- 开启下划线形式的列名与小驼峰形式的属性名自动映射；</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        和在 mapper.xml 中设置 resultMap 属性 autoMapping = true 效果一样 --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>mapUnderscoreToCamelCase<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\">&lt;!-- 指定 MyBatis 所用日志的具体实现，未指定时将自动查找。--></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>setting</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>logImpl<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>LOG4J<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span>        </pre></td></tr><tr><td data-num=\"13\"></td><td><pre> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>settings</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"mybatis数据库缓存\"><a class=\"anchor\" href=\"#mybatis数据库缓存\">#</a> Mybatis 数据库缓存</h4>\n<p><strong>关于 Mybatis 数据库的缓存</strong><br />\n缓存的目的 :<br />\n 避免频繁的与数据库进行交互，尤其是在查询越多、缓存命中率越高的情况下， 使用缓存对性能的提高更明显</p>\n<p>mybatis 也提供了对缓存的支持， 分为一级缓存和二级缓存。<br />\n在默认的情况下， Mybatis 开启一级缓存 (SQLSession 缓存)<br />\n<strong> 一级缓存是对同一个 SqlSession 而言的，二级缓存对不同的 SqlSession 而言。</strong></p>\n<p>一级缓存 (SqlSession 级别):</p>\n<blockquote>\n<p>1   <strong>同一个 SqlSession 对象</strong>，调用同一个 <code>&lt;select&gt;</code>  标签，只有第一次执行 SQL 语句，<br />\n　　第一次的查询结果会缓存到 SQLSession 的缓存区 (内存) 中<br />\n　　---&gt; 所以被查询的实体类要实现序列化的接口以便缓存<br />\n　　<strong>有效范围：同一个 sqlSession 对象</strong><br />\n 2   缓存的是 Statement 对象 (一个 <code>&lt;select&gt;</code>  对应一个 statement )<br />\n　　<strong>也就是说，即使 SQL 语句一样 有可能也不会走缓存，只看  <code>&lt;select&gt;</code>  标签的 id 值</strong></p>\n</blockquote>\n<p>二级缓存 (SqlSessionFactory 级别):</p>\n<blockquote>\n<p>1  二级缓存和一级缓存使用的是不同的内存空间，<br />\n　<mark>只有在 SQLSession.commit () 或者 sqlSession.close () 的时候，<br />\n　才会从一级缓存放入二级缓存中</mark><br />\n　有效范围：同一个 SqlSessionFactory 中的任一 sqlSession 对象<br />\n 2  当数据频繁被使用，很少被修改的时候，适合开启二级缓存，<mark><strong> 频繁修改一定不要开二级！！</strong></mark><br />\n　数据被修改的时候，缓存在内存中的数据没有及时同步，会产生 &quot;落后&quot; 的<strong>脏数据</strong><br />\n　那么再次查询时，读取缓存中的数据与数据库中的就会不一致</p>\n</blockquote>\n<p><strong>开启二级缓存的方式</strong></p>\n<ol>\n<li>在 xxxmapper.xml 中添加 <code>&lt;cache readOnly = &quot;true&quot;/&gt;</code></li>\n<li>在 xxxmapper.xml 中添加 <code>&lt;cache/&gt;</code>  ; 并且结果集对应实体类实现序列化接口</li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>cache</span> </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token attr-name\">eviction</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FIFO<span class=\"token punctuation\">\"</span></span>  <span class=\"token attr-name\">&lt;!--回收策略为先进先出--</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>flushInterval=\"60000\" <span class=\"token comment\">&lt;!-- 自动刷新时间 60s--></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>size=\"512\" <span class=\"token comment\">&lt;!-- 最多缓存 512 个引用对象 --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>readOnly=\"true\"/> <span class=\"token comment\">&lt;!-- 只读 --></span></pre></td></tr></table></figure><h3 id=\"typealiases-别名配置\"><a class=\"anchor\" href=\"#typealiases-别名配置\">#</a> typeAliases (别名) 配置</h3>\n<blockquote>\n<p>为 Java 类型设置一个短的名字。<br />\n它只和 XML 配置有关，存在的意义仅在于用来减少类完全限定名的冗余</p>\n</blockquote>\n<p>常用的有两种配置方式:<br />\n1 精确的指定别名<br />\n 2 扫描指定包下的所有 bean</p>\n<blockquote>\n<p>在没有注解的情况下，会使用 Bean 的首字母小写的非限定类名来作为它的别名；<br />\n 若有注解，则别名为其 javaBean 类上的注解值 (@Alias (&quot;author&quot;) )</p>\n</blockquote>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAliases</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token comment\">&lt;!--xml 映射文件中，将类起一个别名 --></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">&lt;!-- 为某个包下的所有类都自动设置别名，Mybatis 可以正确的识别出来</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        默认的别名为类名，与大小写无关</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        可以两种混用 但是 typeAlias 需要写在 package 前面</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        --></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token comment\">&lt;!-- 方式一 --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAlias</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.pojo.Book<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>book<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAlias</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.pojo.Permission<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>permission<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>typeAlias</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.pojo.Category<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alias</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>category<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\">&lt;!-- 方式二 --></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>package</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.pojo<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>typeAliases</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h3 id=\"typehandlers类型处理器配置\"><a class=\"anchor\" href=\"#typehandlers类型处理器配置\">#</a> typeHandlers (类型处理器) 配置</h3>\n<p>typeHandler 一般在两个地方会用到:</p>\n<ol>\n<li>由 java 向 DB 传入参数时 (java 类型 --&gt;JDBC 类型 )</li>\n<li>将结果集中的 JDBC 数据类型转换成 java 中的对应类型</li>\n</ol>\n<blockquote>\n<p><strong>实例</strong>   设置一个 Money 类的 typeHandler<br />\njava bean</p>\n<pre><code class=\"language-java\"></code></pre>\n</blockquote>\n<p>public class Product &#123;<br />\nprivate Integer id;<br />\nprivate String name;<br />\nprivate String currencyUnit;<br />\nprivate Money money;<br />\n&#125;<br />\npublic class Money &#123;<br />\nprivate long value;<br />\n&#125;</p>\n<pre><code>&gt;mapper.xml\n&gt;```xml\n&gt;&lt;!--设置好Money类的typeHandler后,可以直接以#&#123;money&#125;的方式传入参数--&gt;\n&gt;&lt;!--没设置的话,只能以#&#123;money.value&#125;的方式传入--&gt;\n&gt;&lt;insert id=&quot;add&quot;&gt;\n        insert into tb_product \n          values (null,#&#123;name&#125;,#&#123;currencyUnit&#125;,#&#123;money&#125;)\n&lt;/insert&gt;\n&gt;```\n&gt;mybatis-config.xml  \n&gt;&gt;在配置mybatis的xml中设置typeHandler   \n&gt;**注意, 和 typeAliases一样 , package要在 typeHanlder后面**\n&gt;\n&gt;```xml\n&gt;&lt;typeHandlers&gt;\n        &lt;typeHandler handler=&quot;com.lanou.demo.handler.JodaMoneyTypeHandler&quot;/&gt;\n        &lt;!--和配置typeAliases一样,也可以直接扫描包--&gt;\n        &lt;package name=&quot;com.lanou.demo.handler&quot;/&gt;\n&lt;/typeHandlers&gt;\n&gt;```\n&gt;MoneyTypeHandler\n&gt;&gt;继承BaseTypeHandler,重写其中的setxxx和getxxx的方法  \n&gt;&gt;两种方法就是在对应向DB传入参数和取出参数\n&gt;\n&gt;```java\n/**\n * 继承BaseTypeHandler (TypeHandler的一个子类)\n * 所填入的泛型,是要处理的类型(java中哪个类型的变量 要对应jdbc中的数据类型)\n */\npublic class MoneyTypeHandler extends BaseTypeHandler &lt;Money&gt;&#123;\n    /**\n     * 设置传入参数时, java中数据类型与jdbc中数据类型的对应关系\n     * JDBJ中设置传入参数的方法:\n     * prepareStatement ps = conn.getPrepareStatement(&quot;insert into xxx values (null,?,?)&quot;)\n     * ps.setString(1,aaa);\n     * ps.setLong(2,bbb);\n     * ****************************************\n     * @param ps prepareStatement sql语句编译预处理对象\n     * @param i 要处理的参数是传入的第几个\n     * @param parameter 要交给类型处理器处理的属性参数\n     * @param jdbcType 对应的jdbc类型\n     * @throws SQLException\n     * 设置好后, 在mapper.xml中使用参数 不用按照#&#123;price.value&#125;的形式来使用参数 可以直接#&#123;price&#125;了\n     */\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, Money parameter, JdbcType jdbcType) throws SQLException &#123;\n        ps.setLong(i,parameter.getValue());\n    &#125;\n    /**\n     * @param columnName 列名(方法中指定了泛型Money的列)\n     * @return 返回对应处理的java类型\n     */\n    @Override\n    public Money getNullableResult(ResultSet rs, String columnName) throws SQLException &#123;\n        long value = rs.getLong(columnName);\n        Money money = new Money();\n        money.setValue(value);\n        return money;\n    &#125;\n    /**\n     * @param columnIndex 第几列(方法中指定了泛型Money的列)\n     * @return 返回对应处理的java类型\n     */\n    @Override\n    public Money getNullableResult(ResultSet rs, int columnIndex) throws SQLException &#123;\n        long value = rs.getLong(columnIndex);\n        Money money = new Money();\n        money.setValue(value);\n        return money;\n    &#125;\n    /**\n     * 在存储过程中使用,与上面的用法基本一致\n     * @param cs 可以看做prepareStatement来使用\n     * @param columnIndex 第几列\n     * @return\n     */\n    @Override\n    public Money getNullableResult(CallableStatement cs, int columnIndex) throws SQLException &#123;\n        long value = cs.getLong(columnIndex);\n        Money money = new Money();\n        money.setValue(value);\n        return money;\n    &#125;\n&#125;\n</code></pre>\n<h3 id=\"environments环境配置\"><a class=\"anchor\" href=\"#environments环境配置\">#</a> environments (环境) 配置</h3>\n<blockquote>\n<p>MyBatis 可以配置成适应多种环境，这种机制有助于将 SQL 映射应用于多种数据库之中， 现实情况下有多种理由需要这么做。<br />\n例如，开发、测试和生产环境需要有不同的配置；<br />\n或者想在具有相同 Schema 的多个生产数据库中 使用相同的 SQL 映射。<br />\n<strong><mark>不过：尽管可以配置多个环境，但每个 SqlSessionFactory 实例只能选择一种环境。</mark></strong></p>\n</blockquote>\n<p>指定加载环境 :</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">//.build 方法可以接收一个环境参数，如果忽略了环境参数，那么加载 xml 的默认环境</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token class-name\">SqlSessionFactory</span> factory <span class=\"token operator\">=</span> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionFactoryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span>reader<span class=\"token punctuation\">,</span> environment<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token class-name\">SqlSessionFactory</span> factory <span class=\"token operator\">=</span> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">new</span> <span class=\"token class-name\">SqlSessionFactoryBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span>reader<span class=\"token punctuation\">,</span> environment<span class=\"token punctuation\">,</span> properties<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><p>xml 中配置加载环境:</p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>environments</span> <span class=\"token attr-name\">default</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dev<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>environment</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>dev<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      <span class=\"token comment\">&lt;!-- 选择事务管理器，默认使用 JDBC 的事务管理器 --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>       <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>transactionManager</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>JDBC<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>       <span class=\"token comment\">&lt;!-- 配置数据源，实际上就是数据库连接池 --></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>       <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dataSource</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>POOLED<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driver<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mysql.jdbc.Driver<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>jdbc:mysql://localhost:3306/db_1021<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>         <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>123456<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>       <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dataSource</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>environment</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">&lt;!-- 生产环境的配置 --></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>environment</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>prop<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>transactionManager</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>JDBC<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dataSource</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>POOLED<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>driver<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$&#123;driver&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$&#123;url&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$&#123;username&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">value</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$&#123;password&#125;<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dataSource</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>environment</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>environments</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mappers</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><blockquote>\n<p>注意这里的关键点:</p>\n</blockquote>\n<ol>\n<li>默认使用的环境 ID（比如：default=&quot;development&quot;）。<br />\n<strong>至少要有一个  <code>&lt;environment&gt;</code>  的 id 值与  <code>&lt;environments&gt;</code>  的 default 值匹配</strong></li>\n<li>每个 environment 元素定义的环境 ID（比如：id=&quot;development&quot;）。</li>\n<li>事务管理器的配置（比如：type=&quot;JDBC&quot;）。</li>\n<li>数据源的配置（比如：type=&quot;POOLED&quot;）。</li>\n</ol>\n<p>===</p>\n<p><strong>transactionManager (事务管理器)</strong></p>\n<blockquote>\n<p>MyBatis 中有两种类型的事务管理器（也就是 type=”[JDBC|MANAGED]”）<br />\nJDBC – 这个配置就是直接使用了 JDBC 的提交和回滚设置，它依赖于从数据源得到的连接来管理事务作用域。<br />\nMANAGED – 这个配置几乎没做什么。它从来不提交或回滚一个连接，而是让容器来管理事务的整个生命周期（比如 JEE 应用服务器的上下文）。 默认情况下它会关闭连接</p>\n</blockquote>\n<blockquote>\n<p><code>提示:</code> <br />\n<em><strong> 如果你正在使用 Spring + MyBatis，则没有必要配置事务管理器，<br />\n　因为 Spring 模块会使用自带的管理器来覆盖前面的配置。</strong></em></p>\n</blockquote>\n<p><strong>dataSource type (数据源类型)</strong></p>\n<blockquote>\n<p>许多 MyBatis 的应用程序会按示例中的例子来配置数据源。<br />\n虽然这是可选的，但为了使用延迟加载，数据源是必须配置的.</p>\n</blockquote>\n<p>有三种内建的数据源类型（也就是 type=”[UNPOOLED|POOLED|JNDI]”）：</p>\n<ul>\n<li><strong>UNPOOLED</strong></li>\n</ul>\n<blockquote>\n<p>这个数据源的实现只是每次被请求时打开和关闭连接。<br />\n虽然有点慢，但对于在数据库连接可用性方面没有太高要求的简单应用程序来说，是一个很好的选择。<br />\n不同的数据库在性能方面的表现也是不一样的，对于某些数据库来说，使用连接池并不重要，这个配置就很适合这种情形</p>\n</blockquote>\n<ul>\n<li>\n<p>配置属性 :<br />\ndriver – 这是 JDBC 驱动的 Java 类的完全限定名<br />\n（并不是 JDBC 驱动中可能包含的数据源类）。<br />\nurl – 这是数据库的 JDBC URL 地址。<br />\nusername – 登录数据库的用户名。<br />\npassword – 登录数据库的密码。</p>\n</li>\n<li>\n<p><strong>POOLED</strong></p>\n</li>\n</ul>\n<blockquote>\n<p>这种数据源的实现利用 “池” 的概念将 JDBC 连接对象组织起来，<br />\n避免了创建新的连接实例时所必需的初始化和认证时间。<br />\n这是一种使得并发 Web 应用快速响应请求的流行处理方式。</p>\n</blockquote>\n<ul>\n<li><strong>JNDI</strong></li>\n</ul>\n<blockquote>\n<p>这个数据源的实现是为了能在如 EJB 或应用服务器这类容器中使用，<br />\n容器可以集中或在外部配置数据源，然后放置一个 JNDI 上下文的引用。<br />\n这种数据源配置只需要两个属性 : initial_context , data_source</p>\n</blockquote>\n<p><strong>mappers (映射器)</strong></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mappers</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token comment\">&lt;!-- 根据接口类来找同名的 xml 文件 (xml 文件和接口类要放在同一个包下面才会生效！！)--></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">&lt;!-- 在 resources 中 建立多级目录的时候，需要使用 / 而不是 \".\"</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>         ==> \".\" 创建的文件夹只有一个，名字是 com.lanou.demo --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">&lt;!--        &lt;mapper class=\"com.lanou.demo.mapper.BookMapper\"/>--></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">&lt;!--        &lt;mapper resource=\"BookMapper.xml\"/>--></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">&lt;!--        &lt;mapper resource=\"CategoryMapper.xml\"/>--></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">&lt;!--        &lt;mapper resource=\"UserMapper.xml\"/>--></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token comment\">&lt;!-- 扫描包下面的所有 xml 映射文件 --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>package</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.demo.mapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mappers</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h2 id=\"xml映射xxxmapperxml\"><a class=\"anchor\" href=\"#xml映射xxxmapperxml\">#</a> XML 映射 (XXXMapper.xml)</h2>\n<p>最常见和使用的就是 xml 形式的结果集映射，也可以做注解形式的配置<br />\n但是 sql 语句过长和复杂的时候，代码的可读性会下降</p>\n<ul>\n<li>注解形式，在方法上面使用 @select/@insert 注解就行，value 值填入 sql 语句</li>\n<li>XML 形式，使用 select /insert/update /delete/resultMap 标签来完成映射</li>\n</ul>\n<p><strong>xml 映射文件结构</strong></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">mapper</span>   </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token name\">PUBLIC</span> <span class=\"token string\">\"-//mybatis.org//DTD Mapper 3.0//EN\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token string\">\"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">&lt;!-- 一个接口类对应一个 mapper--></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">&lt;!-- 具体对应哪个接口类的实现，通过 namespace 来指明 --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>mapper</span> <span class=\"token attr-name\">namespace</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.demo.mapper.BookMapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">&lt;!--select 是最常用的标签，resultType 和 resultMap 是做结果集映射的 --></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token comment\">&lt;!--</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    id: 与接口类的方法名一致；</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    resultType: 指明结果集映射的实体对象</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    resultMap: 是最复杂也是最强大的元素，用来描述如何从数据库结果集中来加载对象。</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    --></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>findOne<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">resultType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.pojo.Book<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>       ...</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resultMap</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>findWithCategory<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.pojo.Book<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>      ...</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resultMap</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>findWithCategory<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">resultMap</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>findWithCategory<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>      ...</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>insert</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>addOne<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        ...</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>insert</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>delete</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>del<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>       ...</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>delete</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>update</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>update<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>       ...</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>update</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>mapper</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p><strong>xml 映射文件中的配置</strong></p>\n<ul>\n<li>主键返回 (insert 和 update)</li>\n</ul>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!--  useGeneratedKeys 是否使用生成的主键；</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>      keyColumn 主键在表中的列名；</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      keyProperty 主键在属性中对应的属性名 --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 在方法中调用 addOne 方法之后，会将传入的参数重新赋值 把自增的主键补全 --></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>insert</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>addOne<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">useGeneratedKeys</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     <span class=\"token attr-name\">keyColumn</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">keyProperty</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        insert into tb_book (name, id, author,category_id)</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        values (#&#123;name&#125;, null, #&#123;author&#125;,#&#123;categoryId&#125;)</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>insert</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ul>\n<li>缓存刷新 (使用默认值即可，不用配置)</li>\n</ul>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">&lt;!--flushCache=\"true\" 增删改中默认为 true 查询默认为 false ;</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    设置为 true , 会在增删改的时候 清空所有的缓存内容 --></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>update</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>update<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">flushCache</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        update tb_book</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        set name   = #&#123;name&#125;,</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            author = #&#123;author&#125;</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        where id = #&#123;id&#125;</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>update</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><hr />\n<p><strong>复杂结果映射</strong><br />\n常见的结果映射可能会出现非基本数据类型，<br />\n 比如会有某个属性是引用的其他类:   <code>private Address address;</code> <br />\n 或者某个属性是一个集合 (具有泛型):  <code>private List&lt;Role&gt; roles;</code></p>\n<p>结果集要映射的实体类:</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Integer</span> id<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> password<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// 引用类型</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Address</span> address<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// 引用的集合类型</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Role</span><span class=\"token punctuation\">></span></span> roles<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>这种时候，需要使用  <code>&lt;resultMap&gt;</code>  来做高级映射 :<br />\n 对于一对一或者一对多，使用  <code>&lt;association&gt;</code> <br />\n 对于多对多，使用  <code>&lt;collection&gt;</code></p>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resultMap</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>findOneDetailsWithAddress<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.pojo.User<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span> <span class=\"token attr-name\">column</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>uid<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>result</span> <span class=\"token attr-name\">column</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>result</span> <span class=\"token attr-name\">column</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>association</span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>address<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">javaType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.pojo.Address<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>result</span> <span class=\"token attr-name\">column</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>address<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>address<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>association</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>collection</span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>roles<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ofType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.pojo.Role<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span> <span class=\"token attr-name\">column</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rid<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>result</span> <span class=\"token attr-name\">column</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rcode<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>code<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>result</span> <span class=\"token attr-name\">column</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rname<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>collection</span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>permissions<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">ofType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.pojo.Permission<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>id</span> <span class=\"token attr-name\">column</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pid<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>id<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>result</span> <span class=\"token attr-name\">column</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>pname<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>result</span> <span class=\"token attr-name\">column</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>purl<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">property</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>url<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>collection</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>collection</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resultMap</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h2 id=\"动态sql\"><a class=\"anchor\" href=\"#动态sql\">#</a> 动态 SQL</h2>\n<p>实例 :</p>\n<pre><code>// 根据条件进行动态查询\n    // 可以根据书名/作者来进行查询, 条件的数量是不确定的\n\n    /**\n     * 无条件时: select * from tb_book\n     * 有书名时: select * from tb_book where name like %书名%;\n     * 有作者时: select * from tb_book where author like %作者%;\n     * 有书名和作者时: select * from tb_book\n                      where name like %作者% and author like %作者%;\n     */\n    List&lt;Book&gt; findByCondition(Book book);\n</code></pre>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>select</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>findByCondition<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">resultType</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.lanou.pojo.Book<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        select * from tb_book</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>where</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 如果里面有标签，拼接上 where--></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 接口方法参数对象中的属性名 --></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">&lt;!-- 直接传入的直接写属性，引用类型的属性用 A.B 的方法写属性名 --></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>if</span> <span class=\"token attr-name\">test</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>name != null and name.trim().length()>0<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                name like concat ('%',#&#123;name&#125;,'%')</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>if</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>if</span> <span class=\"token attr-name\">test</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>author != null<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                and author like #&#123;author&#125;</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>if</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>where</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>select</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><h4 id=\"where-标签\"><a class=\"anchor\" href=\"#where-标签\">#</a>  <code>&lt;where&gt;</code>  标签</h4>\n<p>自动去除第一个 and , 如果 where 内没有内容 自身会被清除</p>\n<h4 id=\"if-标签\"><a class=\"anchor\" href=\"#if-标签\">#</a>  <code>&lt;if&gt;</code>  标签</h4>\n<p>做判断用，符合条件的才会执行  <code>&lt;if&gt; &lt;/if&gt;</code>  中包裹的 sql 语句<br />\n<mark><strong>注意 :</strong></mark></p>\n<blockquote>\n<ol>\n<li>if 中的 test =&quot; &quot; 使用的是 OGNL 表达式进行的判断<br />\n　　----&gt; 可以直接写传入参数的 Key 或者传入对象的属性名 不需要添加任何特殊符号<br />\n　　即：不要像 mybatis 中那样，使用 #{ } 或者 $</li>\n<li>test 中要使用 <strong>and</strong> 和 <strong>or</strong>  , 不要使用 &amp;&amp; , ||</li>\n</ol>\n</blockquote>\n<h4 id=\"choose-when-otherwise标签\"><a class=\"anchor\" href=\"#choose-when-otherwise标签\">#</a>  <code> &lt;choose&gt;</code>  , <code>&lt;when&gt;</code>  ,  <code>&lt;otherwise&gt;</code>  标签</h4>\n<p>只要有一个标签中的内容成立，下面其他的 sql 语句都不会被执行</p>\n<pre><code>&lt;choose&gt;\n    &lt;where test = &quot; &quot;&gt;\n    &lt;/where&gt;\n    &lt;where test = &quot; &quot;&gt;\n    &lt;/where&gt;\n&lt;/choose&gt;\n</code></pre>\n<h4 id=\"set标签\"><a class=\"anchor\" href=\"#set标签\">#</a>  <code>&lt;set&gt;</code>  标签</h4>\n<p>常常用在修改中<br />\n作用：去掉最后一个 &quot;,&quot; 如果 set 中没有内容 自身会被清除<br />\n<mark><strong>注意 :</strong></mark></p>\n<blockquote>\n<ol>\n<li>set 标签在进行修改的时候，<br />\n<strong> 如果里面包含的内容为空 sql 语法会不合规 导致报错</strong><br />\n<strong>修改中没有 set 从句，属于 sql 的语法错误！！</strong><br />\n　解决：set 中添加一个固定值，保证不为空 :</li>\n</ol>\n<figure class=\"highlight xml\"><figcaption data-lang=\"XML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>update user </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>set</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token comment\">&lt;!-- 添加一条绝对成立的条件，保证 sql 的正确 --></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  id = #&#123;id&#125;,</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>if</span> <span class=\"token attr-name\">test</span> <span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span> <span class=\"token punctuation\">\"</span>pwd != null<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">and</span> <span class=\"token attr-name\">pwd</span> <span class=\"token attr-name\">!</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span> <span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>      pwd = #&#123;pwd&#125;,</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>if</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>   <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>if</span> <span class=\"token attr-name\">test</span> <span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span> <span class=\"token punctuation\">\"</span>email != null<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">and</span> <span class=\"token attr-name\">email</span> <span class=\"token attr-name\">!</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span> <span class=\"token punctuation\">\"</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      email = #&#123;email&#125;,</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>if</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>set</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure></blockquote>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/hou-duan/spring/springmvc-lan-jie-qi-fang-fa-can-shu-jie-xi-qi/",
            "url": "http://adamshang2333.github.io/hou-duan/spring/springmvc-lan-jie-qi-fang-fa-can-shu-jie-xi-qi/",
            "title": "SpringMVC 拦截器&方法参数解析器",
            "date_published": "2023-03-12T11:31:14.223Z",
            "content_html": "<h2 id=\"springmvc-拦截器方法参数解析器\"><a class=\"anchor\" href=\"#springmvc-拦截器方法参数解析器\">#</a> SpringMVC 拦截器 &amp; 方法参数解析器</h2>\n<h3 id=\"拦截器\"><a class=\"anchor\" href=\"#拦截器\">#</a> 拦截器</h3>\n<blockquote>\n<p>拦截器是 SpringMVC 中的技术<br />\n　　　针对 Handler (处理器) 进行的拦截；<br />\n 过滤器是 Serlvet 中的技术<br />\n　　　针对 Request (请求) 进行拦截</p>\n</blockquote>\n<p><strong> <code>常见使用:实现HandlerInterceptor接口,重写preHandle 判断请求是否可以进入Handler</code> </strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    拦截器</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    拦截器是对处理器 (Handler) 进行拦截</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token annotation punctuation\">@Component</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyInterceptor</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">HandlerInterceptor</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">// 返回 true: 可以进入 Handler</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\">// 返回 false: 不可以进入 Handler</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>     * 该方法会在请求进入 Handler 之前执行，</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>     * 返回值表示请求是否会继续往下执行 可以做一些权限的拦截</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">preHandle</span><span class=\"token punctuation\">(</span> <span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                              <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                              <span class=\"token class-name\">Object</span> handler<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token comment\">// 如果是使用 ReqestMapping 注解形式创建的 handler,</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token comment\">// 那么方法参数中 handler 对象的真正类型是: HandlerMethod</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token comment\">// 所以可以针对 @RequestMapping 类型的请求进行 Handler 的类型转换</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token comment\">// HandlerMethod 对象可以拿到 controller 中的注解。参数等信息</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token class-name\">HandlerMethod</span> hm <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HandlerMethod</span><span class=\"token punctuation\">)</span> handler<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    在处理器 Handler 刚执行完毕之后，该方法会被调用</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    方法参数有: Handler 和 ModelAndView 对象</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">postHandle</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"31\"></td><td><pre>                           <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                           <span class=\"token class-name\">Object</span> handler<span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                           <span class=\"token class-name\">ModelAndView</span> modelAndView<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token comment\">/*</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    响应已经返回给用户之后，该方法会执行</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    用的很少，可能会做一些资源释放 / 日志打印等等</pre></td></tr><tr><td data-num=\"38\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">afterCompletion</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span> request<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpServletResponse</span> response<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Object</span> handler<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Exception</span> ex<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"方法参数解析器\"><a class=\"anchor\" href=\"#方法参数解析器\">#</a> 方法参数解析器</h3>\n<blockquote>\n<p>方法参数解析器的作用<br />\n就是在 Controller 中，能在接口方法传入的参数中设置任意的类<br />\n并且通过框架能直接在方法中调用传入的参数 (类).<br />\n 对传入参数映射到对应类型的过程 就需要方法参数解析器</p>\n</blockquote>\n<p><strong> <code>Step1 自定义一个注解,标识执行自定义方法参数解析器的实体类</code> </strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"2\"></td><td><pre> * 一个简单的标记注解</pre></td></tr><tr><td data-num=\"3\"></td><td><pre> * 只是标识一下哪个参数是要使用自定义的方法参数解析器来进行处理</pre></td></tr><tr><td data-num=\"4\"></td><td><pre> * @author OldFun</pre></td></tr><tr><td data-num=\"5\"></td><td><pre> * @date 2019-10-15 16:58</pre></td></tr><tr><td data-num=\"6\"></td><td><pre> */</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token annotation punctuation\">@Target</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ElementType</span><span class=\"token punctuation\">.</span>PARAMETER<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token annotation punctuation\">@Retention</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">RetentionPolicy</span><span class=\"token punctuation\">.</span>RUNTIME<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token annotation punctuation\">@interface</span> <span class=\"token class-name\">CurrentUser</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong> <code>Step2 自定义方法参数解析的接口实现类</code> </strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CurrentUserMethodArgumentResolver</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">HandlerMethodArgumentResolver</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\">/*  数据校验和方法参数解析器都是</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        @requestMapping 中的方法扩展</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        是 SpringMVC 中的技术</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     * 用来确定该解析器能处理什么规则的方法参数</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     * 这个规则需要我们自己进行定义</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">supportsParameter</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MethodParameter</span> methodParameter<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token comment\">// 规则:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token comment\">// 1. 必须有 @Current 注解</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token comment\">// 2. 方法的参数类型必须是 User 类型</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token comment\">// 两个条件必须同时满足 (使用短路机制，提高运行效率)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">return</span> methodParameter<span class=\"token punctuation\">.</span><span class=\"token function\">hasParameterAnnotation</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">CurrentUser</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token operator\">&amp;&amp;</span> methodParameter<span class=\"token punctuation\">.</span><span class=\"token function\">getParameterType</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token comment\">/**</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>     * 表示如何为满足上面条件的对象赋值</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>     * @param methodParameter</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>     * @param modelAndViewContainer</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>     * @param nativeWebRequest</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>     * @param webDataBinderFactory</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>     * @return 返回被赋值后的对象</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>     * @throws Exception</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>     */</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token annotation punctuation\">@Override</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Object</span> <span class=\"token function\">resolveArgument</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">MethodParameter</span> methodParameter<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>                                  <span class=\"token class-name\">ModelAndViewContainer</span> modelAndViewContainer<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>                                  <span class=\"token class-name\">NativeWebRequest</span> nativeWebRequest<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>                                  <span class=\"token class-name\">WebDataBinderFactory</span> webDataBinderFactory<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">Exception</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token comment\">// 从 session 中取出当前登录用户，并且返回即可</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        <span class=\"token comment\">// 先获取到当前的请求对象</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token class-name\">HttpServletRequest</span> request <span class=\"token operator\">=</span> nativeWebRequest<span class=\"token punctuation\">.</span><span class=\"token function\">getNativeRequest</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpServletRequest</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token class-name\">HttpSession</span> session <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span><span class=\"token function\">getSession</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token class-name\">Object</span> user <span class=\"token operator\">=</span> session<span class=\"token punctuation\">.</span><span class=\"token function\">getAttribute</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"user\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>        <span class=\"token comment\">// 如果不登录</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>user <span class=\"token operator\">==</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>        <span class=\"token keyword\">return</span> user<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong> <code>Step3 在接口中,使用自定义注解标识使用自定义方法参数解析器的类</code> </strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/book/add\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">JsonResoult</span> <span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Book</span> book<span class=\"token punctuation\">,</span> <span class=\"token annotation punctuation\">@CurrentUser</span> <span class=\"token class-name\">User</span> user<span class=\"token punctuation\">,</span> <span class=\"token class-name\">HttpSession</span> session<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token function\">handleRequest</span><span class=\"token punctuation\">(</span>session<span class=\"token punctuation\">,</span>book<span class=\"token punctuation\">,</span><span class=\"token string\">\"添加成功\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/hou-duan/spring/spring-jdbc/",
            "url": "http://adamshang2333.github.io/hou-duan/spring/spring-jdbc/",
            "title": "Spring JDBC",
            "date_published": "2023-03-12T11:31:14.187Z",
            "content_html": "<h2 id=\"概念\"><a class=\"anchor\" href=\"#概念\">#</a> 概念</h2>\n<p>是封装了 JDBC 操作的一个框架 必须依赖 Spring</p>\n<p>SpringJDBC 本身就是基于模板模式进行开发，提供一个 JDBCTemplate 类</p>\n<h2 id=\"jdbc操作流程\"><a class=\"anchor\" href=\"#jdbc操作流程\">#</a> JDBC 操作流程</h2>\n<h3 id=\"1-加载驱动类\"><a class=\"anchor\" href=\"#1-加载驱动类\">#</a> 1  加载驱动类</h3>\n<p><code>原生jdbc: Class.forName(&quot;com.mysql.jdbc.Driver&quot;)</code></p>\n<blockquote>\n<p>被封装成了 DateSource , 放入了连接池</p>\n</blockquote>\n<h3 id=\"2-建立连接\"><a class=\"anchor\" href=\"#2-建立连接\">#</a> 2  建立连接</h3>\n<p><code>原生jdbc: Connection con = DriverManager.getConnection(&quot;jdbc:mysql:/&quot;)</code></p>\n<h3 id=\"3-创建语句集\"><a class=\"anchor\" href=\"#3-创建语句集\">#</a> 3  创建语句集</h3>\n<p><code>PreparedStatement pstm = con.prepareStatement(&quot;select ... &quot;)</code></p>\n<h3 id=\"4-执行语句集\"><a class=\"anchor\" href=\"#4-执行语句集\">#</a> 4  执行语句集</h3>\n<p><code>ResultSet rs = pstm.executeQuery()</code></p>\n<h3 id=\"5-获取结果集\"><a class=\"anchor\" href=\"#5-获取结果集\">#</a> 5  获取结果集</h3>\n<p><code>rs.get...</code></p>\n<blockquote>\n<p>被封装成了 ORM 过程 (Object Relation Mapping)</p>\n<p>思路：将 result 对象中的对象 使用反射转换到 javaBean 中</p>\n</blockquote>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/hou-duan/java/java-de-nei-bu-lei/",
            "url": "http://adamshang2333.github.io/hou-duan/java/java-de-nei-bu-lei/",
            "title": "java的内部类",
            "date_published": "2023-03-12T11:31:14.063Z",
            "content_html": "<h2 id=\"前言-类的成员\"><a class=\"anchor\" href=\"#前言-类的成员\">#</a> 前言 -- 类的成员</h2>\n<blockquote>\n<p>一个类的成员，包含如下内容:<br />\n 属性<br />\n方法<br />\n类<br />\n静态代码块</p>\n</blockquote>\n<p>内部类可以看做一个外部类的属性，<br />\n 在 Java 中，可以将一个类定义在另一个类里面或者一个方法里面，这样的类称为内部类。与之对应，包含内部类的类被称为外部类。<br />\n优势：内部类提供了更好的封装，可以把内部类隐藏在外部类之内，通过访问修饰符控制其他类对内部类的访问，更好的实现了信息隐藏<br />\n分类：成员内部类、静态内部类、方法内部类、匿名内部类</p>\n<h2 id=\"内部类的分类\"><a class=\"anchor\" href=\"#内部类的分类\">#</a> 内部类的分类</h2>\n<p>内部类可以分为:<br />\n<strong> 普通内部类</strong><br />\n<strong>静态内部类</strong><br />\n<strong>匿名内部类</strong><br />\n<strong>局部内部类</strong></p>\n<h2 id=\"普通内部类\"><a class=\"anchor\" href=\"#普通内部类\">#</a> 普通内部类</h2>\n<blockquote>\n<p><strong>特点 :</strong></p>\n<ol>\n<li>内部类可以直接访问外部类的成员；<br />\n　　如果出现同名属性或者方法，优先访问内部类中定义的  (默认存在 this)</li>\n<li>可以使用 <strong>外部类.this. 成员</strong> 的方式，访问外部类中同名的信息 (成员属性和成员方法)</li>\n<li>外部类访问内部类信息，需要通过内部类实例，无法直接访问</li>\n<li>一个外部类可以有多个内部类对象 (引用的内存地址不同)<br />\n　　<strong>注：当一个类还有内部类引用的时候，这个类不会被 JVM 回收</strong><br />\n　　　　　　可以类比为数据库的外键约束，有引用的情况下不能被删除</li>\n</ol>\n</blockquote>\n<p><strong>创建类示例 :</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Outer</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> outer<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// 外部类的构造方法</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Outer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"外部类\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>outer <span class=\"token operator\">=</span> <span class=\"token string\">\"我是大佬\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"我是外部类\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">reflect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"我是外部类,调用内部类方法:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token comment\">// 调用内部类的方法，需要 new 一个内部类对象</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Inter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Inter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>inter <span class=\"token operator\">=</span> \" <span class=\"token operator\">+</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Inter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">inter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token comment\">// 声明为内部类</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token annotation punctuation\">@Data</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Inter</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token comment\">// 内部类属性</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> inter<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token comment\">// 内部类的构造方法</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token class-name\">Inter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"内部类\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>inter <span class=\"token operator\">=</span> <span class=\"token string\">\"我是菜鸡\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"我是内部类\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">reflect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"我是内部类,调用外部类方法:\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            <span class=\"token class-name\">Outer</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"outer = \"</span> <span class=\"token operator\">+</span> outer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><strong>一个类可以创建多个内部类对象:</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token class-name\">Outer<span class=\"token punctuation\">.</span>Inter</span> inter <span class=\"token operator\">=</span> outer<span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Inter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>        <span class=\"token class-name\">Outer<span class=\"token punctuation\">.</span>Inter</span> inter2 <span class=\"token operator\">=</span> outer<span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Inter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token comment\">// 输出: false</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>inter<span class=\"token operator\">==</span>inter2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"静态内部类\"><a class=\"anchor\" href=\"#静态内部类\">#</a> 静态内部类</h2>\n<blockquote>\n<p>我们知道，<strong> 一个类的静态成员独立于这个类的任何一个对象存在.</strong><br />\n 只要在具有访问权限的地方，<br />\n我们就可以通过 <mark><strong>类名。静态成员名</strong></mark> 的形式来访问这个静态成员，</p>\n</blockquote>\n<p>同样的，静态内部类也是作为一个外部类的静态成员而存在，<br />\n<strong> 创建一个类的静态内部类对象不需要依赖其外部类对象。</strong></p>\n<blockquote>\n<p>特点 :</p>\n<ol>\n<li>创建无需依赖外部类对象，通过类来创建即可</li>\n<li>只能访问外部类的静态成员变量</li>\n<li>外部类依然可以访问静态内部类对象的所有访问权限的成员</li>\n</ol>\n</blockquote>\n<p><strong>定义静态内部类:</strong></p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">// 外部类</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Outer</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token comment\">// 普通成员变量</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> outer<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// 静态成员变量</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">String</span> slogen<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">// 静态内部类</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">StaticInter</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">say</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"我是静态内部类\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">getOuterFiled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Outer</span><span class=\"token punctuation\">.</span>slogen<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token comment\">// System.out.println(Outer.name);</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/hou-duan/java/basics/java-ji-chu/",
            "url": "http://adamshang2333.github.io/hou-duan/java/basics/java-ji-chu/",
            "title": "IO基础",
            "date_published": "2023-03-12T11:31:05.195Z",
            "content_html": "<p><strong>IO 概念</strong></p>\n",
            "tags": [
                "java",
                "基础"
            ]
        },
        {
            "id": "http://adamshang2333.github.io/hou-duan/java/javaweb-ji-chu/",
            "url": "http://adamshang2333.github.io/hou-duan/java/javaweb-ji-chu/",
            "title": "JavaWeb基础",
            "date_published": "2023-03-12T11:31:04.311Z",
            "content_html": "<h2 id=\"应用组成结构\"><a class=\"anchor\" href=\"#应用组成结构\">#</a> 应用组成结构</h2>\n<p><img data-src=\"https://images0.cnblogs.com/i/289233/201405/172304056712920.png\" alt=\"组成\" /></p>\n<p><strong>注: !!! 在 JavaWeb 中，没有明显的主函数</strong></p>\n<p><strong>WEB-INF</strong> 　－－＞&quot;安全区&quot; 后端判断有无权限获取该文件夹下的内容</p>\n<blockquote>\n<p>WEB-INF 文件夹 是一个对前端隐藏的文件夹<br />\n即，前端没法通过访问 WEB-INF 路径访问里面的内容 --&gt;<br />\n 如果必须要访问，只能通过后台代码转发.</p>\n</blockquote>\n<p><strong>web.xml</strong>　－－＞配置文件设置</p>\n<blockquote>\n<p>在 javaWeb 程序启动时，最早加载的配置文件</p>\n</blockquote>\n<h2 id=\"webxml\"><a class=\"anchor\" href=\"#webxml\">#</a> web.xml</h2>\n<p>.xml 代码示例 :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;\n         version=&quot;4.0&quot;&gt;\n      \n     // 配置servlet    \n     // Step 1 : servlet的本地设置\n    &lt;servlet&gt;\n        // 给每个servlet起别名(外号)\n        &lt;servlet-name&gt;mservlet&lt;/servlet-name&gt;  //*关联,须一致*\n        // 指定servlet的类(Java类 关联)\n        &lt;servlet-class&gt;com.oldFun.controller.MainServlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n    //  Step 2 : 创建和服务器的映射\n    &lt;servlet-mapping&gt;\n        // 和本地的&quot;外号&quot;关联\n        &lt;servlet-name&gt;mservlet&lt;/servlet-name&gt;  //*关联,须一致*\n        // 指定访问的地址(起一个名字,别忘了&quot;/&quot;!!!)\n        &lt;url-pattern&gt;/main&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n    \n    &lt;servlet&gt;\n        // 起名字(外号)\n        &lt;servlet-name&gt;helloServlet&lt;/servlet-name&gt;\n        // 指定servlet的类\n        &lt;servlet-class&gt;com.oldFun.controller.HelloServlet&lt;/servlet-class&gt;\n    &lt;/servlet&gt;\n    // 映射\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;helloServlet&lt;/servlet-name&gt;\n        // 指定地址\n        &lt;url-pattern&gt;/suibian&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n<h2 id=\"servlet\"><a class=\"anchor\" href=\"#servlet\">#</a> Servlet</h2>\n<p><code>背景 </code></p>\n<blockquote>\n<p>sun 公司提供的一门用于开发动态 web 资源的技术<br />\n Sun 公司在其 API 中提供了一个 servlet 接口，</p>\n</blockquote>\n<p><code>实现</code></p>\n<blockquote>\n<p>用户若想用发一个动态 web 资源 (即开发一个 Java 程序向浏览器输出数据)<br />\n 需要完成以下 2 个步骤：<br />\n　　<strong>1、编写一个 Java 类，实现 servlet 接口。<br />\n　　2、把开发好的 Java 类部署到 web 服务器中。</strong><br />\n　　　　按照一种约定俗成的称呼习惯，<strong>通常也把实现了 servlet 接口的 java 程序，称之为 Servlet</strong></p>\n</blockquote>\n<p><code>作用</code></p>\n<blockquote>\n<p>Servlet 接口就是处理网络请求的一套规范，<br />\n负责连接 web 服务器（如 tomcat 服务器)，存取数据<br />\n交互式的生成动态的 web 内容</p>\n</blockquote>\n<p><code>小结</code></p>\n<blockquote>\n<p>Servlet : JavaWeb 负责处理所有请求的类<br />\n每一个请求，对应一个 servlet 对象；每一个 servlet 类 只有一个对象 (单例设计模式)<br />\n－－＞ <strong>每一个请求，对应一个 Servlet 类</strong></p>\n</blockquote>\n<h3 id=\"servlet实现方式\"><a class=\"anchor\" href=\"#servlet实现方式\">#</a> Servlet 实现方式</h3>\n<h4 id=\"1-通过接口实现-需要实现所有的方法\"><a class=\"anchor\" href=\"#1-通过接口实现-需要实现所有的方法\">#</a> 1.    通过接口实现 －－＞ 需要实现所有的方法！！！</h4>\n<p>​\t <code>常用重要方法</code> <br />\n​</p>\n<pre><code>&gt;init 方法 : 初始化方法,只执行一次(创建servlet对象的时候执行.)  \n　     作用：做一些设置和初始化工作    \n&gt;\n&gt;service 方法 : 会被执行多次  \n　     作用：负责每次请求要显示的内容    \n&gt;\n&gt;destroy 方法 : 当servlet对象被销毁时执行 (服务器停止运行时, 对象被销毁)  \n　     作用：做一些资源释放的操作 \n</code></pre>\n<p>实例:</p>\n<pre><code>//** implements 来实现:\npublic class HelloServlet implements Servlet &#123;\n\n    /**\n     * 该方法是servlet对象的初始化方法, 只会执行一次\n     * 在创建servlet对象的时候执行.\n     * 作用: 做一些设置和初始化工作\n     * @param servletConfig\n     * @throws ServletException\n     */\n    @Override\n    public void init(ServletConfig servletConfig) throws ServletException &#123;\n        System.out.println(&quot;HelloServlet初始化&quot;);\n    &#125;\n\n    @Override\n    public ServletConfig getServletConfig() &#123;\n        return null;\n    &#125;\n\n    /**\n     * 这个方法会被执行多次,负责每次请求要显示的内容\n     * @param servletRequest  请求\n     * @param servletResponse 响应\n     * @throws ServletException\n     * @throws IOException\n     */\n    @Override\n    public void service(ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException &#123;\n        System.out.println(&quot;service方法执行&quot;);\n    &#125;\n\n    @Override\n    public String getServletInfo() &#123;\n        return null;\n    &#125;\n\n    /**\n     * 当servlet对象被销毁时执行该方法\n     * 服务器停止运行时, 对象被销毁\n     * 做一些资源释放的操作\n     */\n    @Override\n    public void destroy() &#123;\n        System.out.println(&quot;helloServlet被销毁&quot;);\n    &#125;\n  &#125;\n</code></pre>\n<h4 id=\"2-通过继承实现-\"><a class=\"anchor\" href=\"#2-通过继承实现-\">#</a> 2.    通过继承实现  －－＞</h4>\n<blockquote>\n<p>继承来实现，设计模式上属于适配器模式<br />\n适用场景：接口过多，但是常用的方法很少<br />\n优点：不常用的方法</p>\n</blockquote>\n<p><code>继承父类: </code></p>\n<h4 id=\"21-继承genericservlet\"><a class=\"anchor\" href=\"#21-继承genericservlet\">#</a> 2.1 继承 GenericServlet</h4>\n<blockquote>\n<p>常用于重写 <strong>service</strong> 方法</p>\n</blockquote>\n<p>实例</p>\n<pre><code>public class MainServlet  extends GenericServlet &#123;\n\n    @Override\n    public void service (ServletRequest servletRequest, ServletResponse servletResponse) throws ServletException, IOException &#123;\n        // 给页面显示一点内容\n        System.out.println(&quot;service方法&quot;);\n        // 开启一个字符流\n        PrintWriter writer = servletResponse.getWriter();\n        writer.println(&quot;&lt;h1&gt;hello servlet&lt;/h1&gt;&quot;);\n        // 关闭字符流\n        writer.close();\n</code></pre>\n<p><code>或者</code></p>\n<h4 id=\"22-继承httpservlet\"><a class=\"anchor\" href=\"#22-继承httpservlet\">#</a> 2.2 继承 HttpServlet</h4>\n<blockquote>\n<p>重写 <strong>doPost</strong>  <strong>doGet</strong> 方法</p>\n</blockquote>\n<p><code>继承HttpServlet更常用,使用时注意删除super.doGet ;  super.doGet</code></p>\n<p>实例</p>\n<pre><code>\n// @WebServlet -- 快速配置 不用在xml中再配置了\n// !!!!url 中的&quot;/&quot;要记得写,不然很多的请求中报错很难找\n// !!!url中的大小写有要求,会按照大小写区分\n@WebServlet(urlPatterns = &quot;/home&quot;)\npublic class IntroServlet  extends HttpServlet &#123;\n\n    @Override\n    protected void doGet(HttpServletRequest req,\n                         HttpServletResponse resp) throws ServletException, IOException &#123;\n         // super.doGet(req, resp);  必须删掉 不然会不支持这个请求\n                 \n         // 在头部文件指明发送给浏览器的内容以及格式\n         // resp设置响应头, 方便浏览器直接判断响应的内容\n        resp.setHeader(&quot;Content-Type&quot;, &quot;text/html;charset=utf-8&quot;);\n\n        ServletContext context = this.getServletContext();\n\n        // 读取context中的数据\n        Object name = context.getAttribute(&quot;name&quot;);\n        // 需要先访问存值的页面, 再访问取值的页面 才能取到context中的值\n        System.out.println(&quot;从context中读取的数据&quot;+name);\n        // 删除context保存的数据\n        context.removeAttribute(&quot;name&quot;);\n        System.out.println(&quot;删除context的数据&quot;);\n        PrintWriter pw = resp.getWriter();\n        pw.write(&quot;&lt;div&gt;第一个请求&lt;/div&gt;&quot;);\n        pw.close();\n    &#125;\n\n    @Override\n    protected void doPost(HttpServletRequest req,\n                          HttpServletResponse resp) throws ServletException, IOException &#123;\n          // 从父类继承过来的doPost方法需要删除\n          // ?? : 父类中默认不支持 doPost 和 dpGet\n//        super.doPost(req, resp);\n    &#125;\n&#125;\n</code></pre>\n<h3 id=\"servlet的常用三大对象requset-session-servletcontext\"><a class=\"anchor\" href=\"#servlet的常用三大对象requset-session-servletcontext\">#</a> Servlet 的常用三大对象 (requset ; session ; servletContext)</h3>\n<p><code>获取方法</code></p>\n<blockquote>\n<p>三大常用对象，<br />\n 都是通过<strong> request 调用 get 方法</strong>来得到一个对象</p>\n</blockquote>\n<p><code>区别</code></p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">种类</th>\n<th style=\"text-align:center\">类名</th>\n<th style=\"text-align:center\">生命周期</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\"><strong>request</strong></td>\n<td style=\"text-align:center\">HttpServletRequest</td>\n<td style=\"text-align:center\">本次请求有效</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>session</strong></td>\n<td style=\"text-align:center\">HttpSession</td>\n<td style=\"text-align:center\">当前浏览器有效，可以跨页面</td>\n</tr>\n<tr>\n<td style=\"text-align:center\"><strong>servletContext</strong></td>\n<td style=\"text-align:center\">ServletContext</td>\n<td style=\"text-align:center\">整个项目有效，可以跨页面</td>\n</tr>\n</tbody>\n</table>\n<p>``</p>\n<h4 id=\"servletcontext\"><a class=\"anchor\" href=\"#servletcontext\">#</a> servletContext</h4>\n<blockquote>\n<p>一个项目只有一个 servletContext 对象  (全局)<br />\n 在项目启动期间，保存在 servletContext 中的数据可以一直使用 (跨页面)</p>\n</blockquote>\n<p><code>生命周期</code> <br />\n项目启动到关闭，服务器重启时 会被销毁</p>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/hou-duan/java/java-fan-she/",
            "url": "http://adamshang2333.github.io/hou-duan/java/java-fan-she/",
            "title": "Java反射",
            "date_published": "2023-03-12T11:31:04.299Z",
            "content_html": "<h1 id=\"反射\"><a class=\"anchor\" href=\"#反射\">#</a> 反射</h1>\n<h2 id=\"反射机制的概念\"><a class=\"anchor\" href=\"#反射机制的概念\">#</a> 反射机制的概念</h2>\n<p>将类的各个组成部分，封装为其他对象</p>\n<blockquote>\n<p>在运行状态中，<br />\n 对任意一个类，都能够知道这个类的所有属性和方法；<br />\n 对任意一个对象，都能够调用它的任意一个属性和方法；</p>\n</blockquote>\n<h2 id=\"反射的功能\"><a class=\"anchor\" href=\"#反射的功能\">#</a> 反射的功能</h2>\n<p>1 . 在程序的运行过程中，可以操作这些对象</p>\n<ol start=\"2\">\n<li>可以解耦，提高程序的可扩展性</li>\n</ol>\n<h2 id=\"获取class类对象三个方法\"><a class=\"anchor\" href=\"#获取class类对象三个方法\">#</a> 获取 Class 类对象 (三个方法)</h2>\n<p><code>源码阶段</code></p>\n<ol>\n<li><strong>Class.forName (&quot;全类名&quot;)</strong> : 将字节码文件加载进内存，返回 Class 对象</li>\n</ol>\n<p><code>Class 类对象阶段</code></p>\n<ol start=\"2\">\n<li><strong>类名.Class</strong>: 通过类名的属性 class 获取</li>\n</ol>\n<p><code>实例化对象阶段</code> <br />\n 3.  <strong>对象.getClass ()</strong> : getClass 方法在 Object 类中定义着</p>\n<blockquote>\n<p>注意：对象阶段，new Person ( ) 调用无参构造方法</p>\n</blockquote>\n<h2 id=\"class类的方法-通过class类对象调用\"><a class=\"anchor\" href=\"#class类的方法-通过class类对象调用\">#</a> Class 类的方法 (通过 class 类对象调用)</h2>\n<h3 id=\"获取类名类全名类名\"><a class=\"anchor\" href=\"#获取类名类全名类名\">#</a> 获取类名 (类全名 &amp;&amp; 类名)</h3>\n<h3 id=\"获取构造器构造方法\"><a class=\"anchor\" href=\"#获取构造器构造方法\">#</a> 获取构造器 (构造方法)</h3>\n<h3 id=\"实例化对象\"><a class=\"anchor\" href=\"#实例化对象\">#</a> 实例化对象</h3>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/hou-duan/java/java-collection/",
            "url": "http://adamshang2333.github.io/hou-duan/java/java-collection/",
            "title": "Java collection",
            "date_published": "2023-03-12T11:31:04.279Z",
            "content_html": "<h2 id=\"collection容器\"><a class=\"anchor\" href=\"#collection容器\">#</a> Collection 容器</h2>\n<blockquote>\n<p>容器的特点:<br />\n1. 只用于<strong>存储对象</strong>  --&gt; 但可以使用泛型规定具体对象<br />\n --&gt;  如果是基本类型，在 Java 内部也会转为对应类的对象<br />\n 2. 长度可变<br />\n 3. 存储对象的类型可以不同 --&gt; 无泛型时</p>\n</blockquote>\n<h4 id=\"容器方法\"><a class=\"anchor\" href=\"#容器方法\">#</a> 容器方法</h4>\n<h4 id=\"add-添加一个对象\"><a class=\"anchor\" href=\"#add-添加一个对象\">#</a> .add  添加一个对象</h4>\n<h4 id=\"addall-把参数容器的所有元素添加到容器中\"><a class=\"anchor\" href=\"#addall-把参数容器的所有元素添加到容器中\">#</a> .addAll  把参数容器的<strong>所有元素</strong>添加到容器中</h4>\n<pre><code>// 把参数容器(a2)整体作为一个对象add进数组arr中\n arr.addAll(a2);      \n</code></pre>\n<h4 id=\"size-获取容器的大小无参\"><a class=\"anchor\" href=\"#size-获取容器的大小无参\">#</a> .size () 获取容器的大小 (无参)</h4>\n<h4 id=\"removeobject-移除只移除遇到的第一个\"><a class=\"anchor\" href=\"#removeobject-移除只移除遇到的第一个\">#</a> .remove (object) 移除 (只移除遇到的第一个)</h4>\n<h4 id=\"contains-判断是否包含某一对象遇到的第一个\"><a class=\"anchor\" href=\"#contains-判断是否包含某一对象遇到的第一个\">#</a> .contains () 判断是否包含某一对象 (遇到的第一个)</h4>\n<blockquote>\n<p>.contains 返回布尔值</p>\n</blockquote>\n<h2 id=\"迭代器-iterator\"><a class=\"anchor\" href=\"#迭代器-iterator\">#</a> 迭代器 iterator</h2>\n<pre><code>    // 迭代器使用完之后 指针指向迭代器之前停止的位置(遍历后 指针停在最后) 无法重复利用\n    // 迭代器想用时要再次赋值 !!!\n</code></pre>\n<pre><code> Iterator&lt;String&gt; it = arr.iterator();\n        while (it.hasNext()) &#123;\n        // 每次.next 调用一次指针 进行一次迭代器的移位  \n        // 实质上在循环内执行了两次指针的移动 对奇数次来说 最后一次会找不到可用元素\n              System.out.println(it.next());           \n             if (&quot;王五&quot;.equals(it.next())) &#123;\n                it.remove();\n\n            &#125;\n        &#125;\n        // 迭代器使用完之后 指针指向迭代器之前停止的位置(遍历后 指针停在最后) 无法重复利用\n        // 迭代器想用时要再次赋值 !!!\n        it = arr.iterator();\n</code></pre>\n<h2 id=\"泛型\"><a class=\"anchor\" href=\"#泛型\">#</a> 泛型</h2>\n<blockquote>\n<p>限制容器中保存的对象类型<br />\n每次取出的对象，想让它是规定的类型 (不是 object)<br />\n<strong>&lt; &gt; 内可以放入类 基本数据类型等</strong></p>\n</blockquote>\n<pre><code>\tList&lt;String&gt; l = new ArrayList&lt;&gt;();\n</code></pre>\n<h2 id=\"list\"><a class=\"anchor\" href=\"#list\">#</a> List</h2>\n<blockquote>\n<p>威力增强版的数组，特点 :<br />\n1. 元素有序 (按放入顺序)<br />\n2. <strong>按下标取值 (从 0 开始)</strong><br />\n 3. 放入对象可重复<br />\n 4. 继承自 collection</p>\n</blockquote>\n<h4 id=\"list特有方法\"><a class=\"anchor\" href=\"#list特有方法\">#</a> List 特有方法</h4>\n<h4 id=\"按下标-添加-元素\"><a class=\"anchor\" href=\"#按下标-添加-元素\">#</a> 按下标 添加 元素</h4>\n<pre><code>arr.add(0,&quot;小金刚&quot;);\n</code></pre>\n<h4 id=\"按下标-移除-元素注意下标越界\"><a class=\"anchor\" href=\"#按下标-移除-元素注意下标越界\">#</a> 按下标 移除 元素 (注意下标越界)</h4>\n<pre><code> arr.remove(2);\n</code></pre>\n<h4 id=\"按下标-修改-元素注意下标越界\"><a class=\"anchor\" href=\"#按下标-修改-元素注意下标越界\">#</a> 按下标 修改 元素 (注意下标越界)</h4>\n<pre><code> arr.set(0,&quot;太二真人&quot;);\n</code></pre>\n<h4 id=\"按下标-获取-元素注意下标越界\"><a class=\"anchor\" href=\"#按下标-获取-元素注意下标越界\">#</a> 按下标 获取 元素 (注意下标越界)</h4>\n<pre><code> arr.get(5);\n</code></pre>\n<h4 id=\"list遍历三种方法\"><a class=\"anchor\" href=\"#list遍历三种方法\">#</a> List 遍历 (三种方法)</h4>\n<h4 id=\"fori-循环代码需要顺序或者下标参与\"><a class=\"anchor\" href=\"#fori-循环代码需要顺序或者下标参与\">#</a> fori --&gt; 循环代码需要顺序或者下标参与</h4>\n<pre><code> // 第一种 for循环 arr.fori\n      \n        for (int i = 0; i &lt; arr.size(); i++) &#123;\n            System.out.println(arr.get(i));\n        &#125;\n</code></pre>\n<h4 id=\"for-循环代码只需要元素-不需要下标\"><a class=\"anchor\" href=\"#for-循环代码只需要元素-不需要下标\">#</a> for --&gt; 循环代码只需要元素 不需要下标</h4>\n<pre><code> // 第二种 foreach 循环  arr.for\n\n        // 内部的 o1 就相当于 arr.get(i)  方法替我们实现 直接使用o1就行\n        for (Object o1 : arr) &#123;\n\n        &#125;\n</code></pre>\n<h4 id=\"迭代器-需要在遍历期间更改list的长度\"><a class=\"anchor\" href=\"#迭代器-需要在遍历期间更改list的长度\">#</a> 迭代器  --&gt; 需要在遍历期间更改 List 的长度</h4>\n<pre><code>// 第三种 使用迭代器遍历List\n        // 前两种在遍历过程中不能对数组元素做增删操作!!!\n\n        // step1 获取容器的迭代器对象\n        Iterator it = arr.iterator();\n\n        // 返回布尔值 标示&quot;之后还有没有值&quot;\n        // boolean b = it.hasNext();\n        // step2 判断迭代器中还有没有元素\n        while (it.hasNext())&#123;\n            // step3 获取下一个元素\n            Object obj = it.next();\n            if (&quot;李四&quot;.equals(obj))&#123;\n                it.remove();\n            &#125;\n       &#125; \n</code></pre>\n<h2 id=\"set\"><a class=\"anchor\" href=\"#set\">#</a> Set</h2>\n<blockquote>\n<p>特点 :</p>\n<ol>\n<li>元素无序</li>\n<li>元素<strong>不能重复 (可以去重)</strong><br />\n 继承自 collection</li>\n</ol>\n</blockquote>\n<h4 id=\"list遍历两种方法\"><a class=\"anchor\" href=\"#list遍历两种方法\">#</a> List 遍历 (两种方法)</h4>\n<h4 id=\"for-循环代码只需要元素-不需要下标-2\"><a class=\"anchor\" href=\"#for-循环代码只需要元素-不需要下标-2\">#</a> for --&gt; 循环代码只需要元素 不需要下标</h4>\n<pre><code>  for (Object o1 : set) &#123;\n\n        &#125;\n</code></pre>\n<h4 id=\"迭代器-需要在遍历期间更改list的长度-2\"><a class=\"anchor\" href=\"#迭代器-需要在遍历期间更改list的长度-2\">#</a> 迭代器  --&gt; 需要在遍历期间更改 List 的长度</h4>\n<pre><code>Iterator itset = set.iterator();\n        while (itset.hasNext())&#123;\n            System.out.println(itset.next());\n        &#125;\n</code></pre>\n<h2 id=\"map\"><a class=\"anchor\" href=\"#map\">#</a> Map</h2>\n<blockquote>\n<p>Map -- <strong>不是继承自 collection</strong><br />\n1. 只能存储对象<br />\n 2. 长度可变<br />\n 3. 可以存储不同类型的对象</p>\n</blockquote>\n<pre><code>\t\t// List 更倾向存储相同 类型&amp;&amp;作用的数据 -- 直接遍历做集中处理即可\n        // Map  更倾向存储不同 类型&amp;&amp;作用的数据\n        // 当数据类型复杂多变,但是又要集中处理的情况, 就可以使用MAp\n        // 如果数据类型是固定的, 那么可以使用类来替代Map\n</code></pre>\n<h4 id=\"map独有特点\"><a class=\"anchor\" href=\"#map独有特点\">#</a> Map 独有特点:</h4>\n<blockquote></blockquote>\n<ol>\n<li>无序</li>\n<li>以<strong>键值对</strong> (key-value) 的方式存储数据</li>\n<li><strong>key 不能重复</strong>，一个 key 只对应一个 value  (kay 又被称为映射) y=f (x)</li>\n</ol>\n<h3 id=\"map方法\"><a class=\"anchor\" href=\"#map方法\">#</a> Map 方法</h3>\n<h4 id=\"putkeyvalue-存储键值对\"><a class=\"anchor\" href=\"#putkeyvalue-存储键值对\">#</a> .put (key,value) 存储键值对</h4>\n<pre><code> Map map = new HashMap();\n        map.put(&quot;name&quot;,&quot;张三&quot;);\n        map.put(&quot;age&quot;,14);\n        \n        // !!!key 值相同(name) \n        //    --&gt; 张三会被覆盖为李四\n        map.put(&quot;name&quot;,&quot;李四&quot;);\n</code></pre>\n<h4 id=\"getkey-获取值\"><a class=\"anchor\" href=\"#getkey-获取值\">#</a> .get (key)  获取值</h4>\n<pre><code> map.get(&quot;name&quot;);\n</code></pre>\n<h4 id=\"removekey-移除值删除键值对\"><a class=\"anchor\" href=\"#removekey-移除值删除键值对\">#</a> .remove (key)  移除值 (删除键值对)</h4>\n<pre><code> map.remove(&quot;name&quot;);\n</code></pre>\n<h4 id=\"containskeykey-判断是否包含key\"><a class=\"anchor\" href=\"#containskeykey-判断是否包含key\">#</a> .containsKey (key)  判断是否包含 key</h4>\n<pre><code> map.containsKey(&quot;name&quot;);\n</code></pre>\n<h4 id=\"containsvaluevalue-判断是否包含值\"><a class=\"anchor\" href=\"#containsvaluevalue-判断是否包含值\">#</a> .containsValue (value)   判断是否包含值</h4>\n<pre><code> map.containsValue(&quot;李四&quot;);\n</code></pre>\n<h4 id=\"size-map的大小一个键值对算一条数据\"><a class=\"anchor\" href=\"#size-map的大小一个键值对算一条数据\">#</a> .size ()  map 的大小 (一个键值对算一条数据)</h4>\n<pre><code> map.size();\n</code></pre>\n<h4 id=\"isempty-判断是否大小为0-返回值为boolean\"><a class=\"anchor\" href=\"#isempty-判断是否大小为0-返回值为boolean\">#</a> .isEmpty ( )   判断是否大小为 0 -- 返回值为 Boolean</h4>\n<pre><code> map.isEmpty();\n</code></pre>\n<h4 id=\"clear-清空map删除所有值\"><a class=\"anchor\" href=\"#clear-清空map删除所有值\">#</a> .clear ()   清空 Map (删除所有值)</h4>\n<pre><code> map.clear();\n</code></pre>\n<h3 id=\"遍历\"><a class=\"anchor\" href=\"#遍历\">#</a> 遍历</h3>\n<blockquote>\n<p>map 的遍历很少用到 (遍历目的是对数据做集中处理)<br />\n// 1. 只要有 key, 一定会获得 value<br />\n//    --&gt; 无 key 输出 null<br />\n// 2. map 是无序的 (无法使用 fori)<br />\n// 3. <strong>map 和迭代器没有关系</strong> (迭代器只针对 collection 接口)</p>\n</blockquote>\n<h4 id=\"遍历方法1\"><a class=\"anchor\" href=\"#遍历方法1\">#</a> 遍历方法 1:</h4>\n<pre><code>        // 获取所有的key 遍历所有的key获取value 放入set\n\n        // 拿到所有的key -- 放入set中(?: set 和 key都是不能重复的)\n        Set set = map.keySet();\n        for (Object key : set) &#123;\n            Object v = map.get(key);\n            System.out.println(key + &quot;的值是&quot; + v);\n        &#125;\n</code></pre>\n<h4 id=\"方法2\"><a class=\"anchor\" href=\"#方法2\">#</a> 方法 2:</h4>\n<pre><code>        // 在Map里面 每一个键值对都是一个entry对象\n        // 容量很大,不确定 的时候适合用\n        // 不许记忆... 很少用\n        Set entrySet = map.entrySet();\n        for (Object entry : entrySet) &#123;\n            Map.Entry e = (Map.Entry) entry;\n            Object key = e.getKey();\n            Object value = e.getValue();\n            System.out.println(key+&quot;的值是:&quot;+value);\n        &#125;\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/hou-duan/java/jdbc/",
            "url": "http://adamshang2333.github.io/hou-duan/java/jdbc/",
            "title": "JDBC",
            "date_published": "2023-03-12T11:31:04.263Z",
            "content_html": "<blockquote>\n<p>全称: Java DataBase Connectivity<br />\n 是 java 语言中，用来规范客户端程序如何来访问数据库的 API (应用程序接口)</p>\n</blockquote>\n<p><code>!!JDBC比框架的效率高</code></p>\n<h2 id=\"准备工具\"><a class=\"anchor\" href=\"#准备工具\">#</a> 准备工具</h2>\n<p>JDBC 需要导入 jar 包  ---&gt;  mysql-connector-java-5.1.47.jar</p>\n<h2 id=\"操作步骤-增删改\"><a class=\"anchor\" href=\"#操作步骤-增删改\">#</a> 操作步骤 -- 增，删，改</h2>\n<blockquote>\n<p>以下将一个完整的 JDBC<strong> 添加</strong>过程拆解成若干步骤</p>\n</blockquote>\n<h3 id=\"1准备数据库账户及链接地址\"><a class=\"anchor\" href=\"#1准备数据库账户及链接地址\">#</a> 1. 准备数据库账户及链接地址</h3>\n<pre><code> public void jdbc() &#123;\n\t// 添加 ?useSSL=false (false或者true都可以 ,目的是取消控制台的报红--&gt;规定是否使用SSL)\n\t// 设置成静态的类属性,不用实例化一个对象就能使用\n\tprivate static final String URL = &quot;jdbc:mysql://localhost:3306/db0503?useSSL=false&quot;;\n    private static final String DRIVER = &quot;com.mysql.jdbc.Driver&quot;;\n    private static final String USERNAME = &quot;root&quot;;\n    private static final String PASSWORD = &quot;123456&quot;;\n</code></pre>\n<h3 id=\"2加载驱动\"><a class=\"anchor\" href=\"#2加载驱动\">#</a> 2. 加载驱动</h3>\n<pre><code>      Connection conn = null;\n      PreparedStatement stmt = null;\n      try &#123;\n            // Class: jar包中封装好的类\n            Class.forName(DRIVER);\n</code></pre>\n<h3 id=\"3建立数据库链接\"><a class=\"anchor\" href=\"#3建立数据库链接\">#</a> 3. 建立数据库链接</h3>\n<pre><code> \tconn = DriverManager.getConnection(URL, USERNAME, PASSWORD);\n</code></pre>\n<h3 id=\"4准备sql语句\"><a class=\"anchor\" href=\"#4准备sql语句\">#</a> 4. 准备 SQL 语句</h3>\n<blockquote>\n<p>准备 SQL 语句的时候，注意防止 SQL 语句注入<br />\n SQL 注入 :   ---&gt; 强行进行账户的免密登录等<br />\n利用字符串的拼接，将传入的字符串改为 SQL 语句<br />\n以达到能够强行更改 SQL 的操作；结束 SQL 后面的语句执行</p>\n</blockquote>\n<pre><code>stmt = conn.prepareStatement(&quot;insert into student(name, age, gender) values (?,?,?)&quot;); \n\t// 使用这种方式向sql中填值\n\t// 不论这个数据有多复杂, 都会被安全填入数据库(将特殊符号等转义掉) \n\t// 1,2,3对应第1个name 第2个age 第3个gender\n \t   stmt.setString(1, &quot;大光&quot;);\n       stmt.setInt(2, 30);\n       stmt.setString(3, &quot;男&quot;);\n</code></pre>\n<blockquote>\n<p>对于增删改，不需要像查询一样创建结果集将结果返回获取<br />\n只是在准备 SQL 语句的时候有不同<br />\n实际的数据库操作中，基本不会涉及到数据库中数据的删除</p>\n</blockquote>\n<p><code>改的SQL语句示例:</code></p>\n<pre><code> stmt = conn.prepareStatement(&quot;update student set age=? ,gender=?,name=? where name=?&quot;);\n            stmt.setInt(1,38);\n            stmt.setString(2,&quot;女&quot;);\n            stmt.setString(3,&quot;大刚&quot;);\n            stmt.setString(4,&quot;宋浩&quot;);\n</code></pre>\n<h3 id=\"5执行sql语句\"><a class=\"anchor\" href=\"#5执行sql语句\">#</a> 5. 执行 SQL 语句</h3>\n<blockquote>\n<p>返回一个 int 值；<br />\n 代表了该语句影响了几行数据 (0 表示未对表做任何改动)</p>\n</blockquote>\n<pre><code>  int i = stmt.executeUpdate();\n   &#125; catch (ClassNotFoundException e) &#123;\n            e.printStackTrace();\n        &#125; catch (SQLException e) &#123;\n            e.printStackTrace();\n</code></pre>\n<h3 id=\"6关闭数据库链接\"><a class=\"anchor\" href=\"#6关闭数据库链接\">#</a> 6. 关闭数据库链接</h3>\n<blockquote>\n<p>关闭链接，准备的 SQL 语句才会开始执行</p>\n</blockquote>\n<pre><code> &#125; catch (ClassNotFoundException e) &#123;\n            e.printStackTrace();\n        &#125; catch (SQLException e) &#123;\n            e.printStackTrace();\n        &#125; finally &#123;\n        // 注意: 必须放入finally中,确保一定会关掉\n            try &#123;\n                if (stmt != null) &#123;\n                // 关闭准备语句\n                    stmt.close();\n                &#125;\n            &#125; catch (SQLException e) &#123;\n                e.printStackTrace();\n            &#125;\n            try &#123;\n                if (conn != null) &#123;\n                // 关闭数据库链接\n                    conn.close();\n                &#125;\n            &#125; catch (SQLException e) &#123;\n                e.printStackTrace();\n            &#125;\n\n</code></pre>\n<h2 id=\"操作步骤-查\"><a class=\"anchor\" href=\"#操作步骤-查\">#</a> 操作步骤 -- 查</h2>\n<blockquote>\n<p>数据的查询操作，前期的账户准备和链接建立都一样，<br />\n 主要的不同在于:<br />\n 需要在查询后<strong>创建一个 JDBC 结果集 (.executeQuery ()</strong>);<br />\n 在准备阶段也要 ** 创建一个结果接收容器 (List)** 用于接收结果集中的数据</p>\n</blockquote>\n<h3 id=\"1接收容器声明\"><a class=\"anchor\" href=\"#1接收容器声明\">#</a> 1. 接收容器声明</h3>\n<pre><code> List&lt;Student&gt; studentList =new ArrayList&lt;&gt;();\n\n</code></pre>\n<h3 id=\"2建立链接查询语句准备结果集准备\"><a class=\"anchor\" href=\"#2建立链接查询语句准备结果集准备\">#</a> 2. 建立链接，查询语句准备，结果集准备</h3>\n<pre><code>\t\t// 声明 链接\n\t\tConnection coon=null;\n\t\t// 声明 准备语句\n        PreparedStatement stmt=null;\n        // 声明 结果集 \n        ResultSet rs=null;\n         try &#123;\n            // 加载驱动 \n            Class.forName(DRIVER);\n            coon = DriverManager.getConnection(URL, USERNAME, PASSWORD);\n            stmt = coon.prepareStatement(&quot;select * from student where age &gt; ?&quot;);\n            stmt.setInt(1,15);\n</code></pre>\n<h3 id=\"3查询-将结果集中的数据遍历添加到接受容器\"><a class=\"anchor\" href=\"#3查询-将结果集中的数据遍历添加到接受容器\">#</a> 3. 查询，将结果集中的数据遍历添加到接受容器</h3>\n<pre><code> \t\trs = stmt.executeQuery();\n \t\t            // 对结果集进行遍历 .next方法\n \t\t            // --&gt; 类似 迭代器的.hasNext (确认是否还有值,返回布尔值)\n             while ( rs.next())&#123;\n                 // 按列名取值\n                 int sid = rs.getInt(&quot;sid&quot;);\n                 String name = rs.getString(&quot;name&quot;);\n                 // 也可以按照列的序号取值\n                 int age = rs.getInt(3);\n                 String gender = rs.getString(4);\n                 System.out.println(sid +&quot;:&quot;+name+&quot;年龄:&quot;+age+&quot;性别:&quot;+gender);\n\n                 // 每次循环都创建一个新的student对象\n                 Student stu = new Student();\n                 stu.setSid(sid);\n                 stu.setAge(age);\n                 stu.setName(name);\n                 stu.setGender(gender);\n\n                 // 将创建出来的学生对象添加到接受容器(list)中\n                 studentList.add(stu);\n             &#125;\n</code></pre>\n<h3 id=\"4关闭链接注意结果集也要关闭\"><a class=\"anchor\" href=\"#4关闭链接注意结果集也要关闭\">#</a> 4. 关闭链接 (<span class=\"spoiler\" title=\"你知道得太多了\">注意结果集也要关闭</span>！)</h3>\n<blockquote>\n<p>关闭：链接；准备语句；结果集<br />\n关闭顺序：后开的先关；先开的后关</p>\n</blockquote>\n<pre><code>finally &#123;\n            try &#123;\n                if (rs != null) &#123;\n                  // 关闭结果集\n                    rs.close();\n                &#125;\n            &#125; catch (SQLException e) &#123;\n                e.printStackTrace();\n            &#125;\n\n            try &#123;\n                if (stmt != null) &#123;\n                  // 关闭SQL语句 \n                    stmt.close();\n                &#125;\n            &#125; catch (SQLException e) &#123;\n                e.printStackTrace();\n            &#125;\n            try &#123;\n                if (coon != null) &#123;\n                // 关闭数据库链接\n                    coon.close();\n                &#125;\n            &#125; catch (SQLException e) &#123;\n                e.printStackTrace();\n            &#125;\n</code></pre>\n<h2 id=\"jdbc优化-代码封装\"><a class=\"anchor\" href=\"#jdbc优化-代码封装\">#</a> JDBC 优化 -- 代码封装</h2>\n<blockquote>\n<p>上述的 JDBC 操作有很多的重复地方，<br />\n 可以使用封装来提升代码的复用性<br />\n例如:</p>\n<ol>\n<li>每次的建立链接和关闭代码都是固定的</li>\n<li>对于增，删，改而言，最大的不同就是准备的 SQL 语句有所不同</li>\n<li>查询的语句虽然不同，<br />\n　但是遍历结果集，传入接收容器的过程都是一样的</li>\n</ol>\n</blockquote>\n<h3 id=\"准备工作\"><a class=\"anchor\" href=\"#准备工作\">#</a> 准备工作</h3>\n<pre><code>public class DBUtil &#123;\n    private static final String DRIVE = &quot;com.mysql.jdbc.Driver&quot;;\n    private static final String URL = &quot;jdbc:mysql://localhost:3306/db0503?useSSL=true&quot;;\n    private static final String USER = &quot;root&quot;;\n    private static final String PASSWORD = &quot;123456&quot;;\n</code></pre>\n<h3 id=\"封装-建立链接\"><a class=\"anchor\" href=\"#封装-建立链接\">#</a> 封装 -- 建立链接</h3>\n<blockquote>\n<p>建立连接这种纯粹的功能实现，不需要创建对象<br />\n使用静态方法比较好；对象在有存储不同值的场景使用更好</p>\n</blockquote>\n<p><code>!!!对于有异常处理的情况, 如果有返回值,**注意在try里面和外面都要写return!!!**</code></p>\n<pre><code>// 返回Connection , 在其他的方法中关闭时使用\npublic static Connection getConnection() &#123;\n        Connection conn=null;\n        try &#123;\n            Class.forName(DRIVE);\n            conn = DriverManager.getConnection(URL, USER, PASSWORD);\n\t\t    // 返回链接 --确保无论如何都会返回\n            return conn;\n        &#125; catch (SQLException | ClassNotFoundException e) &#123;\n            e.printStackTrace();\n        &#125;\n        // 返回链接 --确保无论如何都会返回\n        return conn;\n    &#125;\n</code></pre>\n<h3 id=\"封装-关闭链接\"><a class=\"anchor\" href=\"#封装-关闭链接\">#</a> 封装 -- 关闭链接</h3>\n<blockquote>\n<p>关闭链接时，要考虑是否有查询的情况:<br />\n 如果有查询，则亦需要关闭开启的结果集<br />\n　－－＞通过 <strong>重载</strong> 来实现方法的适应性</p>\n</blockquote>\n<pre><code>\n public static void closeAll(Connection conn, PreparedStatement preStmt) &#123;\n        try &#123;\n            if (preStmt != null) &#123;\n                preStmt.close();\n            &#125;\n        &#125; catch (SQLException e) &#123;\n            e.printStackTrace();\n        &#125;\n        try &#123;\n            if (conn != null) &#123;\n                conn.close();\n            &#125;\n        &#125; catch (SQLException e) &#123;\n            e.printStackTrace();\n        &#125;\n\n    &#125;\n    \n    \n     /**\n     * 适用于数据库查询的连接关闭方法\n     * @param conn    jdbc连接对象\n     * @param preStmt jdbcSQL语句处理对象\n     * @param rs      jdbc查询结果集对象\n     */\n    // 重载 适用于查询中调用\n    public static void closeAll(Connection conn, PreparedStatement preStmt, ResultSet rs) &#123;\n        try &#123;\n      \t  // 关闭额外开启的结果集\n            rs.close();\n        &#125; catch (SQLException e) &#123;\n            e.printStackTrace();\n        &#125;\n        // 在重载中调用同名的两个参数的方法\n        closeAll(conn, preStmt);\n    &#125;\n</code></pre>\n<h3 id=\"封装-数据库查询\"><a class=\"anchor\" href=\"#封装-数据库查询\">#</a> 封装 -- 数据库查询</h3>\n<blockquote>\n<p>数据库的查询封装，需要考虑到 SQL 语句的适应性:<br />\nSQL 语句的查询条件需要的<strong>传入参数 长度和类型都不确定</strong><br />\n　－－＞解决：使用 <strong>Object... a</strong> 不定长参数 (系统自带)<br />\n 不定长参数写法:<br />\n 在参数列表中的最后一个位置，<br />\n 以<strong>类型... 参数名</strong> (三个 &quot;.&quot; , 且与参数名之间<strong>有空格</strong>)<br />\n 在方法中以数组的形式存在</p>\n</blockquote>\n<pre><code>public static int updateSQL(String sql, Object... a) &#123;\n        Connection conn = null;\n        PreparedStatement preStmt = null;\n        try &#123;\n            conn = getConnection();\n            preStmt = conn.prepareStatement(sql);\n//            preStmt.setString(1, &quot;娃哦ED&quot;);\n//            preStmt.setInt(2, 18);\n//            preStmt.setString(3, &quot;男&quot;);\n            //\n            // 优化: 利用不定长参数 遍历参数a的数组\n            for (int i = 0; i &lt; a.length; i++) &#123;\n                Object o = a[i];\n                preStmt.setObject(i + 1, o);\n            &#125;\n\n            int result = preStmt.executeUpdate();\n            return result;\n        &#125; catch (SQLException e) &#123;\n            e.printStackTrace();\n        &#125; finally &#123;\n            DBUtil.closeAll(conn, preStmt);\n        &#125;\n        // 如果未执行try内代码 则执行return 0\n        return 0;\n    &#125;\n</code></pre>\n<h2 id=\"commons-dbutils\"><a class=\"anchor\" href=\"#commons-dbutils\">#</a> Commons-DButils</h2>\n<blockquote>\n<p>阿帕奇组织专门封装的 JDBC 工具</p>\n</blockquote>\n<p>订单<sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup></p>\n<hr class=\"footnotes-sep\" />\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>这里是说明的开始，顾城，童话诗人，以及坏掉了的人。 <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/qian-duan/js-h5/ding-wei/",
            "url": "http://adamshang2333.github.io/qian-duan/js-h5/ding-wei/",
            "title": "CSS-定位",
            "date_published": "2023-03-12T11:31:03.823Z",
            "content_html": "<h2 id=\"定位\"><a class=\"anchor\" href=\"#定位\">#</a> 定位</h2>\n<blockquote>\n<p>定位的使用包含两个部分：</p>\n</blockquote>\n<ol>\n<li>定位的方式</li>\n<li>偏移值  left,right,top,bottom</li>\n</ol>\n<p><strong>偏移值准确的理解是 “距离什么位置有多大” 如 top:100px; 距离顶部为 100 像素 （向下走）</strong></p>\n<h3 id=\"静态定位\"><a class=\"anchor\" href=\"#静态定位\">#</a> 静态定位</h3>\n<blockquote>\n<p>所有的标准流都是静态定位</p>\n</blockquote>\n<pre><code>position:static;\n</code></pre>\n<ul>\n<li>一般用于将某些已经定位的元素还原成标准流，用的很少</li>\n<li>偏移值对于静态定位来说不起作用，我们以后说的元素定位不包括静态定位</li>\n</ul>\n<h3 id=\"相对定位\"><a class=\"anchor\" href=\"#相对定位\">#</a> 相对定位</h3>\n<blockquote>\n<p>相对定位是相对自己的标准流的位置进行定位移动</p>\n</blockquote>\n<pre><code>position:relative;\n</code></pre>\n<p>特性：</p>\n<pre><code>1. 移动的出发点是自身标准流的位置\n2. 相对定位移动的元素不会对别的元素产生干扰，“没有脱标”，\n   真正占得位置还是标准流的位置（肉体不在 灵魂永驻）\n3. 可以盖在其他标准流的上方\n4. 一般用于微调元素和配合绝对定位来实现效果\n</code></pre>\n<h3 id=\"绝对定位\"><a class=\"anchor\" href=\"#绝对定位\">#</a> 绝对定位</h3>\n<pre><code>position:absolute;\n</code></pre>\n<p>特性：</p>\n<pre><code>1.移动的出发点：\n\t从绝对元素开始一直往上级找（直到找到最大的html标签），\n\t在这个过程中，只要有一个元素（A元素）是定位（相对，绝对，固定）的任何一个，\n\t这个绝对定位的元素就会参照这个A元素进行定位，并且不会在往上找了，\n\t如果一个都没有，最终会以html元素定位\n\n2.脱标\n\t1.1. 脱标的元素不占标准流的位置\n\t1.2. 不会继承父级的宽度，内容有多大就撑多大 （不论块级还是行内）\n\t1.3. 可以直接写宽高 （不论块级还是行内）\n\t1.4. margin:auto对于脱标元素不起作用\n</code></pre>\n<p>巧妙运用：让一个定位盒子水平垂直居中</p>\n<pre><code>left: 50%;\ntop: 50%;\nmargin-left:-自身宽度的一半;\nmargin-top:-自身高度的一半;\n</code></pre>\n<p>使用方式：</p>\n<pre><code>在工作中，绝对定位&quot;大多&quot;配合相对定位一起使用（父相子绝） \n父相：在标准流上占有位置\n子绝：针对这个标准流在去移动\n\n注意：父绝子绝的情况也有，只是很少，不要完全形成思维定式。\n</code></pre>\n<h3 id=\"固定定位\"><a class=\"anchor\" href=\"#固定定位\">#</a> 固定定位</h3>\n<pre><code>position: fixed;\n</code></pre>\n<p>特性：</p>\n<pre><code>1.脱标\n\t1.1.脱标的元素不占标准流的位置\n\t1.2.不会继承父级的的宽度，内容有多个就撑多大 （不论块级还是行内）\n\t1.3.可以直接写宽高 （不论块级还是行内）\n\t1.4.margin:auto对于脱标元素不起作用\n2.移动的出发点：浏览器窗口 （直接表现：滚动条对于固定元素没有作用）\n</code></pre>\n<h3 id=\"四种定位总结\"><a class=\"anchor\" href=\"#四种定位总结\">#</a> 四种定位总结</h3>\n<table>\n<thead>\n<tr>\n<th>定位模式</th>\n<th>是否脱标占有位置</th>\n<th>是否可以使用边偏移</th>\n<th>移动位置基准</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>静态 static</td>\n<td>不脱标，正常模式</td>\n<td>不可以</td>\n<td>正常模式</td>\n</tr>\n<tr>\n<td>相对定位 relative</td>\n<td>不脱标，占有位置</td>\n<td>可以</td>\n<td>相对自身位置移动</td>\n</tr>\n<tr>\n<td>绝对定位 absolute</td>\n<td>完全脱标，不占有位置</td>\n<td>可以</td>\n<td>相对于定位的父级移动位置</td>\n</tr>\n<tr>\n<td>固定定位 fixed</td>\n<td>完全脱标，不占有位置</td>\n<td>可以</td>\n<td>相对于浏览器移动位置</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"z-index\"><a class=\"anchor\" href=\"#z-index\">#</a> z-index</h2>\n<blockquote>\n<p>控制 “定位” 元素的叠放层级</p>\n</blockquote>\n<ol>\n<li>z-index 只针对定位元素有效果</li>\n<li>z-index 值越大，层级越高</li>\n</ol>\n<p>思考：上大盒子压住下大盒子 下大盒子里面的子元素压住上盒子</p>\n<ol start=\"3\">\n<li>如果父元素已经比较过层级了（父元素 “都有” z-index 的时候，并且值不为 auto），那么子元素与子元素之间是不会再去比较的</li>\n</ol>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/qian-duan/js-h5/js-ji-chu/",
            "url": "http://adamshang2333.github.io/qian-duan/js-h5/js-ji-chu/",
            "title": "JS总结",
            "date_published": "2023-03-12T11:31:03.811Z",
            "content_html": "<p>[toc]</p>\n<h2 id=\"js组成部分\"><a class=\"anchor\" href=\"#js组成部分\">#</a> jS 组成部分</h2>\n<p>EMAScript: ES5  ES6  基础语法和标准<br />\n DOM : 文档元素进行操作<br />\n BOM : 对浏览器进行操作 browser</p>\n<h2 id=\"变量\"><a class=\"anchor\" href=\"#变量\">#</a> 变量</h2>\n<h3 id=\"命名规范\"><a class=\"anchor\" href=\"#命名规范\">#</a> 命名规范</h3>\n<blockquote>\n<ol>\n<li>以数字 字母 下划线 $ 组成，不能以数字开头！！！</li>\n<li>见名知意</li>\n<li>以驼峰结构命名 personName</li>\n<li>不能使用系统关键字 (var body 等)</li>\n</ol>\n</blockquote>\n<h3 id=\"数据类型\"><a class=\"anchor\" href=\"#数据类型\">#</a> 数据类型</h3>\n<blockquote>\n<p>var a = 100<br />\nalert (typeof (a) )   //alert 提示框  typeof () 获取类型</p>\n</blockquote>\n<h4 id=\"number-数字类型\"><a class=\"anchor\" href=\"#number-数字类型\">#</a> number (数字类型)</h4>\n<blockquote>\n<p>JS 中没有浮点型，都是 number 类型 (弱类型语言)</p>\n</blockquote>\n<h4 id=\"string-字符串类型\"><a class=\"anchor\" href=\"#string-字符串类型\">#</a> string (字符串类型)</h4>\n<blockquote>\n<p>字符串赋值时使用 &quot;&quot; 包裹内容<br />\n字符串可以进行拼接 (使用 + 号)<br />\n 数值和字符进行拼接时，发生隐式类型转换 (数值 --&gt; 字符串；布尔值 --&gt; 0/1)<br />\n<strong> 注意！！从左到右的顺序 会影响拼接效果</strong><br />\n &quot;3&quot; + 4 + 5  ---&gt; &quot;345&quot; ; 3 + 4 + &quot;5&quot; ---&gt; &quot;75&quot;</p>\n</blockquote>\n<h4 id=\"booleanbool-布尔值\"><a class=\"anchor\" href=\"#booleanbool-布尔值\">#</a> boolean (bool) 布尔值</h4>\n<blockquote>\n<p>只有 true (1) , false (0) 两种<br />\n用作逻辑判断 (if 判断中，亦可遵循 &quot;非 0 即为真&quot;)</p>\n</blockquote>\n<h4 id=\"undefined\"><a class=\"anchor\" href=\"#undefined\">#</a> undefined</h4>\n<blockquote>\n<p>变量定义但未初始化赋值时返回 (空的变量)<br />\n console 数值为 NaN<br />\ntypeof 为 undefined</p>\n</blockquote>\n<h4 id=\"null\"><a class=\"anchor\" href=\"#null\">#</a> null</h4>\n<blockquote>\n<p>访问一个尚未存在的对象时所返回的值 (空的对象)<br />\n console 数值为 0   (表示空指针对象)<br />\n typeof 为 object</p>\n</blockquote>\n<h2 id=\"运算符\"><a class=\"anchor\" href=\"#运算符\">#</a> 运算符</h2>\n<h3 id=\"逻辑运算符\"><a class=\"anchor\" href=\"#逻辑运算符\">#</a> 逻辑运算符</h3>\n<h4 id=\"与\"><a class=\"anchor\" href=\"#与\">#</a> &amp;&amp; (与)</h4>\n<blockquote>\n<p>可以有三个及以上的变量<br />\n X &amp;&amp; Y &amp;&amp; Z</p>\n</blockquote>\n<h4 id=\"或\"><a class=\"anchor\" href=\"#或\">#</a> || (或)</h4>\n<blockquote>\n<p>可以有三个及以上的变量</p>\n</blockquote>\n<h4 id=\"非-一元运算符\"><a class=\"anchor\" href=\"#非-一元运算符\">#</a> ! (非，一元运算符)</h4>\n<blockquote>\n<p>经常用来取反<br />\n取反 (=!) 注意与不等 (!=) 区分</p>\n</blockquote>\n<h3 id=\"算数运算符\"><a class=\"anchor\" href=\"#算数运算符\">#</a> 算数运算符</h3>\n<h4 id=\"取余\"><a class=\"anchor\" href=\"#取余\">#</a> % (取余)</h4>\n<blockquote>\n<p>取余常用来判断奇偶，提取数字各个位的值 (与 parseInt ()--&gt; 取整 结合使用)</p>\n</blockquote>\n<pre><code>\t//提取百位的值\n   var fir = parseInt(d / 100); \n   //提取十位的值 (亦可在提取百位后,减去百位)\n   var sec = parseInt(d / 10)%10;\n   //提取个位的值\n   var thr = d % 10\n</code></pre>\n<h4 id=\"-自加自减\"><a class=\"anchor\" href=\"#-自加自减\">#</a> ++/-- (自加 / 自减)</h4>\n<blockquote>\n<p>n++ 和 ++n 都是自身值加一 区别在于返回值 (赋值)</p>\n</blockquote>\n<pre><code>\t\tvar n = 3;\n        var x = n++;// 先返回(赋值) , 再自加\n        var y = ++n;//先自加 , 再返回(赋值)\n        console.log(x,n);//输出 x = 3  n = 4\n        console.log(y,n);//输出 y = 4  n = 4\n</code></pre>\n<h4 id=\"-加-减-乘-除\"><a class=\"anchor\" href=\"#-加-减-乘-除\">#</a> + - * / (加 减 乘 除)</h4>\n<blockquote>\n<p>注意有简写: +=  -=  *=  /= %=<br />\ni += 2  等价于 i = i + 2</p>\n</blockquote>\n<h3 id=\"比较运算符\"><a class=\"anchor\" href=\"#比较运算符\">#</a> 比较运算符</h3>\n<h4 id=\"不等式\"><a class=\"anchor\" href=\"#不等式\">#</a> 不等式 &lt;&lt;=&gt; &gt;= !=</h4>\n<h4 id=\"等式-数值相等即为相等-严格相等类型也要相等\"><a class=\"anchor\" href=\"#等式-数值相等即为相等-严格相等类型也要相等\">#</a> 等式  == --&gt; 数值相等即为相等  === --&gt; 严格相等 (类型也要相等)</h4>\n<pre><code>\t\tvar z = &quot;10&quot; == 10;//值相等即为相等\n        console.log(z);//true  自动类型转换 将数字转换为字符串\n\n        var m = &quot;10&quot; === 10;//值和类型完全相等才行\n        console.log(m);//false\n</code></pre>\n<h4 id=\"三目运算符\"><a class=\"anchor\" href=\"#三目运算符\">#</a> 三目运算符</h4>\n<blockquote>\n<p>var  x  = 判断条件？成立时执行语句：不成立执行语句</p>\n</blockquote>\n<pre><code>var c = a &gt; b ? a : b;// &quot;?&quot;条件成立 返回 a 值给 c; 不成立 返回 b 值给 c\n\n//冒号前后可使用表达式 数值 字符串等各种内容\nvar d = a &gt; b &amp;&amp; a &gt; 0 ? a + b : a - b;\n</code></pre>\n<h2 id=\"分支结构\"><a class=\"anchor\" href=\"#分支结构\">#</a> 分支结构</h2>\n<h3 id=\"if\"><a class=\"anchor\" href=\"#if\">#</a> if ...</h3>\n<h3 id=\"if-else\"><a class=\"anchor\" href=\"#if-else\">#</a> if ... else ...</h3>\n<h3 id=\"if-else-if-else-if-else\"><a class=\"anchor\" href=\"#if-else-if-else-if-else\">#</a> if ... else if...  else if ... else</h3>\n<h3 id=\"switch-case-break-case-break-default-break\"><a class=\"anchor\" href=\"#switch-case-break-case-break-default-break\">#</a> switch ... case break ...  case break ... default break</h3>\n<h2 id=\"元素获取-操作\"><a class=\"anchor\" href=\"#元素获取-操作\">#</a> 元素获取 操作</h2>\n<blockquote>\n<p>只有对 class 进行属性赋值的时候，注意为 className 不是 class<br />\n 更改样式属性时，生成行间样式<br />\n innerHTML 是一种属性<br />\n document.write () 是一种方法</p>\n</blockquote>\n<pre><code>  var oName = document.getElementById(&quot;name&quot;);\n  oName.style.backgroundColor = &quot;red&quot;;\n  oName.className = &quot;name&quot;\n  \n  //获取或设置的标签里面的内容 -- 内容指标签内的所有子标签及文本\n  //常用作 设置文本 \n  var str = oName.innerHTML;\n  oName.innerHTML = &quot;西红柿牛腩&quot;;\n  \n  //清空标签内的内容\n  oName.innerHTML = &quot;&quot;;\n  \n  document.write(&quot;&lt;div class= 'name' &gt;哈哈哈哈哈&lt;/div&gt;&quot;);\n  document.write(&quot;&lt;div class= \\&quot;name\\&quot; &gt;哈哈哈哈&lt;/div&gt;&quot;);\n\n</code></pre>\n<h2 id=\"循环\"><a class=\"anchor\" href=\"#循环\">#</a> 循环</h2>\n<h3 id=\"for-循环\"><a class=\"anchor\" href=\"#for-循环\">#</a> for 循环</h3>\n<h3 id=\"while-循环\"><a class=\"anchor\" href=\"#while-循环\">#</a> while 循环</h3>\n<h3 id=\"循环结束\"><a class=\"anchor\" href=\"#循环结束\">#</a> 循环结束</h3>\n<h4 id=\"break\"><a class=\"anchor\" href=\"#break\">#</a> break</h4>\n<blockquote>\n<p>完全跳出循环，循环结束</p>\n</blockquote>\n<h4 id=\"continue\"><a class=\"anchor\" href=\"#continue\">#</a> continue</h4>\n<blockquote>\n<p>结束本次循环，循环继续</p>\n</blockquote>\n<h2 id=\"math方法\"><a class=\"anchor\" href=\"#math方法\">#</a> Math 方法</h2>\n<pre><code> \t    // 1. π\n        console.log(Math.PI);\n\n        // 2. max\n        var max = Math.max(32,545,65,24,-3534);\n        console.log(max);\n\n        // 3. min \n        var min = Math.min(32,545,65,24,-3534);\n        console.log(min);\n\n        // 4.向上取整\n        console.log(Math.ceil(1.1));// 2\n        console.log(Math.ceil(1.9));// 2\n        console.log(Math.ceil(-1.1));// -1\n\n        // 5. 向下取整\n        console.log(Math.floor(1.1));// 1\n        console.log(Math.floor(-1.1));// -2\n\n        // 6. !!!四舍五入\n        console.log(Math.round(3.2));//3\n        console.log(Math.round(3.5));//4\n\n        // 7. !!!取绝对值\n        console.log(Math.abs(-100));// 100\n        console.log(Math.abs(100));//100\n\n        // 8. Math.pow(a,b) a的b次方\n        console.log(Math.pow(5,3));\n        \n        // 9. Math.sqrt() 开方\n        console.log(Math.sqrt(81));\n\n        // 10. 随机数 [0 , 1) 可随机出0\n        console.log(Math.random());\n\n\n        //Math.floor(Math.random()* (max - min + 1) + min)\n        var a = Math.floor(Math.random()*(99 - 66 + 1) + 66); // 取值范围: [ ]\n        console.log(a);\n\n</code></pre>\n<h2 id=\"定时器\"><a class=\"anchor\" href=\"#定时器\">#</a> 定时器</h2>\n<h3 id=\"interva定时器\"><a class=\"anchor\" href=\"#interva定时器\">#</a> Interva 定时器</h3>\n<h3 id=\"timeout定时器\"><a class=\"anchor\" href=\"#timeout定时器\">#</a> Timeout 定时器</h3>\n<h2 id=\"函数\"><a class=\"anchor\" href=\"#函数\">#</a> 函数</h2>\n<h3 id=\"无参无返回\"><a class=\"anchor\" href=\"#无参无返回\">#</a> 无参无返回</h3>\n<h3 id=\"有参无返回\"><a class=\"anchor\" href=\"#有参无返回\">#</a> 有参无返回</h3>\n<h3 id=\"无参无返回-2\"><a class=\"anchor\" href=\"#无参无返回-2\">#</a> 无参无返回</h3>\n<h2 id=\"offset\"><a class=\"anchor\" href=\"#offset\">#</a> offset</h2>\n<h3 id=\"offsetleft\"><a class=\"anchor\" href=\"#offsetleft\">#</a> offsetLeft</h3>\n<h3 id=\"offsettop\"><a class=\"anchor\" href=\"#offsettop\">#</a> offsetTop</h3>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/qian-duan/js-h5/js-xuan-ze-qi/",
            "url": "http://adamshang2333.github.io/qian-duan/js-h5/js-xuan-ze-qi/",
            "title": "js选择器",
            "date_published": "2023-03-12T11:31:03.803Z",
            "content_html": "<h3 id=\"基本选择器\"><a class=\"anchor\" href=\"#基本选择器\">#</a> 基本选择器</h3>\n<ol>\n<li>id 选择器</li>\n<li>类选择器</li>\n<li>标签选择器</li>\n<li>通配符选择器</li>\n</ol>\n<blockquote>\n<p>优先级:<br />\n 继承 &lt; 通配符 &lt; 标签选择器 &lt; 类选择器 &lt; ID 选择器 &lt; 行内样式 &lt;　!important</p>\n</blockquote>\n<ul>\n<li>\n<p><strong>组合选择器</strong></p>\n<p>1. 群组选择器<br />\n 2. 后代选择器</p>\n</li>\n</ul>\n<h3 id=\"属性选择器\"><a class=\"anchor\" href=\"#属性选择器\">#</a> 属性选择器</h3>\n<h4 id=\"语法例标签后中接属性选择包含特定属性的元素\"><a class=\"anchor\" href=\"#语法例标签后中接属性选择包含特定属性的元素\">#</a> 语法例:\t标签后 [] 中接属性，选择包含特定属性的元素</h4>\n<h4 id=\"无优先级看执行顺序\"><a class=\"anchor\" href=\"#无优先级看执行顺序\">#</a> 无优先级，看执行顺序</h4>\n<pre><code>&lt;style type=&quot;text/css&quot;&gt;\n   a[href]&#123;\n   \t\t&#125;     []内  \n   \t\tp[class]&#123;\n\t\t\t\tcolor: deepskyblue;\n\t\t\t&#125;\n\t\t\t\n\ta[href=&quot;####&quot;]&#123;\n\t\t\t\tcolor: gray;\n\t\t\t&#125;\n&lt;/style&gt;\n\t&lt;body&gt;\n\t\t&lt;!--a[href=&quot;#&quot;]&#123;&#125;--&gt;\n\t\t&lt;a href=&quot;#&quot; class=&quot;title&quot;&gt;超链接&lt;/a&gt;\n\t\t&lt;p class=&quot;title&quot;&gt;中午吃点啥&lt;/p&gt;\n\t\t&lt;p&gt;我也不知道&lt;/p&gt;\n\t\t&lt;a href=&quot;#&quot;&gt;超链接&lt;/a&gt;\n\t\t&lt;a href=&quot;####&quot;&gt;超链接&lt;/a&gt;\n\t\t&lt;a href=&quot;#&quot;&gt;超链接&lt;/a&gt;\n\t\t&lt;a href=&quot;#&quot;&gt;超链接&lt;/a&gt;\n\t\t&lt;a &gt;cc&lt;/a&gt;\n\t&lt;/body&gt;\n</code></pre>\n<h3 id=\"结构选择器\"><a class=\"anchor\" href=\"#结构选择器\">#</a> 结构选择器</h3>\n<p>1. 子代元素选择<br />\n div&gt;span<br />\n<strong> 只能选择儿子辈标签，不能跨级选择</strong></p>\n<p>2. 紧邻元素选择<br />\n span+a<br />\n<strong> 对紧接着的 span 下面的第一个 a 标签进行选择，其余的同类标签不会选中</strong></p>\n<h3 id=\"伪类选择器\"><a class=\"anchor\" href=\"#伪类选择器\">#</a> 伪类选择器</h3>\n<p>:not  &quot;反向&quot; 选择<br />\n:not (.color)</p>\n<pre><code>/*未设置成.color的*/\n\t\t\t:not(.color)&#123;\n\t\t\t\tcolor: blue;\n\t\t\t&#125;\n\t\t\t\n\t\t\t:not(div .color)&#123;\n\t\t\t\tcolor: goldenrod;\n\t\t\t&#125;\n</code></pre>\n<p>:nth- &quot;序列&quot; 选择<br />\n可以设置 n 为负值，eg:nth-of-type (-n+5)--n<br />\n 从 0 开始取值，只能选中前 5 个子代元素</p>\n<pre><code> /*所有父标签中的第二个标签,如果是p标签,选择器可以选中*/\n\t\t\t/*第二个不是p标签则无效*/\n\t\t\tp:nth-child(2)&#123;\n\t\t\t\tcolor: red;\n\t\t\t&#125;\n\t\t\t&lt;!--倒序查找选择--&gt;\n\t\t\tp:nth-last-child(4)&#123;\n\t\t\t\tcolor: red;\n\t\t\t&#125;\n\t\t\tp:nth-of-type(2)&#123;\n\t\t\t\tcolor: blue;\n\t\t\t&#125;\n\t\t\t \n\t\t\t/*n从0开始*/\n\t\t\tp:nth-of-type(2n+1)&#123;\n\t\t\t\tcolor: gray;\n\t\t\t&#125;\n\t\t\t\n\t\t\t/*倒数第几个*/\n\t\t\tp:nth-last-of-type(1)&#123;\n\t\t\t\tcolor: deepskyblue;\n\t\t\t&#125;\n</code></pre>\n<pre><code>\t\t\tp:first-of-type&#123;\n\t\t\t\tcolor: red;\n\t\t\t&#125;\n\t\t\tp:last-of-type&#123;\n\t\t\t\tcolor: greenyellow;\n\t\t\t&#125;\n\t\t\t\n\t\t\t/*所有父标签中p标签只有一个*/\n\t\t\tp:only-of-type&#123;\n\t\t\t\tcolor: red; \n\t\t\t&#125;\n\t\t\t\n\t\t\t/*所有父标签中只有一个子标签,并且是p标签*/\n\t\t\tp:only-child&#123;\n\t\t\t\tcolor: skyblue;\n\t\t\t&#125;\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/qian-duan/js-h5/html-ji-chu/",
            "url": "http://adamshang2333.github.io/qian-duan/js-h5/html-ji-chu/",
            "title": "HTML基础",
            "date_published": "2023-03-12T11:31:03.791Z",
            "content_html": "<h1 id=\"html模板\"><a class=\"anchor\" href=\"#html模板\">#</a> html 模板</h1>\n<pre><code>&lt;!--申明一个HTML文档--&gt;\n&lt;!DOCTYPE html&gt;\n&lt;!--代表一个网页的整体--&gt;\n&lt;html&gt;\n\t&lt;!--展示网页标题，样式等--&gt;\n\t&lt;head&gt;\n\t\t&lt;!--设置编码格式，防止乱码（UTF-8 常用编码格式）--&gt;\n\t\t&lt;meta charset=&quot;UTF-8&quot;&gt;\n\t\t&lt;!--设置网页标题--&gt;\n\t\t&lt;title&gt;百度一下&lt;/title&gt;\n\t&lt;/head&gt;\n\t&lt;!--网页主体（直观见到的）--&gt;\n\t&lt;body&gt;\n\t\t\n\t&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<h1 id=\"项目文件创建\"><a class=\"anchor\" href=\"#项目文件创建\">#</a> 项目文件创建</h1>\n<p>**img 😗* 项目图片资源，可以有子文件夹，对不同的页面分类</p>\n<p>**js 😗* 外部引入的 js 文件</p>\n<p>**css 😗* 外部引入的 css 文件，比如 normalize.css, 或框架 css 文件</p>\n<p>**index/home.html 😗* 首页<br />\n<strong> favicon.ico</strong> : 浏览器标签栏图标</p>\n<h1 id=\"标签分类\"><a class=\"anchor\" href=\"#标签分类\">#</a> 标签分类</h1>\n<ul>\n<li>\n<p>模板 功能类</p>\n<pre><code> html body head link title style meta strong  em   \n link: \n</code></pre>\n</li>\n<li>\n<p>块标签</p>\n<pre><code> div h1~h6 p ul ol li  br hr\n</code></pre>\n<p><strong>特性:</strong></p>\n<ol>\n<li>display:block</li>\n<li>占父级的一行</li>\n<li>可以嵌套块标签和行标签 (p 标签只能嵌套行标签)</li>\n<li>居中：给<strong>本身</strong>加 margin: 0 auto</li>\n<li>可以设置宽高，不设置高度时，由内容撑开</li>\n</ol>\n</li>\n<li>\n<p>行标签</p>\n</li>\n</ul>\n<pre><code>span a img i  b sub sup input  \n</code></pre>\n<p><strong>特性</strong></p>\n<ol>\n<li>display:inline</li>\n<li>多个行标签可在一行显示</li>\n<li>不能设置宽高，默认由内容撑开</li>\n<li>行标签可以嵌套行标签</li>\n<li>居中：给父标签加 : text-align:center</li>\n<li>垂直方向 margin,padding 失效</li>\n</ol>\n<ul>\n<li>表单</li>\n</ul>\n<pre><code>form tbody  label input select textarea \n</code></pre>\n<ul>\n<li>表格</li>\n</ul>\n<pre><code>table tr td th  \n</code></pre>\n<h1 id=\"选择器\"><a class=\"anchor\" href=\"#选择器\">#</a> 选择器</h1>\n<ul>\n<li><strong>基本选择器</strong></li>\n</ul>\n<ol>\n<li>id 选择器</li>\n<li>类选择器</li>\n<li>标签选择器</li>\n<li>通配符选择器</li>\n</ol>\n<blockquote>\n<p>优先级:<br />\n 继承 &lt; 通配符 &lt; 标签选择器 &lt; 类选择器 &lt; ID 选择器 &lt; 行内样式 &lt;　!important</p>\n</blockquote>\n<ul>\n<li>\n<p><strong>组合选择器</strong></p>\n<p>1. 群组选择器<br />\n 2. 后代选择器</p>\n</li>\n</ul>\n<h1 id=\"布局\"><a class=\"anchor\" href=\"#布局\">#</a> 布局</h1>\n<h3 id=\"盒模型\"><a class=\"anchor\" href=\"#盒模型\">#</a> 盒模型</h3>\n<ul>\n<li>border</li>\n<li>margin  : 垂直方向合并问题</li>\n<li>padding</li>\n<li>box-sizing : border-box</li>\n</ul>\n<p><strong>兄弟关系用 margin, 父子关系用 padding</strong></p>\n<p>### 浮动</p>\n<blockquote>\n<p>浮动最早是解决文字环绕问题，现在一般用来做左右布局使用，使用时注意清浮动.</p>\n</blockquote>\n<p><strong>清浮动: overflow : hidden</strong></p>\n<p><strong>浮动元素的特性</strong></p>\n<blockquote></blockquote>\n<ol>\n<li>浮动元素不占文档流</li>\n<li>设置成浮动后不再具有行块标签的特性，称为浮动元素</li>\n<li>浮动元素可以设置宽高，默认由内容撑开</li>\n</ol>\n<p><strong>注意：浮动元素的兄弟标签都要为浮动</strong></p>\n<h3 id=\"定位\"><a class=\"anchor\" href=\"#定位\">#</a> 定位</h3>\n<ul>\n<li>\n<p><strong>static</strong> 默认值</p>\n</li>\n<li>\n<p><strong>fixed</strong> 固定定位</p>\n<p>特性:</p>\n<ol>\n<li>相对于浏览器定位</li>\n<li>不占文档流</li>\n<li>不再是行块标签，成为定位元素</li>\n<li>可以设置宽高，由内容撑开</li>\n<li>一般用作导航 / 导航弹出框等</li>\n</ol>\n</li>\n<li>\n<p><strong>relative</strong> 相对定位</p>\n<p>特性:</p>\n<ol>\n<li>相对于自身定位</li>\n<li>占文档流</li>\n<li>不改变标签本身特性</li>\n<li>一般用来做微调或者是绝对定位的父级</li>\n</ol>\n</li>\n<li>\n<p><strong>absolute</strong> 绝对定位</p>\n</li>\n</ul>\n<p>特性:</p>\n<ol>\n<li>相对于最近的定位父级 (从父标签往外找) , 如果没有定位父级，相对于浏览器定位<br />\n 2. 不占文档流<br />\n 3. 不再是行块标签，成为定位元素</li>\n</ol>\n<pre><code>**top / left / right / bottom / z-index :只能和定位配合使用**  \n**定位居中**\n</code></pre>\n<h1 id=\"css样式\"><a class=\"anchor\" href=\"#css样式\">#</a> css 样式</h1>\n<h3 id=\"背景\"><a class=\"anchor\" href=\"#背景\">#</a> 背景</h3>\n<ul>\n<li>background</li>\n<li>background-image</li>\n<li>background-color</li>\n<li>background-size: 水平 垂直</li>\n<li>background-repeat</li>\n<li>background-position</li>\n<li>background-clip</li>\n</ul>\n<h3 id=\"字体\"><a class=\"anchor\" href=\"#字体\">#</a> 字体</h3>\n<ul>\n<li>font-size</li>\n<li>font-famliy</li>\n<li>font-style</li>\n<li>font-weight</li>\n<li>font-height</li>\n<li>line-height</li>\n<li>word-spacing</li>\n<li>letter-spacing</li>\n<li>text-decoration  (下划线等)</li>\n<li>text-align</li>\n<li>text-shadow</li>\n<li>color</li>\n</ul>\n<h3 id=\"杂七杂八\"><a class=\"anchor\" href=\"#杂七杂八\">#</a> 杂七杂八</h3>\n<ul>\n<li>border-radius</li>\n<li>list-style</li>\n<li>cursor</li>\n<li>vertical-align</li>\n<li>box-shadow</li>\n<li>box-sizing</li>\n<li>overflow</li>\n<li>outline (input 点击后的边框)</li>\n<li>max-width</li>\n<li>min-width</li>\n</ul>\n<h3 id=\"透明度\"><a class=\"anchor\" href=\"#透明度\">#</a> 透明度</h3>\n<ul>\n<li>opcity</li>\n<li>filter : alpha () -- 适配 IE</li>\n<li>rgba</li>\n</ul>\n<h3 id=\"隐藏\"><a class=\"anchor\" href=\"#隐藏\">#</a> 隐藏</h3>\n<ul>\n<li>display: none ; 不占文档流</li>\n<li>visibility : hidden ; 占文档流</li>\n<li>透明度为 0</li>\n</ul>\n<h3 id=\"颜色值\"><a class=\"anchor\" href=\"#颜色值\">#</a> 颜色值</h3>\n<ul>\n<li>单词</li>\n<li>rgb</li>\n<li>rgba</li>\n<li>十六进制</li>\n</ul>\n<h3 id=\"单位\"><a class=\"anchor\" href=\"#单位\">#</a> 单位</h3>\n<ul>\n<li>px</li>\n<li>em</li>\n<li>rem</li>\n<li>deg</li>\n</ul>\n<h1 id=\"h5新增标签和选择器\"><a class=\"anchor\" href=\"#h5新增标签和选择器\">#</a> H5 新增标签和选择器</h1>\n<h3 id=\"新增标签\"><a class=\"anchor\" href=\"#新增标签\">#</a> 新增标签</h3>\n<p>audio \tvideo\t canvas<br />\nheader footer nav  main.....</p>\n<h3 id=\"选择器-2\"><a class=\"anchor\" href=\"#选择器-2\">#</a> 选择器</h3>\n<p>属性选择器</p>\n<p>伪类选择器</p>\n<h1 id=\"过渡2d-3d变换动画\"><a class=\"anchor\" href=\"#过渡2d-3d变换动画\">#</a> 过渡 / 2D 3D 变换 / 动画</h1>\n<h3 id=\"过渡-transition\"><a class=\"anchor\" href=\"#过渡-transition\">#</a> 过渡   transition</h3>\n<p><strong>常用 : transition all 1s liner (匀速) ;</strong></p>\n<h3 id=\"2d-变换-transform\"><a class=\"anchor\" href=\"#2d-变换-transform\">#</a> 2D 变换 transform</h3>\n<ul>\n<li>transform : translate();</li>\n<li>transform : scale();</li>\n<li>transform: rotate(..deg);</li>\n<li>transform;skew(..deg);</li>\n<li>transform-orgin: 基准点</li>\n</ul>\n<h3 id=\"3d-变换-开3d-景深\"><a class=\"anchor\" href=\"#3d-变换-开3d-景深\">#</a> 3D 变换  -&gt; 开 3D 景深</h3>\n<h3 id=\"动画-animation\"><a class=\"anchor\" href=\"#动画-animation\">#</a> 动画  animation</h3>\n<p><strong>定义动画效果 @keyframes</strong></p>\n<p>** 动画库 : animate.css 使用方式两种 **</p>\n<pre><code>\n&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/animate.css&quot;/&gt;\n\n&lt;!--第一种--&gt;\n&lt;style type=&quot;text/css&quot;&gt;\n\tanimation: heartBeat  3s;\n&lt;/style&gt;\n\n&lt;!--第二种  !!!class中记得加animated!!!--&gt;\n&lt;div class=&quot;animated heartBeat&quot;&gt;&lt;/div&gt;\n\n</code></pre>\n<h1 id=\"响应式布局\"><a class=\"anchor\" href=\"#响应式布局\">#</a> 响应式布局</h1>\n<blockquote>\n<p>更适用于移动端，来对不同的屏幕做适配，PC 端使用的话，页面不会太复杂</p>\n</blockquote>\n<p><strong>移动端布局，必须添加 viewport</strong></p>\n<h3 id=\"流式布局百分比布局\"><a class=\"anchor\" href=\"#流式布局百分比布局\">#</a> 流式布局 / 百分比布局</h3>\n<ol>\n<li>\n<p>宽度：本身宽度 / 父级的宽度</p>\n</li>\n<li>\n<p>高度：本身高度 / 父级的高度</p>\n</li>\n<li>\n<p>定位值 :</p>\n<p>纵向定位 (top bottom) / 定位父级的高度<br />\n横向定位 (left right) / 定位父级的宽度</p>\n</li>\n<li>\n<p>盒模型 (margin padding)</p>\n<p>盒模型纵向  纵向值 / 父级的宽度盒模型横向<br />\n横向值 / 父级的宽度？: 多数情况高度由文档流撑开</p>\n</li>\n</ol>\n<h3 id=\"媒体查询\"><a class=\"anchor\" href=\"#媒体查询\">#</a> 媒体查询</h3>\n<p>@media only screen and (min-width:980px )<br />\n@media only screen and (max-width:600px )<br />\n@media only screen and (min-width: 700px) and (max-width: 800px)</p>\n<h1 id=\"其他\"><a class=\"anchor\" href=\"#其他\">#</a> 其他</h1>\n<h3 id=\"字体图标\"><a class=\"anchor\" href=\"#字体图标\">#</a> 字体图标</h3>\n<h3 id=\"滑动门\"><a class=\"anchor\" href=\"#滑动门\">#</a> 滑动门</h3>\n<h3 id=\"精灵图雪碧图-http\"><a class=\"anchor\" href=\"#精灵图雪碧图-http\">#</a> 精灵图 / 雪碧图 [http]</h3>\n<h3 id=\"hover效果\"><a class=\"anchor\" href=\"#hover效果\">#</a> hover 效果</h3>\n<h3 id=\"锚点\"><a class=\"anchor\" href=\"#锚点\">#</a> 锚点</h3>\n<h3 id=\"线性渐变-径向渐变\"><a class=\"anchor\" href=\"#线性渐变-径向渐变\">#</a> 线性渐变 径向渐变</h3>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/qian-duan/js-h5/h5-xin-zeng/",
            "url": "http://adamshang2333.github.io/qian-duan/js-h5/h5-xin-zeng/",
            "title": "H5新增内容总结",
            "date_published": "2023-03-12T11:31:03.779Z",
            "content_html": "<p>## 新增标签</p>\n<p>### 音频标签 - audio</p>\n<p>可以设置宽、高<br />\n支持文件格式：mp3 wav ogg<br />\n<strong>audio  中可以放置文本，在浏览器不支持此标签时显示。可以插入背景图</strong></p>\n<pre><code>&lt;audio &quot; src=&quot;source/群星 - 大力哥 浑身难受 Rap.mp3&quot;   \n   autoplay=&quot;autoplay&quot;   \n   controls=&quot;controls&quot; \n   loop=&quot;loop&quot;\n   preload=&quot;auto&quot;&gt;\t  \n</code></pre>\n<p>### 视频标签 video</p>\n<pre><code class=\"language-&lt;video\"> autoplay=&quot;autoplay&quot;  \n  muted=&quot;muted&quot; //静音   \n  width=&quot;400&quot;   \n  height=&quot;600&quot;   \n  controls=&quot;&quot;   \n  poster=&quot;添加图片&quot;&gt;  \n  &lt;/video&gt;\n\t\t\n\t\t&lt;video width=&quot;800&quot; height=&quot;&quot;&gt;\n\t\t\t自动匹配可用的文件格式\n\t\t\t&lt;source src=&quot;myvideo.mp4&quot; type=&quot;video/mp4&quot;&gt;&lt;/source&gt;\n\t\t\t&lt;source src=&quot;myvideo.ogv&quot; type=&quot;video/ogg&quot;&gt;&lt;/source&gt;\n\t\t\t&lt;source src=&quot;myvideo.webm&quot; type=&quot;video/webm&quot;&gt;&lt;/source&gt;\t\n\t\t\t&lt;object width=&quot;&quot; height=&quot;&quot; type=&quot;application/x-shockwave-flash&quot; data=&quot;myvideo.swf&quot;&gt;\n\t\t\t\t&lt;param name=&quot;movie&quot; value=&quot;myvideo.swf&quot; /&gt;\n\t\t\t\t&lt;param name=&quot;flashvars&quot; value=&quot;autostart=true&amp;amp;file=myvideo.swf&quot; /&gt;\n\t\t\t&lt;/object&gt;\n\t\t\t当前浏览器不支持 video直接播放，点击这里下载视频： &lt;a href=&quot;myvideo.webm&quot;&gt;下载视频&lt;/a&gt;\n\t\t&lt;/video&gt;\n</code></pre>\n<p>###body 内可代替 div 的标签</p>\n<pre><code>  &lt;!--相当于&lt;div class=&quot;nav&quot;&gt;&lt;/div&gt;--&gt;\n\t\t&lt;nav&gt;用于作为导航&lt;/nav&gt;\n\t\t\n\t\t&lt;!--header内不能嵌套header标签--&gt;\n\t\t&lt;header&gt;用来定义文档或文档一部分区域的头部&lt;/header&gt;\n\t\t\n\t\t&lt;section&gt;用于划分区域&lt;/section&gt;\n\t\t\n\t\t\n\t\t&lt;!--一个页面只能出现一个main元素\n\t\t     不能嵌套在header footer article aside内部\n\t\t--&gt;\n\t\t&lt;main&gt;页面主体部分&lt;/main&gt;\n\t\t\n\t\t&lt;aside&gt;可用作文章的侧栏&lt;/aside&gt;\n\t\t\n\t\t\n\t\t&lt;!--画布 h5新增--&gt;\n\t\t&lt;canvas&gt;666666&lt;/canvas&gt;\n\t\t\n\t\t&lt;button&gt;&lt;/button&gt;\n</code></pre>\n<p>## 新增选择器<br />\n ### 属性选择器<br />\n #### 语法例:\t标签后 [] 中接属性，选择包含特定属性的元素<br />\n #### 无优先级，看执行顺序</p>\n<pre><code>&lt;style type=&quot;text/css&quot;&gt;\n   a[href]&#123;\n   \t\t&#125;     []内  \n   \t\tp[class]&#123;\n\t\t\t\tcolor: deepskyblue;\n\t\t\t&#125;\n\t\t\t\n\ta[href=&quot;####&quot;]&#123;\n\t\t\t\tcolor: gray;\n\t\t\t&#125;\n&lt;/style&gt;\n\t&lt;body&gt;\n\t\t&lt;!--a[href=&quot;#&quot;]&#123;&#125;--&gt;\n\t\t&lt;a href=&quot;#&quot; class=&quot;title&quot;&gt;超链接&lt;/a&gt;\n\t\t&lt;p class=&quot;title&quot;&gt;中午吃点啥&lt;/p&gt;\n\t\t&lt;p&gt;我也不知道&lt;/p&gt;\n\t\t&lt;a href=&quot;#&quot;&gt;超链接&lt;/a&gt;\n\t\t&lt;a href=&quot;####&quot;&gt;超链接&lt;/a&gt;\n\t\t&lt;a href=&quot;#&quot;&gt;超链接&lt;/a&gt;\n\t\t&lt;a href=&quot;#&quot;&gt;超链接&lt;/a&gt;\n\t\t&lt;a &gt;cc&lt;/a&gt;\n\t&lt;/body&gt;\n</code></pre>\n<p>### 结构选择器<br />\n 1. 子代元素选择<br />\n div&gt;span<br />\n<strong> 只能选择儿子辈标签，不能跨级选择</strong></p>\n<p>2. 紧邻元素选择<br />\n span+a<br />\n<strong> 对紧接着的 span 下面的第一个 a 标签进行选择，其余的同类标签不会选中</strong></p>\n<p>### 伪类选择器<br />\n:not  &quot;反向&quot; 选择<br />\n:not (.color)</p>\n<pre><code>/*未设置成.color的*/\n\t\t\t:not(.color)&#123;\n\t\t\t\tcolor: blue;\n\t\t\t&#125;\n\t\t\t\n\t\t\t:not(div .color)&#123;\n\t\t\t\tcolor: goldenrod;\n\t\t\t&#125;\n</code></pre>\n<p>:nth- &quot;序列&quot; 选择<br />\n可以设置 n 为负值，eg:nth-of-type (-n+5)--n<br />\n 从 0 开始取值，只能选中前 5 个子代元素</p>\n<pre><code> /*所有父标签中的第二个标签,如果是p标签,选择器可以选中*/\n\t\t\t/*第二个不是p标签则无效*/\n\t\t\tp:nth-child(2)&#123;\n\t\t\t\tcolor: red;\n\t\t\t&#125;\n\t\t\t&lt;!--倒序查找选择--&gt;\n\t\t\tp:nth-last-child(4)&#123;\n\t\t\t\tcolor: red;\n\t\t\t&#125;\n\t\t\tp:nth-of-type(2)&#123;\n\t\t\t\tcolor: blue;\n\t\t\t&#125;\n\t\t\t \n\t\t\t/*n从0开始*/\n\t\t\tp:nth-of-type(2n+1)&#123;\n\t\t\t\tcolor: gray;\n\t\t\t&#125;\n\t\t\t\n\t\t\t/*倒数第几个*/\n\t\t\tp:nth-last-of-type(1)&#123;\n\t\t\t\tcolor: deepskyblue;\n\t\t\t&#125;\n</code></pre>\n<pre><code>\t\t\tp:first-of-type&#123;\n\t\t\t\tcolor: red;\n\t\t\t&#125;\n\t\t\tp:last-of-type&#123;\n\t\t\t\tcolor: greenyellow;\n\t\t\t&#125;\n\t\t\t\n\t\t\t/*所有父标签中p标签只有一个*/\n\t\t\tp:only-of-type&#123;\n\t\t\t\tcolor: red; \n\t\t\t&#125;\n\t\t\t\n\t\t\t/*所有父标签中只有一个子标签,并且是p标签*/\n\t\t\tp:only-child&#123;\n\t\t\t\tcolor: skyblue;\n\t\t\t&#125;\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/qian-duan/js-h5/dom-cao-zuo/",
            "url": "http://adamshang2333.github.io/qian-duan/js-h5/dom-cao-zuo/",
            "title": "DOM操作",
            "date_published": "2023-03-12T11:31:03.767Z",
            "content_html": "<h3 id=\"获取元素\"><a class=\"anchor\" href=\"#获取元素\">#</a> 获取元素</h3>\n<pre><code>&lt;div id=&quot;name&quot;&gt;&lt;/div&gt;\n&lt;script&gt;\n\tvar oName = document.getElementById(&quot;name&quot;);\n\toName.onclick = function () &#123;\n\t\toName.style.backgroundColor = &quot;red&quot;;\n\t\toName.className = &quot;name&quot;;\n\t&#125;\n&lt;/script&gt;\n</code></pre>\n<blockquote>\n<p>.onclick: 点击事件，可以给任何标签绑定，点击该标签时才会执行 function 中的代码</p>\n<p>.style.backgroundColor: 设置行间样式，background-color 等多个单词的形式，在 js 中变成驼峰结构</p>\n<p>.className: 设置或更改类名 (除类名外其他属性名都和标签中的一致)</p>\n</blockquote>\n<h3 id=\"innerhtml\"><a class=\"anchor\" href=\"#innerhtml\">#</a> innerHTML</h3>\n<pre><code>\t&lt;div id=&quot;name&quot;&gt;&lt;/div&gt;\n    &lt;script&gt;\n        var oName = document.getElementById(&quot;name&quot;);\n\n        oName.onclick = function () &#123;\n            var str = oName.innerHTML;\n            console.log(str);\n\n            // 清空标签里的内容\n            oName.innerHTML = &quot;&quot;;\n        &#125;\n\n    &lt;/script&gt;\n</code></pre>\n<blockquote>\n<p>若获取的标签是双标签，想获取标签间的内容可以用 innerHTML 属性，innerHTML 指标签中间的所有内容包括其他标签.</p>\n</blockquote>\n<h3 id=\"文档写入\"><a class=\"anchor\" href=\"#文档写入\">#</a> 文档写入</h3>\n<pre><code>    &lt;script&gt;\n        document.write(&quot;123&quot;);\n        document.write(&quot;&lt;div class=\\&quot;name\\&quot;&gt;\\\\&lt;/div&gt;&quot;);\n    &lt;/script&gt;\n</code></pre>\n<blockquote>\n<p>document.write 中写的所有内容都会显示在 HTML 中</p>\n<p>若引号中还需要加引号，可以用单引号代替或使用转义字符：(\\)</p>\n</blockquote>\n<h3 id=\"tagname\"><a class=\"anchor\" href=\"#tagname\">#</a> tagName</h3>\n<pre><code>var oDivs = document.getElementsByTagName(&quot;div&quot;);\n</code></pre>\n<blockquote>\n<p>获取页面中所有 div</p>\n<p>oDivs 不是数组，但可以当成数组操作获取内部元素</p>\n</blockquote>\n<pre><code>var oStudent = document.getElementById(&quot;student&quot;);\nvar oLink = oStudent.getElementsByTagName(&quot;a&quot;);\n</code></pre>\n<blockquote>\n<p>获取 id 是 student 标签内部的所有 a 标签</p>\n</blockquote>\n<h3 id=\"鼠标移入\"><a class=\"anchor\" href=\"#鼠标移入\">#</a> 鼠标移入</h3>\n<p><strong>onmouseover</strong></p>\n<pre><code>        var oDiv1 = document.getElementById(&quot;div1&quot;);\n        \n        oDiv1.onmouseover = function () &#123;\n            console.log(&quot;鼠标移入&quot;);\n        &#125;\n</code></pre>\n<h3 id=\"鼠标移出\"><a class=\"anchor\" href=\"#鼠标移出\">#</a> 鼠标移出</h3>\n<p><strong>onmouseout</strong></p>\n<pre><code>        var oDiv1 = document.getElementById(&quot;div1&quot;);\n\n        oDiv1.onmouseout = function () &#123;\n            console.log(&quot;鼠标移出&quot;);\n        &#125;\n</code></pre>\n<h3 id=\"获取dom节点\"><a class=\"anchor\" href=\"#获取dom节点\">#</a> 获取 DOM 节点</h3>\n<pre><code>        // 准备代码\n        var oAll = document.getElementById(&quot;all&quot;);\n        var oDivs = oAll.getElementsByTagName(&quot;div&quot;);\n</code></pre>\n<h4 id=\"获取子标签\"><a class=\"anchor\" href=\"#获取子标签\">#</a> 获取子标签</h4>\n<pre><code>oAll.children// 获取子标签\n</code></pre>\n<h4 id=\"创建元素\"><a class=\"anchor\" href=\"#创建元素\">#</a> 创建元素</h4>\n<pre><code>var newDiv = document.createElement(&quot;div&quot;);\n// js创建的标签元素和从页面获取的一样可以设置样式和内容等\nnewDiv.innerHTML = &quot;hah&quot;;\nnewDiv.className = &quot;name&quot;;\n</code></pre>\n<h4 id=\"在某标签末尾添加元素\"><a class=\"anchor\" href=\"#在某标签末尾添加元素\">#</a> 在某标签末尾添加元素</h4>\n<pre><code class=\"language-0\">oAll.appendChild(newDiv);\n</code></pre>\n<h4 id=\"在指定位置添加元素\"><a class=\"anchor\" href=\"#在指定位置添加元素\">#</a> 在指定位置添加元素</h4>\n<pre><code>oAll.insertBefore(新元素A, 子元素B);\n</code></pre>\n<h4 id=\"删除元素\"><a class=\"anchor\" href=\"#删除元素\">#</a> 删除元素</h4>\n<ul>\n<li>父标签删除子标签</li>\n</ul>\n<pre><code>父标签.removeChild(子标签)\n</code></pre>\n<ul>\n<li>自身删除</li>\n</ul>\n<pre><code>newDiv.remove();\n</code></pre>\n<h4 id=\"替换\"><a class=\"anchor\" href=\"#替换\">#</a> 替换</h4>\n<pre><code>oAll.replaceChild(新标签, 被替换的子标签)\n\nvar theA = document.createElement(&quot;a&quot;);\ntheA.href = &quot;#&quot;;// 没有设置href属性时,a标签没有默认样式\noAll.replaceChild(theA, oAll.children[0]);\n</code></pre>\n<h4 id=\"获取父节点\"><a class=\"anchor\" href=\"#获取父节点\">#</a> 获取父节点</h4>\n<pre><code>theA.parentNode\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/qian-duan/js-h5/css-dong-tai-xiao-guo/",
            "url": "http://adamshang2333.github.io/qian-duan/js-h5/css-dong-tai-xiao-guo/",
            "title": "css动态效果总结",
            "date_published": "2023-03-12T11:31:03.755Z",
            "content_html": "<p>##transition (过渡样式)<br />\n### 可设定过渡的时间 延时时间 速度曲线 指定某个过渡的元素<br />\n #### 过渡时间  transition-duration: 1s;<br />\n#### 过渡延时  transition-delay: 1s;\t\t<br />\n#### 过渡效果  transition-timing-function: cubic-bezier (0, 0, 0, 1.97) ;<br />\n 常用的预设过渡效果:ease ease-in ease-inout ease-out<br />\n### 过渡常用默认样式:transition:all 1s</p>\n<p>##transform (变换)<br />\n### 二维效果<br />\n transform: translate    / 平移 /</p>\n<blockquote>\n<p>移动参照系为自身 使用 - 50% 可做居中效果<br />\n可分别设置 x y 轴的平移距离  亦可写成复合 (20px,20px)<br />\n 平移数值可以为负值</p>\n</blockquote>\n<p>transform: rotate  / 旋转 /</p>\n<blockquote>\n<p>不设置时默认为以 z 轴旋转<br />\n可分别设置 x y 轴旋转<br />\n旋转数值可以为负值</p>\n</blockquote>\n<p>transform: scale  / 缩放 /</p>\n<blockquote>\n<p>默认以缩放标签的中心做缩放基点<br />\n可分别设置 x y 轴缩放，亦可写成复合 (2,2)<br />\n 缩放数值可以为负值</p>\n</blockquote>\n<p>transform: skew  / 倾斜 /</p>\n<blockquote>\n<p>可分别设置 x y 轴倾斜，亦可写成复合 (30deg,30deg)<br />\n 倾斜数值可以为负值</p>\n</blockquote>\n<p>#### 二维变换组合</p>\n<blockquote>\n<p>transform 可以将多个变换结合使用，但是要注意变换顺序！！</p>\n</blockquote>\n<pre><code>div:hover&#123;\n\tbackground-color: red;\n\t/*执行顺序会对变换效果造成影响 即先转 再平移 放大;平移 旋转 放大*/\n\ttransform: rotate(360deg) scale(2) translateX(100px) ;\n\t&#125;\n</code></pre>\n<p>#### 变换基准点自定义<br />\n transform-origin: left top;</p>\n<blockquote>\n<p>基准点可设置特定位置或者具体数值<br />\n x 轴:left center right<br />\ny 轴:top center bottom</p>\n</blockquote>\n<p>### 三维效果</p>\n<blockquote>\n<p>三维效果需要在父级标签设置 &quot;3d 盒子&quot;, 景深<br />\n使用时，与二维基本一致。可设置负方向数值</p>\n</blockquote>\n<pre><code>\t\t.all&#123;\n\t\t\t\twidth: 500px;\n\t\t\t\theight: 500px;\n\t\t\t\tborder: 1px solid black;\n\t\t\t\tmargin: 100px auto;\n\t\t\t\t/*在父级设置3D盒子*/\n\t\t\t\ttransform-style: preserve-3d ;\n\t\t\t\t\n\t\t\t\t/*景深 */\n\t\t\t\tperspective: 1000px;\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "http://adamshang2333.github.io/hou-duan/ci-cd/k8s/",
            "url": "http://adamshang2333.github.io/hou-duan/ci-cd/k8s/",
            "title": "Kubernetes",
            "date_published": "2023-03-07T11:23:00.000Z",
            "content_html": "<h1 id=\"一-简介\"><a class=\"anchor\" href=\"#一-简介\">#</a> 一。简介</h1>\n<h2 id=\"了解k8s-容器化\"><a class=\"anchor\" href=\"#了解k8s-容器化\">#</a> 了解 K8s &amp; 容器化</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvb3ZlcnZpZXcv\">Kubernetes</span> 也称为 K8s，是一个可移植、可扩展的开源平台，用于管理容器化的工作负载和服务，可促进声明式配置和自动化。 Kubernetes 拥有一个庞大且快速增长的生态，其服务、支持和工具的使用范围相当广泛。</p>\n<h3 id=\"什么是容器\"><a class=\"anchor\" href=\"#什么是容器\">#</a> 什么是容器</h3>\n<p>容器是一种<strong>沙盒技术</strong>，主要目的是为了将应用运行在其中，与外界隔离；及方便这个沙盒可以被转移到其它宿主机器。本质上，它是一个特殊的进程。通过名称空间（Namespace）、控制组（Control groups）、切根（chroot）技术把资源、文件、设备、状态和配置划分到一个独立的空间。</p>\n<p>通俗点的理解就是一个装应用软件的箱子，箱子里面有软件运行所需的依赖库和配置。开发人员可以把这个箱子搬到任何机器上，且不影响里面软件的运行。</p>\n<p>此外，需要明确的一个概念是: <strong>容器技术并不等同于 docker</strong>. 容器相关的技术实现，除了 Docker 以外 还有 <code>podman</code> , <code>LXC</code> , <code>  containerd</code> , <code> Buildah</code>  等，它们都能像 docker 一样构建镜像 运行容器.</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2c2VThXN3AwNmRDTzk5ZlEzL2FydGljbGUvZGV0YWlscy8xMjcyOTMzODQ=\">参考：除 docker 外的其他容器化工具</span></p>\n<h3 id=\"容器标准\"><a class=\"anchor\" href=\"#容器标准\">#</a> 容器标准</h3>\n<blockquote>\n<p>容器世界里并不是只有 docker 一家。既然不是一家就很容易出现分歧。任何技术出现都需要一个标准来规范它，不然各搞各的很容易导致技术实现的碎片化，出现大量的冲突和冗余。因此，在 2015 年，由 Google，Docker、CoreOS、IBM、微软、红帽等厂商联合发起的 <code>OCI</code> （Open Container  Initiative）组织成立了，并于 2016 年 4 月推出了第一个开放容器标准。标准主要包括 runtime 运行时标准和 image 镜像标准。</p>\n</blockquote>\n<p><strong>容器运行时标准 （runtime spec）</strong></p>\n<ul>\n<li>\n<p>creating：使用 create 命令创建容器，这个过程称为创建中</p>\n</li>\n<li>\n<p>created：容器创建出来，但是还没有运行，表示镜像和配置没有错误，容器能够运行在当前平台</p>\n</li>\n<li>\n<p>running：容器的运行状态，里面的进程处于 up 状态，正在执行用户设定的任务</p>\n</li>\n<li>\n<p>stopped：容器运行完成，或者运行出错，或者  stop 命令之后，容器处于暂停状态。这个状态，容器还有很多信息保存在平台中，并没有完全被删除</p>\n</li>\n</ul>\n<p><strong>容器镜像标准（image spec）</strong></p>\n<ul>\n<li>文件系统：以 layer 保存的文件系统，每个 layer 保存了和上层之间变化的部分，layer  应该保存哪些文件，怎么表示增加、修改和删除的文件等；</li>\n<li>config 文件：保存了文件系统的层级信息（每个层级的 hash  值，以及历史信息），以及容器运行时需要的一些信息（比如环境变量、工作目录、命令参数、mount  列表），指定了镜像在某个特定平台和系统的配置。比较接近我们使用 docker inspect &lt;image_id&gt; 看到的内容；</li>\n<li>manifest 文件：镜像的 config 文件索引，有哪些 layer，额外的 annotation 信息，manifest  文件中保存了很多和当前平台有关的信息；</li>\n<li>index 文件：可选的文件，指向不同平台的 manifest  文件，这个文件能保证一个镜像可以跨平台使用，每个平台拥有不同的 manifest 文件，使用 index 作为索引。</li>\n</ul>\n<h3 id=\"关于k8s和docker的关系\"><a class=\"anchor\" href=\"#关于k8s和docker的关系\">#</a> 关于 K8s 和 Docker 的关系</h3>\n<p>K8s 和 docker 关系可以简单用下图实例:</p>\n<p><img data-src=\"https://pic1.zhimg.com/80/v2-3386b7a906cc4ae4bc2750273a4c69ec_1440w.jpg\" alt=\"docker&amp;&amp;k8s\" /></p>\n<p>其工作流程简单来说是这样的：</p>\n<ol>\n<li>Docker，Kubernetes 等工具来运行一个容器时会调用容器运行时（CRI）比如 containerd，CRI-O</li>\n<li>通过容器运行时来完成容器的创建、运行、销毁等实际工作</li>\n</ol>\n<ul>\n<li>Docker 使用的是 containerd 作为其运行时；Kubernetes 支持 containerd，CRI-O 等多种容器运行时</li>\n<li>这些容器运行时都遵循了 OCI 规范，并通过 runc 来实现与操作系统内核交互来完成容器的创建和运行</li>\n</ul>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC80OTA1ODU2ODM=\">参考: k8s 和 docker 关系</span></p>\n<h2 id=\"k8s的功能特性\"><a class=\"anchor\" href=\"#k8s的功能特性\">#</a> k8s 的功能特性</h2>\n<h4 id=\"自动化上线和回滚\"><a class=\"anchor\" href=\"#自动化上线和回滚\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL2RlcGxveW1lbnQv\">自动化上线和回滚</span></h4>\n<p>Kubernetes 会分步骤地将针对应用或其配置的更改上线，同时监视应用程序运行状况以确保你不会同时终止所有实例。如果出现问题，Kubernetes 会为你回滚所作更改。你应该充分利用不断成长的部署方案生态系统。</p>\n<h4 id=\"服务发现与负载均衡\"><a class=\"anchor\" href=\"#服务发现与负载均衡\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvc2VydmljZXMtbmV0d29ya2luZy9zZXJ2aWNlLw==\">服务发现与负载均衡</span></h4>\n<p>无需修改你的应用程序去使用陌生的服务发现机制。Kubernetes 为容器提供了自己的 IP 地址和一个 DNS 名称，并且可以在它们之间实现负载均衡。</p>\n<h4 id=\"自我修复\"><a class=\"anchor\" href=\"#自我修复\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL3JlcGxpY2FzZXQvI3JlcGxpY2F0aW9uY29udHJvbGxlci0lRTUlQTYlODIlRTQlQkQlOTUlRTUlQjclQTUlRTQlQkQlOUM=\">自我修复</span></h4>\n<p>重新启动失败的容器，在节点死亡时替换并重新调度容器， 杀死不响应用户定义的健康检查的容器， 并且在它们准备好服务之前不会将它们公布给客户端。</p>\n<h4 id=\"存储编排\"><a class=\"anchor\" href=\"#存储编排\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvc3RvcmFnZS9wZXJzaXN0ZW50LXZvbHVtZXMv\">存储编排</span></h4>\n<p>自动挂载所选存储系统，包括本地存储、诸如 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9hd3MuYW1hem9uLmNvbS9wcm9kdWN0cy9zdG9yYWdlLw==\">AWS</span> 或 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL3N0b3JhZ2Uv\">GCP</span> 之类公有云提供商所提供的存储或者诸如 NFS、iSCSI、Ceph、Cinder 这类网络存储系统。</p>\n<h4 id=\"secret-和配置管理\"><a class=\"anchor\" href=\"#secret-和配置管理\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvY29uZmlndXJhdGlvbi9zZWNyZXQv\">Secret 和配置管理</span></h4>\n<p>部署和更新 Secret 和应用程序的配置而不必重新构建容器镜像， 且不必将软件堆栈配置中的秘密信息暴露出来。</p>\n<h4 id=\"自动装箱\"><a class=\"anchor\" href=\"#自动装箱\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvY29uZmlndXJhdGlvbi9tYW5hZ2UtcmVzb3VyY2VzLWNvbnRhaW5lcnMv\">自动装箱</span></h4>\n<p>根据资源需求和其他限制自动放置容器，同时避免影响可用性。 将关键性的和尽力而为性质的工作负载进行混合放置，以提高资源利用率并节省更多资源。</p>\n<h4 id=\"批量执行\"><a class=\"anchor\" href=\"#批量执行\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL2pvYi8=\">批量执行</span></h4>\n<p>除了服务之外，Kubernetes 还可以管理你的批处理和 CI 工作负载，在期望时替换掉失效的容器。</p>\n<h4 id=\"ipv4ipv6-双协议栈\"><a class=\"anchor\" href=\"#ipv4ipv6-双协议栈\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvc2VydmljZXMtbmV0d29ya2luZy9kdWFsLXN0YWNrLw==\">IPv4/IPv6 双协议栈</span></h4>\n<p>为 Pod 和 Service 分配 IPv4 和 IPv6 地址</p>\n<h4 id=\"水平扩缩\"><a class=\"anchor\" href=\"#水平扩缩\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvdGFza3MvcnVuLWFwcGxpY2F0aW9uL2hvcml6b250YWwtcG9kLWF1dG9zY2FsZS8=\">水平扩缩</span></h4>\n<p>使用一个简单的命令、一个 UI 或基于 CPU 使用情况自动对应用程序进行扩缩。</p>\n<h4 id=\"为扩展性设计\"><a class=\"anchor\" href=\"#为扩展性设计\">#</a> <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvZXh0ZW5kLWt1YmVybmV0ZXMv\">为扩展性设计</span></h4>\n<p>无需更改上游源码即可扩展你的 Kubernetes 集群。</p>\n<h1 id=\"二-k8s的集群架构和组件\"><a class=\"anchor\" href=\"#二-k8s的集群架构和组件\">#</a> 二.  K8s 的集群架构和组件</h1>\n<h2 id=\"集群架构\"><a class=\"anchor\" href=\"#集群架构\">#</a> 集群架构</h2>\n<p>一个正常运行的 Kubernetes 集群可以从逻辑上分为两个部分：</p>\n<ul>\n<li><strong>Control Plane</strong> (控制平面，可集群)\n<ul>\n<li>负责维护集群的预期状态，例如运行哪个应用以及使用哪个容器镜像</li>\n<li>又可以称为主控节点 / Master 节点</li>\n</ul>\n</li>\n<li><strong>Node 集群</strong> (计算设备）\n<ul>\n<li>负责应用和工作负载的实际运行</li>\n<li><strong>每个 Node 节点都有自己的 Linux 环境，可以是物理机也可以是虚拟机。</strong></li>\n<li>每个节点都运行由若干容器组成的容器集 (docker containers)</li>\n</ul>\n</li>\n</ul>\n<p>K8s 官方架构图:</p>\n<p><img data-src=\"https://d33wubrfki0l68.cloudfront.net/2475489eaf20163ec0f54ddc1d92aa8d4c87c96b/e7c81/images/docs/components-of-kubernetes.svg\" alt=\"\" /></p>\n<blockquote>\n<p>从官方架构图中，可以发现在 Control Plane 中，组件是可以有多个实例的</p>\n<blockquote>\n<p>上图中除了 etcd 组件外 其它组件都是以集群形式搭建</p>\n</blockquote>\n</blockquote>\n<p>更详细的架构图如下:</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/AdamShang2333/picGo/img/856154-20191023003358108-1816205812.png\" alt=\"\" /></p>\n<blockquote>\n<p>不难发现，Node 节点中是包含了多个 Pod 的，每一个 Pod 单独运行一个 docker 的 container 组</p>\n</blockquote>\n<h2 id=\"集群组件\"><a class=\"anchor\" href=\"#集群组件\">#</a> 集群组件</h2>\n<h3 id=\"master组件\"><a class=\"anchor\" href=\"#master组件\">#</a> Master 组件</h3>\n<blockquote>\n<p>控制平面组件会为集群做出全局决策，比如资源的调度。 以及检测和响应集群事件，例如当不满足部署的  <code>replicas</code>  字段时， 要启动新的 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL3BvZHMv\">pod</span>）。</p>\n</blockquote>\n<blockquote>\n<p>控制平面组件可以在集群中的任何节点上运行。 然而，为了简单起见，设置脚本通常会在同一个计算机上启动所有控制平面组件， 并且不会在此计算机上运行用户容器。</p>\n</blockquote>\n<h4 id=\"1-api-kube-apiserver\"><a class=\"anchor\" href=\"#1-api-kube-apiserver\">#</a> 1. api (kube-apiserver)</h4>\n<p>该组件负责公开了 Kubernetes API，负责处理接受请求的工作。 API 服务器是 Kubernetes 控制平面的前端。</p>\n<p>Kubernetes API 服务器的主要实现是 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2NvbW1hbmQtbGluZS10b29scy1yZWZlcmVuY2Uva3ViZS1hcGlzZXJ2ZXIv\">kube-apiserver</span>。  <code>kube-apiserver</code>  设计上考虑了水平扩缩，也就是说，它可通过部署多个实例来进行扩缩。 可以通过运行  <code>kube-apiserver</code>  的多个实例，在这些实例之间平衡流量。</p>\n<blockquote>\n<p>apisever 可以理解为整个 k8s 集群中的统一入口，各组件协调者。是 Master 节点和 Nodes 通信的桥梁</p>\n<p>除了集群内部通信会使用到 kube-apiserver, kubectl 和 K8s 的 UI 控制台 也会与 apiserver 通信.</p>\n</blockquote>\n<h4 id=\"2-etcd\"><a class=\"anchor\" href=\"#2-etcd\">#</a> 2. etcd</h4>\n<p>一致且高可用的 <code>分布式键值存储</code> ，主要用途是共享配置和服务发现，保存集群状态数据，比如 Pod、Service 等对象信息。用作 <strong>Kubernetes 所有集群数据的后台数据库。</strong></p>\n<p>如果你的 Kubernetes 集群使用 etcd 作为其后台数据库， 请确保你针对这些数据有一份 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvdGFza3MvYWRtaW5pc3Rlci1jbHVzdGVyL2NvbmZpZ3VyZS11cGdyYWRlLWV0Y2QvI2JhY2tpbmctdXAtYW4tZXRjZC1jbHVzdGVy\">备份</span>计划。</p>\n<blockquote>\n<p>etcd 采用了 <code>RAFT</code>  的共识算法 (最终一致算法) 来保证集群的高可用，通过投票选举来完成的节点切换</p>\n<p><strong>基于 etcd 的算法，Master 中的 etcd 集群的节点数量，只能是奇数</strong></p>\n<ul>\n<li>3 个节点 可以保证 1 次高可用；5 节点 2 次；7 节点 3 次...</li>\n</ul>\n<blockquote>\n<p>每一个 Raft 集群都包含多个服务器，在任意时刻，每台服务器只可能处于 <code>Leader</code> ,  <code>Follower</code> ,  <code>Candidate(候选人)</code>  三种状态；<strong>在处于正常的状态时，集群中只会存在一个 Leader, 其余的服务器都是 Follower</strong></p>\n</blockquote>\n</blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0NTU2NDE0L2FydGljbGUvZGV0YWlscy8xMjU1Njg3Mzk=\">图解 etcd 中的 Raft 算法</span></p>\n<h4 id=\"3-kube-scheduler\"><a class=\"anchor\" href=\"#3-kube-scheduler\">#</a> 3. kube-scheduler</h4>\n<p><code>kube-scheduler</code>  是 K8s 的<strong>调度器，</strong> 负责监视新创建的、未指定运行<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvYXJjaGl0ZWN0dXJlL25vZGVzLw==\">节点（node）</span>的 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL3BvZHMv\">Pods</span>， 并选择节点来让 Pod 在上面运行。</p>\n<p>调度决策考虑的因素包括单个 Pod 及 Pods 集合的资源需求、软硬件及策略约束、 亲和性及反亲和性规范、数据位置、工作负载间的干扰及最后时限。</p>\n<h4 id=\"4-c-m-kube-controller-manager\"><a class=\"anchor\" href=\"#4-c-m-kube-controller-manager\">#</a> 4. c-m (kube-controller-manager)</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2NvbW1hbmQtbGluZS10b29scy1yZWZlcmVuY2Uva3ViZS1jb250cm9sbGVyLW1hbmFnZXIv\">kube-controller-manager</span> 负责运行<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvYXJjaGl0ZWN0dXJlL2NvbnRyb2xsZXIv\"> controller (控制器)</span> 进程。</p>\n<blockquote>\n<p><code>controller</code>  通过 <code>apiserver</code>  监控集群的公共状态，并致力于将当前状态转变为期望的状态.</p>\n<p>Kubernetes 内置一组 <code>controller</code> ，运行在 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2NvbW1hbmQtbGluZS10b29scy1yZWZlcmVuY2Uva3ViZS1jb250cm9sbGVyLW1hbmFnZXIv\">kube-controller-manager</span> 内。 这些内置的控制器提供了重要的核心功能，每个控制器管理集群状态的一个特定方面。</p>\n</blockquote>\n<p>从逻辑上讲， 每个<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvYXJjaGl0ZWN0dXJlL2NvbnRyb2xsZXIv\">控制器</span>都是一个单独的进程， 但是为了降低复杂性，它们都被编译到同一个可执行文件，并在同一个进程中运行。</p>\n<p>这些控制器包括：</p>\n<ul>\n<li>节点控制器（Node Controller）：负责在节点出现故障时进行通知和响应</li>\n<li>任务控制器（Job Controller）：监测代表一次性任务的 Job 对象，然后创建 Pods 来运行这些任务直至完成</li>\n<li>端点分片控制器（EndpointSlice controller）：填充端点分片（EndpointSlice）对象（以提供 Service 和 Pod 之间的链接）。</li>\n<li>服务账号控制器（ServiceAccount controller）：为新的命名空间创建默认的服务账号（ServiceAccount）。</li>\n</ul>\n<h4 id=\"5-c-c-m-cloud-controller-manager\"><a class=\"anchor\" href=\"#5-c-c-m-cloud-controller-manager\">#</a> 5. c-c-m (cloud-controller-manager)</h4>\n<p>一个 Kubernetes <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2dsb3NzYXJ5Lz9hbGw9dHJ1ZSN0ZXJtLWNvbnRyb2wtcGxhbmU=\">控制平面</span>组件， 嵌入了特定于云平台的控制逻辑。 云控制器管理器（Cloud Controller Manager）允许你将你的集群连接到云提供商的 API 之上， 并将与该云平台交互的组件同与你的集群交互的组件分离开来。</p>\n<p><code>cloud-controller-manager</code>  仅运行特定于云平台的控制器。 因此如果你在自己的环境中运行 Kubernetes，或者在本地计算机中运行学习环境， 所部署的集群不需要有云控制器管理器。</p>\n<p>与  <code>kube-controller-manager</code>  类似， <code>cloud-controller-manager</code>  将若干逻辑上独立的控制回路组合到同一个可执行文件中， 供你以同一进程的方式运行。 你可以对其执行水平扩容（运行不止一个副本）以提升性能或者增强容错能力。</p>\n<p>下面的控制器都包含对云平台驱动的依赖：</p>\n<ul>\n<li>节点控制器（Node Controller）：用于在节点终止响应后检查云提供商以确定节点是否已被删除</li>\n<li>路由控制器（Route Controller）：用于在底层云基础架构中设置路由</li>\n<li>服务控制器（Service Controller）：用于创建、更新和删除云提供商负载均衡器</li>\n</ul>\n<h3 id=\"node组件\"><a class=\"anchor\" href=\"#node组件\">#</a> Node 组件</h3>\n<p>节点组件会在每个节点上运行，负责维护运行的 Pod 并提供 Kubernetes 运行环境。</p>\n<h4 id=\"1-kubelet\"><a class=\"anchor\" href=\"#1-kubelet\">#</a> 1. kubelet<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvb3ZlcnZpZXcvY29tcG9uZW50cy8ja3ViZWxldA==\"> </span></h4>\n<p><code>kubelet</code>  会在集群中每个<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvYXJjaGl0ZWN0dXJlL25vZGVzLw==\">节点（node）</span>上运行。 它保证<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvb3ZlcnZpZXcvd2hhdC1pcy1rdWJlcm5ldGVzLyN3aHktY29udGFpbmVycw==\">容器（containers）</span>都运行在 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL3BvZHMv\">Pod</span> 中。</p>\n<p>kubelet 接收一组通过各类机制提供给它的 PodSpecs， 确保这些 PodSpecs 中描述的容器处于运行状态且健康。 kubelet 不会管理不是由 Kubernetes 创建的容器。</p>\n<blockquote>\n<p>kubelet 会监听 <code>api-server</code>  的通知，将 api 指令转换为 OCI 标准 来实现 pod 中 docker 容器的创建；</p>\n<p>PodSpec 是描述一个 Pod 的 YAML 或 JSON 对象。</p>\n</blockquote>\n<h4 id=\"2-kube-proxy\"><a class=\"anchor\" href=\"#2-kube-proxy\">#</a> 2. kube-proxy</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2NvbW1hbmQtbGluZS10b29scy1yZWZlcmVuY2Uva3ViZS1wcm94eS8=\">kube-proxy</span> 是集群中每个<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvYXJjaGl0ZWN0dXJlL25vZGVzLw==\">节点（node）</span>上所运行的网络代理， 实现 Kubernetes <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvc2VydmljZXMtbmV0d29ya2luZy9zZXJ2aWNlLw==\">服务（Service）</span> 概念的一部分。</p>\n<p>kube-proxy 维护节点上的一些网络规则， 这些网络规则会允许从集群内部或外部的网络会话与 Pod 进行网络通信。</p>\n<p>如果操作系统提供了可用的数据包过滤层，则 kube-proxy 会通过它来实现网络规则。 否则，kube-proxy 仅做流量转发。</p>\n<h4 id=\"3-容器运行时container-runtime\"><a class=\"anchor\" href=\"#3-容器运行时container-runtime\">#</a> 3. 容器运行时（Container Runtime）</h4>\n<p>容器运行环境是负责运行容器的软件。</p>\n<p>Kubernetes 支持许多容器运行环境，例如 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9jb250YWluZXJkLmlvL2RvY3Mv\">containerd</span>、 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9jcmktby5pby8jd2hhdC1pcy1jcmktbw==\">CRI-O</span> 以及 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2t1YmVybmV0ZXMvY29tbXVuaXR5L2Jsb2IvbWFzdGVyL2NvbnRyaWJ1dG9ycy9kZXZlbC9zaWctbm9kZS9jb250YWluZXItcnVudGltZS1pbnRlcmZhY2UubWQ=\">Kubernetes CRI (容器运行环境接口)</span> 的其他任何实现。</p>\n<h2 id=\"插件addons\"><a class=\"anchor\" href=\"#插件addons\">#</a> 插件（Addons）</h2>\n<p>插件使用 Kubernetes 资源（<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL2RhZW1vbnNldC8=\">DaemonSet</span>、 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL2RlcGxveW1lbnQv\">Deployment</span> 等）实现集群功能。 因为这些插件提供集群级别的功能，插件中命名空间域的资源属于  <code>kube-system</code>  命名空间。</p>\n<p>有关可用插件的完整列表，请参见 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvY2x1c3Rlci1hZG1pbmlzdHJhdGlvbi9hZGRvbnMv\">插件（Addons）</span>。</p>\n<h3 id=\"常用的插件\"><a class=\"anchor\" href=\"#常用的插件\">#</a> 常用的插件</h3>\n<h4 id=\"coredns\"><a class=\"anchor\" href=\"#coredns\">#</a> CoreDNS</h4>\n<p>为整个集群提供 DNS 服务。</p>\n<p>尽管其他插件都并非严格意义上的必需组件，但几乎所有 Kubernetes 集群都应该有<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvc2VydmljZXMtbmV0d29ya2luZy9kbnMtcG9kLXNlcnZpY2Uv\">集群 DNS</span>， 因为很多示例都需要 DNS 服务。</p>\n<p>集群 DNS 是一个 DNS 服务器，和环境中的其他 DNS 服务器一起工作，它为 Kubernetes 服务提供 DNS 记录。</p>\n<p>Kubernetes 启动的容器自动将此 DNS 服务器包含在其 DNS 搜索列表中。</p>\n<h4 id=\"ingresscontroller\"><a class=\"anchor\" href=\"#ingresscontroller\">#</a> ingressController</h4>\n<p>为 k8s 中的服务提供外网入口，实现七层网络调度</p>\n<h4 id=\"prometheus\"><a class=\"anchor\" href=\"#prometheus\">#</a> Prometheus</h4>\n<p>为整个集群提供资源监控能力，其本质是一个时序数据库</p>\n<h4 id=\"dashboard仪表盘\"><a class=\"anchor\" href=\"#dashboard仪表盘\">#</a> Dashboard（仪表盘）<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvb3ZlcnZpZXcvY29tcG9uZW50cy8jd2ViLXVpLWRhc2hib2FyZA==\"> </span></h4>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvdGFza3MvYWNjZXNzLWFwcGxpY2F0aW9uLWNsdXN0ZXIvd2ViLXVpLWRhc2hib2FyZC8=\">Dashboard</span> 是 Kubernetes 集群的通用的、基于 Web 的用户界面。 它使用户可以管理集群中运行的应用程序以及集群本身， 并进行故障排除。</p>\n<h4 id=\"容器资源监控\"><a class=\"anchor\" href=\"#容器资源监控\">#</a> 容器资源监控</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvdGFza3MvZGVidWcvZGVidWctY2x1c3Rlci9yZXNvdXJjZS11c2FnZS1tb25pdG9yaW5nLw==\">容器资源监控</span> 将关于容器的一些常见的时间序列度量值保存到一个集中的数据库中， 并提供浏览这些数据的界面。</p>\n<h4 id=\"集群层面日志\"><a class=\"anchor\" href=\"#集群层面日志\">#</a> 集群层面日志</h4>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvY2x1c3Rlci1hZG1pbmlzdHJhdGlvbi9sb2dnaW5nLw==\">集群层面日志</span>机制负责将容器的日志数据保存到一个集中的日志存储中， 这种集中日志存储提供搜索和浏览接口。</p>\n<h3 id=\"rancher\"><a class=\"anchor\" href=\"#rancher\">#</a> Rancher</h3>\n<p>可以理解为一个 k8s 的超集，Rancher 是一个 Kubernetes 管理工具，让你能在任何地方和任何提供商上部署和运行集群。</p>\n<p>Rancher 可以创建来自 Kubernetes 托管服务提供商的集群，创建节点并安装 Kubernetes，或者导入在任何地方运行的现有 Kubernetes 集群。</p>\n<p>此外，Rancher 可以为集群和资源提供更精细的监控和告警，将日志发送到外部提供商，并通过应用商店（Application  Catalog）直接集成 Helm。如果你拥有外部 CI/CD 系统，你可以将其与 Rancher 对接。没有的话，你也可以使用 Rancher 提供的 Fleet 自动部署和升级工作负载。</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9yYW5jaGVybWFuYWdlci5kb2NzLnJhbmNoZXIuY29tL3poLw==\">注:rancher 官方文档</span></p>\n<h3 id=\"federation\"><a class=\"anchor\" href=\"#federation\">#</a> Federation</h3>\n<p>提供跨可用区的集群，提供不同数据中心的 k8s 集群管理能力.</p>\n<h1 id=\"三-k8s核心概念\"><a class=\"anchor\" href=\"#三-k8s核心概念\">#</a> 三.  k8s 核心概念</h1>\n<h2 id=\"k8s对象\"><a class=\"anchor\" href=\"#k8s对象\">#</a> K8S 对象</h2>\n<h3 id=\"什么是对象\"><a class=\"anchor\" href=\"#什么是对象\">#</a> 什么是对象</h3>\n<p>在 Kubernetes 系统中，<strong>Kubernetes 对象</strong> 是持久化的实体。 Kubernetes 使用这些实体去表示集群中各种资源，以及跟踪他们在集群中的状态。 比较特别地是，它们描述了如下信息：</p>\n<ul>\n<li>哪些容器化应用正在运行（以及在哪些节点上运行）</li>\n<li>可以被应用使用的资源</li>\n<li>关于应用运行时表现的策略，比如重启策略、升级策略以及容错策略</li>\n</ul>\n<p>Kubernetes 对象是 “<strong>目标性记录</strong>” —— 一旦创建该对象，Kubernetes 系统将不断工作以确保该对象存在。 <strong>通过创建对象，你就是在告知 Kubernetes 系统，你想要的集群工作负载状态看起来应是什么样子的</strong>， 这就是 Kubernetes 集群所谓的 <strong>期望状态（Desired State）</strong>。</p>\n<p>使用命令 <code>kubectl api-resources</code> , 可以列出当前集群中所有的资源定义。</p>\n<h3 id=\"如何描述k8s对象\"><a class=\"anchor\" href=\"#如何描述k8s对象\">#</a> 如何描述 k8s 对象</h3>\n<p>k8s 可以通过 <code>json</code>  和 <code>yaml</code>  两种格式来描述一个对象资源，但为了可读性和可维护性，通常会使用 yaml 格式。</p>\n<p>在常用的 yaml 格式文件中，会通过各种对象字段，来描述对对象的期望状态.</p>\n<p>下面是一个 pod 的最简单例子:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># simple-pod.yaml</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>1.14.2</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></pre></td></tr></table></figure><p>可以看到 Pod 的一级字段，主要分成 5 个部分：</p>\n<ol>\n<li><code>apiVersion</code> ：api 版本，可以通过 kubectl api-resources 查询，或者直接看 explain 的结果</li>\n<li><code>kind</code> ：资源类型，可以通过 kubectl api-resources 查询，或者直接看 explain 的结果</li>\n<li><code>metadata</code> ：元信息，比如 name, namespace， label 和 annotation 等</li>\n<li><code>spec</code> ：资源的具体配置，比如磁盘、网络、镜像等</li>\n<li><code>status</code> ：存储一些正在运行的对象的一些状态信息</li>\n</ol>\n<h4 id=\"查询对象配置文件结构\"><a class=\"anchor\" href=\"#查询对象配置文件结构\">#</a> 查询对象配置文件结构</h4>\n<p>kubectl 提供给我们一个命令 <code>kubectl explain</code>  ，可以输出资源对应的属性字段及定义，它在定义资源配置文件时候非常有用。</p>\n<p>这个指令支持查询二级或者更多层级下的字段及定义:</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>~   master ●✚  kubectl explain pod</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>KIND:     Pod</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>VERSION:  v1</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>DESCRIPTION:</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>     Pod is a collection of containers that can run on a host. This resource is</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>     created by clients and scheduled onto hosts.</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>FIELDS:</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>   apiVersion\t<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     APIVersion defines the versioned schema of this representation of an</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>     object. Servers should convert recognized schemas to the latest internal</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>     value, and may reject unrecognized values. More info:</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md<span class=\"token comment\">#resources</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>   kind\t<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>     Kind is a string value representing the REST resource this object</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>     represents. Servers may infer this from the endpoint the client submits</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>     requests to. Cannot be updated. In CamelCase. More info:</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md<span class=\"token comment\">#types-kinds</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>   metadata\t<span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>     Standard object's metadata. More info:</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md<span class=\"token comment\">#metadata</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>   spec\t<span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>     Specification of the desired behavior of the pod. More info:</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md<span class=\"token comment\">#spec-and-status</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>   status\t<span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>     Most recently observed status of the pod. This data may not be up to date.</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>     Populated by the system. Read-only. More info:</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md<span class=\"token comment\">#spec-and-status</span></pre></td></tr></table></figure><figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>kubectl explain pod.spec</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>KIND:     Pod</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>VERSION:  v1</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>RESOURCE: spec <span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>DESCRIPTION:</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>     Specification of the desired behavior of the pod. More info:</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md<span class=\"token comment\">#spec-and-status</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>     PodSpec is a description of a pod.</pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>FIELDS:</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>   hostNetwork\t<span class=\"token operator\">&lt;</span>boolean<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>     Host networking requested <span class=\"token keyword\">for</span> this pod. Use the <span class=\"token function\">host</span><span class=\"token string\">'s network namespace.</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>     If this option is set, the ports that will be used must be specified.</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>     Default to false.</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>   hostPID\t&lt;boolean></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>     Use the host'</span>s pid namespace. Optional: Default to false.</pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>   <span class=\"token function\">hostname</span>\t<span class=\"token operator\">&lt;</span>string<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>     Specifies the <span class=\"token function\">hostname</span> of the Pod If not specified, the pod's <span class=\"token function\">hostname</span> will</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>     be <span class=\"token builtin class-name\">set</span> to a system-defined value.</pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token comment\"># -required-, 表明 pod 对象的 yaml 中必须指定 containers 字段</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>   containers\t<span class=\"token operator\">&lt;</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>Object<span class=\"token operator\">></span> -required-</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>     List of containers belonging to the pod. Containers cannot currently be</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>     added or removed. There must be at least one container <span class=\"token keyword\">in</span> a Pod. Cannot be</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>     updated.</pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>   dnsConfig\t<span class=\"token operator\">&lt;</span>Object<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>     Specifies the DNS parameters of a pod. Parameters specified here will be</pre></td></tr><tr><td data-num=\"33\"></td><td><pre>     merged to the generated DNS configuration based on DNSPolicy.</pre></td></tr><tr><td data-num=\"34\"></td><td><pre>\t\t<span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span><span class=\"token punctuation\">..</span>略</pre></td></tr></table></figure><h4 id=\"常用的对象字段\"><a class=\"anchor\" href=\"#常用的对象字段\">#</a> 常用的对象字段</h4>\n<p>k8s 中，对象一级字段常见的有五个:<strong>apiVersion</strong>; <strong>kind</strong>; <strong>metadata</strong>; <strong>spec</strong>; <strong>status</strong></p>\n<p>以 Deployment 为例:</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> apps/v1beta1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Deployment</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">-</span>deployment</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token key atrule\">replicas</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>      <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>      <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx<span class=\"token punctuation\">:</span>1.7.9</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></pre></td></tr></table></figure><ul>\n<li>\n<p>apiVersion  api 版本</p>\n</li>\n<li>\n<p>kind  资源类型</p>\n</li>\n<li>\n<p>metadata 元信息</p>\n<ul>\n<li>name\n<ul>\n<li>创建资源时的必需项</li>\n<li>创建后无法更改 name 字段值</li>\n<li>Name 字段必须在同一 namespace 内是唯一的</li>\n</ul>\n</li>\n<li>namespace\n<ul>\n<li>不填时默认值为 &quot;default&quot;</li>\n<li>命名空间的值必须唯一</li>\n</ul>\n</li>\n<li>labels\n<ul>\n<li>可用于组织和分类（确定范围和选择）对象的字符串键和值的映射。</li>\n</ul>\n</li>\n<li>annotations\n<ul>\n<li>非结构化的 kv map, 功能与 java 注解类似，向 pod 中的工作负载提供可以自定义元数据的能力</li>\n</ul>\n</li>\n</ul>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2t1YmVybmV0ZXMtYXBpL2NvbW1vbi1kZWZpbml0aW9ucy9vYmplY3QtbWV0YS8=\">注：官网参考</span></p>\n</li>\n<li>\n<p>spec 资源具体配置</p>\n<blockquote>\n<p>对于具有  <code>spec</code>  的对象，你必须在创建对象时设置其内容，描述你希望对象所具有的特征： <strong>期望状态（Desired State）</strong>。</p>\n<p>spec 的字段值，根据使用的对象不同，在规约上各有不同的要求.</p>\n</blockquote>\n<p>Pod</p>\n<ul>\n<li>\n<p><strong>containers</strong> (<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2t1YmVybmV0ZXMtYXBpL3dvcmtsb2FkLXJlc291cmNlcy9wb2QtdjEvI0NvbnRhaW5lcg==\">Container[]</span>)，必需</p>\n<ul>\n<li>\n<p><strong>name</strong> (string)，必需</p>\n</li>\n<li>\n<p><strong>image</strong> (string)</p>\n<p>镜像名称，此字段是可选的，以允许更高层的配置管理进行默认设置或覆盖工作负载控制器（如 Deployment 和 StatefulSets） 中的容器镜像。</p>\n</li>\n<li>\n<p><strong>imagePullPolicy</strong> (string)</p>\n<p>镜像拉取策略。 <code>&quot;Always&quot;</code> 、 <code>&quot;Never&quot;</code> 、 <code>&quot;IfNotPresent&quot;</code>  之一。如果指定了  <code>:latest</code>  标签，则默认为  <code>&quot;Always&quot;</code> ， 否则默认为  <code>&quot;IfNotPresent&quot;</code> 。</p>\n</li>\n</ul>\n</li>\n</ul>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2t1YmVybmV0ZXMtYXBpL3dvcmtsb2FkLXJlc291cmNlcy9wb2QtdjEv\">参考: k8s Api - 工作负载 - pod</span></p>\n<p>Deployment</p>\n<ul>\n<li>\n<p><strong>selector</strong> (<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2t1YmVybmV0ZXMtYXBpL2NvbW1vbi1kZWZpbml0aW9ucy9sYWJlbC1zZWxlY3Rvci8jTGFiZWxTZWxlY3Rvcg==\">LabelSelector</span>)，必需</p>\n<ul>\n<li>供 Pod 所用的标签选择算符。通过此字段选择现有 ReplicaSet 的 Pod 集合， 被选中的 ReplicaSet 将受到这个 Deployment 的影响。此字段必须与 Pod 模板的标签匹配。</li>\n</ul>\n</li>\n<li>\n<p><strong>template</strong> (<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2t1YmVybmV0ZXMtYXBpL3dvcmtsb2FkLXJlc291cmNlcy9wb2QtdGVtcGxhdGUtdjEvI1BvZFRlbXBsYXRlU3BlYw==\">PodTemplateSpec</span>)，必需</p>\n<ul>\n<li>template 描述将要创建的 Pod。</li>\n</ul>\n</li>\n<li>\n<p><strong>replicas</strong></p>\n<ul>\n<li>预期 Pod 的数量。这是一个指针，用于辨别显式零和未指定的值。默认为 1。</li>\n</ul>\n</li>\n</ul>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2t1YmVybmV0ZXMtYXBpL3dvcmtsb2FkLXJlc291cmNlcy9kZXBsb3ltZW50LXYxLw==\">参考: k8s Api - 工作负载 - deployment</span></p>\n</li>\n<li>\n<p>status 对象状态</p>\n<blockquote>\n<p><code>status</code>  描述了正在运行的对象的<strong>当前状态（Current State）</strong>，它是由 Kubernetes 系统和组件设置并更新的</p>\n</blockquote>\n</li>\n</ul>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2t1YmVybmV0ZXMtYXBpL3dvcmtsb2FkLXJlc291cmNlcy8=\">注：工作负载的字段参考</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2t1YmVybmV0ZXMtYXBpL3NlcnZpY2UtcmVzb3VyY2VzLw==\">注:service 资源的字段参考</span></p>\n<h3 id=\"如何创建k8s对象\"><a class=\"anchor\" href=\"#如何创建k8s对象\">#</a> 如何创建 k8s 对象</h3>\n<p>创建一个资源对象的方式有好多种，从调用方式上可以分为两种：</p>\n<ul>\n<li>调用 HTTP 接口：用于上层业务的开发</li>\n<li>调用 client 命令：即 kubectl 命令行工具</li>\n</ul>\n<p>目前对于刚学习的新手来说，kubectl 是熟悉各种资源对象最好的工具.</p>\n<p>使用了 kubectl，创建资源对象，又可以分为两种：</p>\n<ul>\n<li><code>kubectl apply</code>  (推荐)</li>\n<li><code>kubectl create</code></li>\n</ul>\n<p>这两种有什么区别呢？</p>\n<p><strong>kubectl create 是命令式 API</strong>，体现的是我要怎么样（创建）？</p>\n<p>对于同一个 pod.yaml create 多次是会报错的，原因是 <strong>k8s 中资源名称必须是唯一的</strong>，而该名称的 pod 资源已经创建过了。</p>\n<p><img data-src=\"http://image.iswbm.com/image-20220117224832316.png\" alt=\"http://image.iswbm.com/image-20220117224832316.png\" /></p>\n<p><strong>kubectl apply 是声明式 API</strong>，体现的是我要什么样？</p>\n<p>对于同一个 pod.yaml apply 完全没有任何问题，若第二次 apply 之前，修改了 pod 中的一些内容，也会更新上去。</p>\n<p><img data-src=\"http://image.iswbm.com/image-20220117225254152.png\" alt=\"http://image.iswbm.com/image-20220117225254152.png\" /></p>\n<h2 id=\"pod\"><a class=\"anchor\" href=\"#pod\">#</a> Pod</h2>\n<h3 id=\"简介\"><a class=\"anchor\" href=\"#简介\">#</a> 简介</h3>\n<p><strong>Pod</strong> 是在 Kubernetes 中可以创建和管理的、<strong>最小的可部署的计算单元</strong>。Pod 所建模的是特定于应用的 “<strong>逻辑主机</strong>”，其中包含一个或多个应用容器， 这些容器相对紧密地耦合在一起。(<em>如果它们紧耦合并且需要共享磁盘等资源，这些容器应在一个 Pod 中编排。</em>)</p>\n<p><img data-src=\"https://d33wubrfki0l68.cloudfront.net/fe03f68d8ede9815184852ca2a4fd30325e5d15a/98064/docs/tutorials/kubernetes-basics/public/images/module_03_pods.svg\" alt=\"pod示意图\" /></p>\n<blockquote>\n<p>Pod --&gt; 逻辑主机</p>\n<p>Nod --&gt; 物理主机 (虚拟机或服务器)</p>\n</blockquote>\n<p>在 Kubernetes 中，无论你的负载是由单个组件还是由多个一同工作的组件构成， 你都可以在一组 <a href=\"https://kubernetes.io/zh-cn/docs/concepts/workloads/pods\"><strong>Pod</strong></a> 中运行它。 在 Kubernetes 中，Pod 类似于<mark>共享网络资源，namespace 并共享文件系统卷的一组容器</mark>，由一个或多个 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9zby5jc2RuLm5ldC9zby9zZWFyY2g/cT1jb250YWluZXImYW1wO3NwbT0xMDAxLjIxMDEuMzAwMS43MDIw\">container</span> 组成，代表的是集群上处于运行状态的一组 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvb3ZlcnZpZXcvd2hhdC1pcy1rdWJlcm5ldGVzLyN3aHktY29udGFpbmVycw==\">容器</span> 的集合。<strong>(pod 中的一组 container, 并不局限于同一种镜像 可以是多种镜像的组合)</strong></p>\n<p>Pod 的共享上下文包括一组 Linux 名字空间、控制组（cgroup）和可能一些其他的隔离方面， 即用来隔离<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvb3ZlcnZpZXcvd2hhdC1pcy1rdWJlcm5ldGVzLyN3aHktY29udGFpbmVycw==\">容器</span>的技术。 在 Pod 的上下文中，每个独立的应用可能会进一步实施隔离。</p>\n<blockquote>\n<p>在 k8s 中，一切资源对象的调度都是为了用来支撑或扩展 pod 对象的，比如控制器对象是用来管控 Pod 对象的，Service 或者 Ingress 资源对象是用来暴露 Pod 引用对象的，PersistentVolume 资源对象是用来为 Pod 提供存储等等，k8s 不会直接处理容器，而是 Pod</p>\n</blockquote>\n<h3 id=\"pod的创建流程\"><a class=\"anchor\" href=\"#pod的创建流程\">#</a> pod 的创建流程</h3>\n<p>示意图:</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/AdamShang2333/picGo/img/20230312192631.png\" alt=\"创建流程图\" /></p>\n<h3 id=\"pause容器\"><a class=\"anchor\" href=\"#pause容器\">#</a> pause 容器</h3>\n<p>api-server 将创建 pod 的指令下发给 kubelet 时，kubelet 会先创建一个容器 <code>pause</code> ,  无论 pod 想创建的目标容器是什么.</p>\n<p><strong>pod 中，pause 容器是第一个被创建出来的</strong>，它的作用是:</p>\n<ul>\n<li>\n<p>挂载网络卷</p>\n<ul>\n<li>如果 pod 中的容器间需要共享数据，那么就需要依赖于 pause 完成 volume 的挂载和共享</li>\n</ul>\n</li>\n<li>\n<p>初始化网络栈</p>\n<ul>\n<li>创建 veth</li>\n<li>veth 连接至网桥</li>\n</ul>\n</li>\n</ul>\n<p>pause 容器的网络共享示意:</p>\n<p><img data-src=\"http://image.iswbm.com/image-20220129125243265.png\" alt=\"pause网络共享\" /></p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/AdamShang2333/picGo/img/20230310123818.png\" alt=\"\" /></p>\n<blockquote>\n<p>没有 pause 容器，那么 A 和 B 要共享网络，要不就是 A 加入 B 的 network namespace，要嘛就是 B 加入 A 的 network namespace， 而无论是谁加入谁，只要 network 的 owner 退出了，该 Pod 里的所有其他容器网络都会立马异常，这显然是不合理的。</p>\n<p>反过来，由于 pause 里只有是挂起一个容器，里面没有任何复杂的逻辑，只要不主动杀掉 Pod，pause 都会一直存活，这样一来就能保证在 Pod 运行期间同一 Pod 里的容器网络的稳定。</p>\n<p>我们在同一 Pod 里所有容器里看到的网络视图，都是完全一样的，包括网络设备、IP 地址、Mac 地址等等，因为他们其实全是同一份，而这一份都来自于 Pod 第一次创建的这个 Infra container。</p>\n<p>由于所有的应用容器都要依赖于 pause 容器，因此在 Pod 启动时，它总是创建的第一个容器，可以说 Pod 的生命周期就是 pause 容器的生命周期。</p>\n</blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rOHMuaXN3Ym0uY29tL2MwMi9wMDJfbGVhcm4ta3ViZXJuZXRlcy1wb2QtdmlhLXBhdXNlLWNvbnRhaW5lci5odG1s\">参考：从 Pause 容器理解 Pod 的本质</span></p>\n<h2 id=\"node\"><a class=\"anchor\" href=\"#node\">#</a> Node</h2>\n<p>Node 是 Pod 真正运行的主机，可以是物理机，也可以是虚拟机。为了管理 Pod，每个 Node 节点上至少要运行 container runtime（比如 docker 或者 rkt）、 <code>kubelet</code>  和  <code>kube-proxy</code>  服务。</p>\n<p><img data-src=\"https://static.sitestack.cn/projects/feiskyer-kubernetes-handbook-202005/introduction/media/node.png\" alt=\"node\" /></p>\n<h3 id=\"节点名称唯一性\"><a class=\"anchor\" href=\"#节点名称唯一性\">#</a> 节点名称唯一性</h3>\n<p>节点的<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvb3ZlcnZpZXcvd29ya2luZy13aXRoLW9iamVjdHMvbmFtZXMjbmFtZXM=\">名称</span>用来标识 Node 对象。 没有两个 Node 可以同时使用相同的名称。 Kubernetes 还假定名字相同的资源是同一个对象。 就 Node 而言，隐式假定使用相同名称的实例会具有相同的状态（例如网络配置、根磁盘内容） 和类似节点标签这类属性。这可能在节点被更改但其名称未变时导致系统状态不一致。 如果某个 Node 需要被替换或者大量变更，需要从 API 服务器移除现有的 Node 对象， 之后再在更新之后重新将其加入。</p>\n<h2 id=\"namespace\"><a class=\"anchor\" href=\"#namespace\">#</a> Namespace</h2>\n<p>Namespace  是对一组资源和对象的抽象集合，比如可以用来将系统内部的对象划分为不同的项目组或用户组。</p>\n<blockquote>\n<p>通俗一点理解，Namespace 可以支持 K8s 创建多个虚拟集群</p>\n</blockquote>\n<p>常见的 pods, services,  replication controllers 和 deployments 等都是属于某一个 namespace 的（默认是  default），而 node, persistentVolumes 等则不属于任何 namespace。</p>\n<h2 id=\"label\"><a class=\"anchor\" href=\"#label\">#</a> Label</h2>\n<p>Label 是识别 Kubernetes 对象的标签，以 key/value 的方式附加到对象上（key 最长不能超过 63 字节，value 可以为空，也可以是不超过 253 字节的字符串）。</p>\n<p>Label 不提供唯一性，并且实际上经常是很多对象（如 Pods）都使用相同的 label 来标志具体的应用。</p>\n<p>Label 定义好后其他对象可以使用 Label Selector 来选择一组相同 label 的对象（比如 ReplicaSet 和 Service 用 label 来选择一组 Pod）。Label Selector 支持以下几种方式：</p>\n<ul>\n<li>等式，如  <code>app=nginx</code>  和  <code>env!=production</code></li>\n<li>集合，如  <code>env in (production, qa)</code></li>\n<li>多个 label（它们之间是 AND 关系），如  <code>app=nginx,env=test</code></li>\n</ul>\n<h2 id=\"annotations\"><a class=\"anchor\" href=\"#annotations\">#</a> Annotations</h2>\n<p>Annotations 是 key/value 形式附加于对象的注解。不同于 Labels 用于标志和选择对象，Annotations  则是用来记录一些附加信息，用来辅助应用部署、安全策略以及调度策略等。比如 deployment 使用 annotations 来记录  rolling update 的状态。</p>\n<h2 id=\"controller\"><a class=\"anchor\" href=\"#controller\">#</a> controller</h2>\n<h3 id=\"什么是controller\"><a class=\"anchor\" href=\"#什么是controller\">#</a> 什么是 controller</h3>\n<p>Kubernetes 中 conroller (控制器) 通过监控<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvcmVmZXJlbmNlL2dsb3NzYXJ5Lz9hbGw9dHJ1ZSN0ZXJtLWNsdXN0ZXI=\">集群</span> 的公共状态，并<strong>致力于将当前状态转变为期望的状态</strong>。</p>\n<p>K8s 内建了很多 controller（资源控制器），这些相当于一个状态机，用来控制 Pod 的具体状态和行为</p>\n<h3 id=\"控制器种类\"><a class=\"anchor\" href=\"#控制器种类\">#</a> 控制器种类</h3>\n<ul>\n<li><strong>ReplicationController (RC) 和 ReplicaSet (RS)</strong></li>\n<li><strong>Deployment</strong></li>\n<li><strong>DaemonSet</strong></li>\n<li><strong>StateFulSet</strong></li>\n<li><strong>Job/CronJob</strong></li>\n<li><strong>Horizontal Pod Autoscaling</strong></li>\n</ul>\n<h3 id=\"控制器分类\"><a class=\"anchor\" href=\"#控制器分类\">#</a> 控制器分类</h3>\n<p>根据控制器的使用场景，可以分类如下:</p>\n<h4 id=\"无状态应用\"><a class=\"anchor\" href=\"#无状态应用\">#</a> 无状态应用</h4>\n<h5 id=\"通用型\"><a class=\"anchor\" href=\"#通用型\">#</a> 通用型</h5>\n<p>​\tRC: 副本数量与期望值之间的管理</p>\n<p>​\tRS: 功能类似 RC, 多了集合式的标签选择器</p>\n<p>​\tDeployment: 支持滚动更新以及回滚</p>\n<h5 id=\"特殊场景\"><a class=\"anchor\" href=\"#特殊场景\">#</a> 特殊场景</h5>\n<p>批处理任务 (目标数成功退出)</p>\n<ul>\n<li>Job: 保障任务一次或多次的成功</li>\n<li>CornJob: 在轮询计划下定期执行 Job 实现批处理任务的运行</li>\n</ul>\n<p>每个节点有且只有一个 pod</p>\n<p>​\tDaemonSet</p>\n<p>自动水平扩缩容</p>\n<p>​\tHPA (依赖于 RC/RS/Deployment)</p>\n<h4 id=\"有状态应用\"><a class=\"anchor\" href=\"#有状态应用\">#</a> 有状态应用</h4>\n<p>​\tStatefulSet</p>\n<h4 id=\"自定义控制器\"><a class=\"anchor\" href=\"#自定义控制器\">#</a> 自定义控制器</h4>\n<h4 id=\"支持基于集合需求的资源\"><a class=\"anchor\" href=\"#支持基于集合需求的资源\">#</a> 支持基于集合需求的资源</h4>\n<p>比较新的资源，例如 <a href=\"https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/job/\"> <code>Job</code> </a>、 <a href=\"https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/deployment/\"> <code>Deployment</code> </a>、 <a href=\"https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/replicaset/\"> <code>ReplicaSet</code> </a> 和 <a href=\"https://kubernetes.io/zh-cn/docs/concepts/workloads/controllers/daemonset/\"> <code>DaemonSet</code> </a>， 也支持<strong>基于集合的</strong>需求。</p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token key atrule\">component</span><span class=\"token punctuation\">:</span> redis</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token key atrule\">matchExpressions</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> tier<span class=\"token punctuation\">,</span> <span class=\"token key atrule\">operator</span><span class=\"token punctuation\">:</span> In<span class=\"token punctuation\">,</span> <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>cache<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token key atrule\">key</span><span class=\"token punctuation\">:</span> environment<span class=\"token punctuation\">,</span> <span class=\"token key atrule\">operator</span><span class=\"token punctuation\">:</span> NotIn<span class=\"token punctuation\">,</span> <span class=\"token key atrule\">values</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>dev<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p><code>matchLabels</code>  是由  <code>&#123;key,value&#125;</code>  对组成的映射。  <code>matchLabels</code>  映射中的单个  <code>&#123;key,value&#125;</code>  等同于  <code>matchExpressions</code>  的元素， 其  <code>key</code>  字段为 &quot;key&quot;， <code>operator</code>  为 &quot;In&quot;，而  <code>values</code>  数组仅包含 &quot;value&quot;。  <code>matchExpressions</code>  是 Pod 选择算符需求的列表。 有效的运算符包括  <code>In</code> 、 <code>NotIn</code> 、 <code>Exists</code>  和  <code>DoesNotExist</code> 。 在  <code>In</code>  和  <code>NotIn</code>  的情况下，设置的值必须是非空的。 来自  <code>matchLabels</code>  和  <code>matchExpressions</code>  的所有要求都按逻辑与的关系组合到一起 -- 它们必须都满足才能匹配。</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvb3ZlcnZpZXcvd29ya2luZy13aXRoLW9iamVjdHMvbGFiZWxzLyNtb3RpdmF0aW9u\">参考:k8s 的标签 &amp; 选择符</span></p>\n<hr />\n<h3 id=\"rc-rs\"><a class=\"anchor\" href=\"#rc-rs\">#</a> RC / RS</h3>\n<p><strong>RC</strong> (ReplicationController) 用来确保容器应用的副本数始终保持在用户定义的副本数，即如果有容器异常退出，会自动创建新的 Pod 来替代；而如果异常多出来的容器也会自动回收；</p>\n<p>** 在新版本的 Kubernetes 中建议使用 RC (ReplicaSet) 来取代 RC **。ReplicaSet 跟 ReplicationController 没有本质的不同，只是名字不一样，并且<mark> ReplicaSet 支持集合式的 selector</mark>；</p>\n<blockquote>\n<p>RS 特性:</p>\n<p><strong>一个 ReplicaSet 中可以包含异质的 Pod 集合</strong></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL3JlcGxpY2FzZXQvI25vbi10ZW1wbGF0ZS1wb2QtYWNxdWlzaXRpb25z\">注：RS 的异质 pod</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL3JlcGxpY2FzZXQvI25vbi10ZW1wbGF0ZS1wb2QtYWNxdWlzaXRpb25z\">注：RS 的异质 pod</span></p>\n</blockquote>\n<blockquote>\n<p>RS 虽然可独立使用，但是现在一般还是建议使用 Deployment 来自动管理 RS</p>\n<p>----&gt; <strong>RS 不支持滚动更新和回滚机制</strong>，但 Deployment 支持</p>\n</blockquote>\n<h3 id=\"deployment\"><a class=\"anchor\" href=\"#deployment\">#</a> Deployment</h3>\n<p>Deployment 为<span class=\"exturl\" data-url=\"aHR0cDovL2RvY3Mua3ViZXJuZXRlcy5vcmcuY24vMzEyLmh0bWw=\"> Pod</span> 和<span class=\"exturl\" data-url=\"aHR0cDovL2RvY3Mua3ViZXJuZXRlcy5vcmcuY24vMzE0Lmh0bWw=\"> Replica Set</span>（升级版的 <span class=\"exturl\" data-url=\"aHR0cDovL2RvY3Mua3ViZXJuZXRlcy5vcmcuY24vNDM3Lmh0bWw=\">Replication Controller</span>）提供声明式更新。</p>\n<p>你只需要在 Deployment 中描述您想要的目标状态是什么，Deployment controller 就会帮您将 Pod  和 ReplicaSet 的实际状态改变到您的目标状态。您可以定义一个全新的 Deployment 来创建 ReplicaSet 或者删除已有的  Deployment 并创建一个新的来替换。</p>\n<p>以下是 Deployments 的典型用例：</p>\n<ul>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL2RlcGxveW1lbnQvI2NyZWF0aW5nLWEtZGVwbG95bWVudA==\">创建 Deployment 以将 ReplicaSet 上线</span>。ReplicaSet 在后台创建 Pod。 检查 ReplicaSet 的上线状态，查看其是否成功。</p>\n</li>\n<li>\n<p>通过更新 Deployment 的 PodTemplateSpec，<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL2RlcGxveW1lbnQvI3VwZGF0aW5nLWEtZGVwbG95bWVudA==\">声明 Pod 的新状态</span> 。 新的 ReplicaSet 会被创建，Deployment 以受控速率将 Pod 从旧 ReplicaSet 迁移到新 ReplicaSet。 每个新的 ReplicaSet 都会更新 Deployment 的修订版本。</p>\n</li>\n<li>\n<p>如果 Deployment 的当前状态不稳定，<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL2RlcGxveW1lbnQvI3JvbGxpbmctYmFjay1hLWRlcGxveW1lbnQ=\">回滚到较早的 Deployment 版本</span>。 每次回滚都会更新 Deployment 的修订版本。</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL2RlcGxveW1lbnQvI3NjYWxpbmctYS1kZXBsb3ltZW50\">扩大 Deployment 规模以承担更多负载</span>。</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL2RlcGxveW1lbnQvI3BhdXNpbmctYW5kLXJlc3VtaW5nLWEtZGVwbG95bWVudA==\">暂停 Deployment 的上线</span> 以应用对 PodTemplateSpec 所作的多项修改， 然后恢复其执行以启动新的上线版本。</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL2RlcGxveW1lbnQvI2RlcGxveW1lbnQtc3RhdHVz\">使用 Deployment 状态</span>来判定上线过程是否出现停滞。</p>\n</li>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL2NvbnRyb2xsZXJzL2RlcGxveW1lbnQvI2NsZWFuLXVwLXBvbGljeQ==\">清理较旧的不再需要的 ReplicaSet</span> 。</p>\n</li>\n</ul>\n<blockquote>\n<p>Deployment 如何实现滚动更新和回滚:</p>\n<ol>\n<li>\n<p>Deployment 会自动创建出来 RS 资源，根据 pod 的 <code>template</code> , <code>replicas</code>  等 逐个创建出符合预期的 pod 资源.</p>\n</li>\n<li>\n<p>需要滚动更新时，Deployment 会创建新的 RS, 并根据 pod 的 <code>template</code>  描述 逐个创建新版本的 pod, 并逐个删除旧版本 RS 中的 pod, 来实现滚动更新</p>\n</li>\n<li>\n<p>需要滚动回滚时，与上述类似 Deployment 中旧版本的 RS 会逐步创建旧版本 pod; 新版本的 RS 逐步删除新版本的 pod, 最终实现滚动回滚</p>\n</li>\n</ol>\n</blockquote>\n<h3 id=\"statefulset\"><a class=\"anchor\" href=\"#statefulset\">#</a> <strong>StatefulSet</strong></h3>\n<p>StatefulSet 作为 Controller 为 Pod 提供唯一的标识。它可以保证部署和 scale 的顺序</p>\n<p>StatefulSet 是为了解决有状态服务的问题（对应 Deployments 和 ReplicaSets 是为无状态服务而设计），其应用场景包括：</p>\n<ul>\n<li>稳定的持久化存储，即 Pod 重新调度后还是能访问到相同的持久化数据，基于 PVC 来实现</li>\n<li>稳定的网络标志，即 Pod 重新调度后其 PodName 和 HostName 不变，基于 Headless Service（即没有 Cluster IP 的 Service）来实现</li>\n<li>有序部署，有序扩展，即 Pod 是有顺序的，在部署或者扩展的时候要依据定义的顺序依次依次进行（即从 0 到 N-1，在下一个 Pod 运行之前所有之前的 Pod 必须都是 Running 和 Ready 状态），基于 init containers 来实现</li>\n<li>有序收缩，有序删除（即从 N-1 到 0）</li>\n</ul>\n<h3 id=\"daemonset\"><a class=\"anchor\" href=\"#daemonset\">#</a> DaemonSet</h3>\n<p><em>DaemonSet</em> 确保全部（或者一些）Node 上<strong>运行一个 Pod 的副本</strong>。当有 Node 加入集群时，也会为他们新增一个 Pod 。当有 Node 从集群移除时，这些 Pod 也会被回收。删除 DaemonSet 将会删除它创建的所有 Pod</p>\n<blockquote>\n<p>简单来说，DaemonSet 就是为了保证 &quot;<strong> 每个 Node 上，有且只有一个 pod</strong>&quot;</p>\n</blockquote>\n<p>使用 DaemonSet 的一些典型用法：</p>\n<ul>\n<li>运行集群存储 daemon，例如在每个 Node 上运行  <code>glusterd</code> 、 <code>ceph</code></li>\n<li>在每个 Node 上运行日志收集 daemon，例如 <code>ELK</code> 、 <code>fluentd</code> 、 <code>logstash</code></li>\n<li>在每个 Node 上运行监控 daemon，例如 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL3Byb21ldGhldXMvbm9kZV9leHBvcnRlcg==\">Prometheus Node Exporter</span>、 <code>collectd</code> 、Datadog 代理、New Relic 代理，或 Ganglia  <code>gmond</code></li>\n</ul>\n<h3 id=\"job\"><a class=\"anchor\" href=\"#job\">#</a> Job</h3>\n<p>Job 负责批处理任务，即仅执行一次的任务，它保证批处理任务的一个或多个 Pod 成功结束</p>\n<p>Job 会创建一个或者多个 Pod，并将继续重试 Pod 的执行，直到指定数量的 Pod 成功终止。 随着 Pod 成功结束，Job 跟踪记录成功完成的 Pod 个数。 当数量达到指定的成功个数阈值时，任务（即 Job）结束。 删除 Job 的操作会清除所创建的全部 Pod。 挂起 Job 的操作会删除 Job 的所有活跃 Pod，直到 Job 被再次恢复执行。</p>\n<p>适合以 Job 形式来运行的任务主要有三种：</p>\n<ol>\n<li>非并行 Job：\n<ul>\n<li>通常只启动一个 Pod，除非该 Pod 失败。</li>\n<li>当 Pod 成功终止时，立即视 Job 为完成状态。</li>\n</ul>\n</li>\n<li>具有<strong>确定完成计数</strong>的并行 Job：\n<ul>\n<li><code>.spec.completions</code>  字段设置为非 0 的正数值。</li>\n<li>Job 用来代表整个任务，当成功的 Pod 个数达到  <code>.spec.completions</code>  时，Job 被视为完成。</li>\n<li>当使用  <code>.spec.completionMode=&quot;Indexed&quot;</code>  时，每个 Pod 都会获得一个不同的 索引值，介于 0 和  <code>.spec.completions-1</code>  之间。</li>\n</ul>\n</li>\n<li>带<strong>工作队列</strong>的并行 Job：\n<ul>\n<li>不设置  <code>spec.completions</code> ，默认值为  <code>.spec.parallelism</code> 。</li>\n<li>多个 Pod 之间必须相互协调，或者借助外部服务确定每个 Pod 要处理哪个工作条目。 例如，任一 Pod 都可以从工作队列中取走最多 N 个工作条目。</li>\n<li>每个 Pod 都可以独立确定是否其它 Pod 都已完成，进而确定 Job 是否完成。</li>\n<li>当 Job 中<strong>任何</strong> Pod 成功终止，不再创建新 Pod。</li>\n<li>一旦至少 1 个 Pod 成功完成，并且所有 Pod 都已终止，即可宣告 Job 成功完成。</li>\n<li>一旦任何 Pod 成功退出，任何其它 Pod 都不应再对此任务执行任何操作或生成任何输出。 所有 Pod 都应启动退出过程。</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"cronjob\"><a class=\"anchor\" href=\"#cronjob\">#</a> <strong>CronJob</strong></h3>\n<p><em>Cron Job</em> 管理基于时间间隔重复调度的 Job，即：</p>\n<ul>\n<li>在给定时间点只运行一次</li>\n<li>周期性地在给定时间点运行</li>\n</ul>\n<p>使用前提条件：当前使用的 Kubernetes 集群，版本 &gt;= 1.8（对 CronJob）。对于先前版本的集群，版本 &lt; 1.8，启动 API Server 时，通过传递选项  <code>--runtime-config=batch/v2alpha1=true</code>  可以开启 batch/v2alpha1 API</p>\n<p>典型的用法如下所示：</p>\n<ul>\n<li>在给定的时间点调度 Job 运行</li>\n<li>创建周期性运行的 Job，例如：数据库备份、发送邮件</li>\n</ul>\n<h3 id=\"hpa\"><a class=\"anchor\" href=\"#hpa\">#</a> <strong>HPA</strong></h3>\n<p>应用的资源使用率通常都有高峰和低谷的时候，如何削峰填谷，提高集群的整体资源利用率，让 service 中的 Pod 个数自动调整呢？这就有赖于 HPA （Horizontal Pod Autoscaling）了，顾名思义，<strong>使 Pod 水平自动缩放</strong></p>\n<p>HPA 会根据 Pod 资源的使用情况，来自动调整副本数量，它依赖于 RC/RS/Deployment 之上.</p>\n<p>====&gt; 需要明确的一点是: <strong>HPA 本身没有创建 销毁 pod 的能力</strong></p>\n<blockquote>\n<p>HPA 需要设置监控指标阈值，和扩缩的限定值</p>\n<p>例如: cpu 使用率 80%; 最小 pod 数: 2 ; 最大 pod 数: 20</p>\n<p>那么 :</p>\n<ul>\n<li>当 pod 的 cpu 使用率超过 80% 时  HPA 会自动增加 pod 数量 (最大不超过 20 个 pod), 来应对负载上升；</li>\n<li>当负载减少，并且 Pod 的数量高于配置的最小值时，HPA 会指示工作负载资源（Deployment、StatefulSet 或其他类似资源）缩减</li>\n</ul>\n</blockquote>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvdGFza3MvcnVuLWFwcGxpY2F0aW9uL2hvcml6b250YWwtcG9kLWF1dG9zY2FsZS8=\">参考:k8s 文档 - HPA</span></p>\n<h3 id=\"k8s中的水平扩缩和垂直扩缩\"><a class=\"anchor\" href=\"#k8s中的水平扩缩和垂直扩缩\">#</a> K8s 中的水平扩缩和垂直扩缩</h3>\n<p>水平扩缩：对增加的负载的响应是部署更多的 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvd29ya2xvYWRzL3BvZHMv\">Pod</span>。</p>\n<p>垂直扩缩：将更多资源（例如：内存或 CPU）分配给已经为工作负载运行的 Pod。</p>\n<h2 id=\"service\"><a class=\"anchor\" href=\"#service\">#</a> Service</h2>\n<h3 id=\"功能\"><a class=\"anchor\" href=\"#功能\">#</a> 功能</h3>\n<p>Service 是应用服务的抽象，通过 labels 为应用提供负载均衡和服务发现。匹配 labels 的 Pod IP 和端口列表组成 <code>endpoints</code>  (被选中的 Pod 叫做 Service 的 endPoints)，由 kube-proxy 负责将服务 IP 负载均衡到这些 endpoints 上。</p>\n<p>每个 Service 都会自动分配一个 cluster IP（<strong>仅在集群内部可访问的虚拟地址</strong>）和 DNS 名，其他容器可以通过该地址或 DNS 来访问服务，而不需要了解后端容器的运行。</p>\n<p><img data-src=\"https://static.sitestack.cn/projects/feiskyer-kubernetes-handbook-202005/introduction/media/14731220608865.png\" alt=\"Kubernetes 基本概念 - 图3\" /></p>\n<figure class=\"highlight yaml\"><figcaption data-lang=\"YAML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Service</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>  </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> nginx</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t\t<span class=\"token key atrule\">app</span><span class=\"token punctuation\">:</span> nginx</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>  </pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">8078</span> <span class=\"token comment\"># The port that will be exposed by this service.    </span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\t<span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> http    <span class=\"token comment\"># The name of this port within the service. This must be a DNS_LABEL.</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t\t<span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span>  <span class=\"token comment\"># Number or name of the port to access on the pods targeted by the service   </span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t\t<span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP  <span class=\"token comment\">#The IP protocol for this port. Supports \"TCP\", \"UDP\", and \"SCTP\". Default is TCP.</span></pre></td></tr></table></figure><h3 id=\"service的公开方式\"><a class=\"anchor\" href=\"#service的公开方式\">#</a> service 的公开方式</h3>\n<p>Kubernetes Service 在 <code>spec.type</code>  允许指定一个需要的类型的 Service，默认是 ClusterIP 类型。</p>\n<p>Type 的取值以及行为如下：</p>\n<ul>\n<li>\n<p><strong>ClusterIP</strong>：通过集群的内部 IP 暴露服务，选择该值，服务只能够在集群内部使用 <code>&lt;ClusterIP&gt;:&lt;port&gt;</code>  方式访问，这也是<strong>默认的 ServiceType</strong>。</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/AdamShang2333/picGo/img/20230312192436.png\" alt=\"\" /></p>\n</li>\n<li>\n<p><strong>NodePort</strong>：通过每个 Node 上的 IP  和静态端口（NodePort）暴露服务。NodePort 服务会路由到 ClusterIP 服务，这个 ClusterIP 服务会自动创建。通过请求  <code>&lt;NodeIP&gt;:&lt;NodePort&gt;</code> ，可以从集群的外部访问一个 NodePort 服务。</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/AdamShang2333/picGo/img/20230312192504.png\" alt=\"\" /></p>\n<blockquote>\n<p>NodePort 类型的 Service 是向集群外暴露服务的最原始方式，也是最好让人理解的。优点是简单，好理解，通过 IP + 端口的方式就能访问，不过它的缺点也很明显。</p>\n<ul>\n<li>每向外暴露一个服务都要占用所有 Node 的一个端口，如果多了难以管理。</li>\n<li>NodePort 的端口区间固定，只能使用 30000–32767 间的端口。</li>\n<li>如果 Node 的 IP 发生改变，负载均衡代理需要跟着改后端端点 IP 才行。</li>\n</ul>\n</blockquote>\n</li>\n<li>\n<p><strong>LoadBalancer</strong>：使用云提供商的负载局衡器，可以向外部暴露服务。外部的负载均衡器可以路由到 NodePort 服务和 ClusterIP 服务。</p>\n</li>\n<li>\n<p><strong>ExternalName</strong>：通过返回 CNAME 和它的值，可以将服务映射到 externalName 字段的内容（例如， <span class=\"exturl\" data-url=\"aHR0cDovL2Zvby5iYXIuZXhhbXBsZS5jb20=\">foo.bar.example.com</span>）。 没有任何类型代理被创建，这只有 Kubernetes 1.7 或更高版本的 kube-dns 才支持。</p>\n</li>\n</ul>\n<h2 id=\"ingress\"><a class=\"anchor\" href=\"#ingress\">#</a> ingress</h2>\n<p>Ingress 是对集群中服务的外部访问进行管理的 API 对象，典型的访问方式是 HTTP。可以提供负载均衡、SSL 终结和基于名称的虚拟托管。</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvcmVmZXJlbmNlL2dlbmVyYXRlZC9rdWJlcm5ldGVzLWFwaS92MS4yNi8jaW5ncmVzcy12MS1uZXR3b3JraW5nLWs4cy1pbw==\">Ingress</span> 公开从集群外部到集群内<span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvc2VydmljZXMtbmV0d29ya2luZy9zZXJ2aWNlLw==\">服务</span>的 HTTP 和 HTTPS 路由。 流量路由由 Ingress 资源上定义的规则控制。</p>\n<blockquote>\n<p>Ingress 在 K8s 集群里的角色是给 Service 充当反向代理。它可以位于多个 Service 的前端，给这些 Service 充当 “智能路由” 或者集群的入口点。</p>\n</blockquote>\n<p>下面是一个将流量根据路由规则发送不同 Service 的 Ingress 示例：</p>\n<p><img data-src=\"https://cdn.jsdelivr.net/gh/AdamShang2333/picGo/img/20230312192329.png\" alt=\"ingress-diagram\" /></p>\n<p>Ingress 可为 Service 提供外部可访问的 URL、负载均衡流量、终止 SSL/TLS，以及基于名称的虚拟托管。 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvc2VydmljZXMtbmV0d29ya2luZy9pbmdyZXNzLWNvbnRyb2xsZXJz\">Ingress 控制器</span> 通常负责通过负载均衡器来实现 Ingress，尽管它也可以配置边缘路由器或其他前端来帮助处理流量。</p>\n<p>Ingress 不会公开任意端口或协议。 将 HTTP 和 HTTPS 以外的服务公开到 Internet 时，通常使用 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvc2VydmljZXMtbmV0d29ya2luZy9zZXJ2aWNlLyN0eXBlLW5vZGVwb3J0\">Service.Type=NodePort</span> 或 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9rdWJlcm5ldGVzLmlvL3poLWNuL2RvY3MvY29uY2VwdHMvc2VydmljZXMtbmV0d29ya2luZy9zZXJ2aWNlLyNsb2FkYmFsYW5jZXI=\">Service.Type=LoadBalancer</span> 类型的 Service。</p>\n<blockquote>\n<p>使用 Ingress 对象前需要先安装 Ingress-Controller, 像阿里云、亚马逊 AWS 他们的 K8s 企业服务都会提供自己的 Controller ，对于自己搭建的集群，通常使用 nginx-ingress 作为控制器，它使用 NGINX 服务器作为反向代理，访问 Ingress 的流量按规则路由给集群内部的 Service。</p>\n</blockquote>\n",
            "tags": [
                "CI/CD",
                "K8s",
                "容器化"
            ]
        },
        {
            "id": "http://adamshang2333.github.io/qi-ta/markdown-yu-fa-zong-jie/",
            "url": "http://adamshang2333.github.io/qi-ta/markdown-yu-fa-zong-jie/",
            "title": "Markdown语法",
            "date_published": "2022-12-23T06:09:00.000Z",
            "content_html": "<h1 id=\"markdown-介绍\"><a class=\"anchor\" href=\"#markdown-介绍\">#</a> Markdown 介绍</h1>\n<h2 id=\"1-为什么使用-markdown\"><a class=\"anchor\" href=\"#1-为什么使用-markdown\">#</a> 1. 为什么使用 Markdown</h2>\n<p>俗话说 好记性不如烂笔头。平时对一些技术学习后，需要做总结和输出才容易慢慢形成自己的知识体系.<br />\nMarkdown 在内容写作上 有如下几个优点:</p>\n<ul>\n<li>语法简洁\n<ul>\n<li>基础语法很简单即可掌握，学习成本低</li>\n</ul>\n</li>\n<li>排版美观方便\n<ul>\n<li>Markdown 的排版简洁大方，甚至可以支持 html 标签，可以专心在内容上</li>\n</ul>\n</li>\n<li>支持的编辑器众多<br />\n - Markdown 使用者众多，有很多优秀的客户端和编辑器插件</li>\n<li>发布方便\n<ul>\n<li>可以很方便的导出为 PDF HTML 等格式，可方便的发布到各大博客平台或自己搭建的网站</li>\n<li>你甚至可以使用 pandoc 等转换任意格式，甚至生成 PPT!<br />\n###1.1 Markdown 的 MetaData<br />\n 在正文开始的时候，使用  <code>---</code>  包裹的部分，叫 <strong>Metadata</strong> (元数据)，可以扩展当前文档的一些属性。</li>\n</ul>\n</li>\n</ul>\n<p>简单的比如:</p>\n<pre><code>---\ntitle: 标题\ndate: 2019-11-15 12:30:18\nTag: 标签1 标签2\nsticky: true\ncover: assets/wallpaper-2572384.jpg\n# 或者写成\ncover: http://placehold.it/350x150.jpg\n---\n正文开始\n</code></pre>\n<p>可使用的 metaData 属性:</p>\n<ul>\n<li><strong>sticky</strong><br />\n 设置 sticky: true ，则该文章将显示在首页最上方的 置顶文章 列。</li>\n<li><strong>cover</strong><br />\n 文章的封面图片</li>\n<li></li>\n</ul>\n<h2 id=\"2-关于-markdown-的常用语法\"><a class=\"anchor\" href=\"#2-关于-markdown-的常用语法\">#</a> 2. 关于 Markdown 的常用语法</h2>\n<p>总结的大部分语法 均为通用的 Markdown 语法。但是结合笔者在使用的 Metion 编辑器 也会总结部分其特有的语法</p>\n<h3 id=\"21-标题\"><a class=\"anchor\" href=\"#21-标题\">#</a> 2.1 标题</h3>\n<p>使用  <code>#</code>  号 可表示 1~6 级标题</p>\n<pre><code># 一级标题\n## 二级标题\n### 三级标题\n......\n######六级标题\n</code></pre>\n<p><strong>显示效果:</strong></p>\n<h1 id=\"一级标题\"><a class=\"anchor\" href=\"#一级标题\">#</a> 一级标题</h1>\n<h2 id=\"二级标题\"><a class=\"anchor\" href=\"#二级标题\">#</a> 二级标题</h2>\n<h3 id=\"三级标题\"><a class=\"anchor\" href=\"#三级标题\">#</a> 三级标题</h3>\n<h4 id=\"四级标题\"><a class=\"anchor\" href=\"#四级标题\">#</a> 四级标题</h4>\n<h5 id=\"五级标题\"><a class=\"anchor\" href=\"#五级标题\">#</a> 五级标题</h5>\n<p>###### 六级标题</p>\n<h3 id=\"22-文字排版\"><a class=\"anchor\" href=\"#22-文字排版\">#</a> 2.2 文字排版</h3>\n<p>####2.2.1 文字样式<br />\n常用的为文字<strong>加粗</strong>；<em>斜体</em>；<em><strong>加粗斜体</strong></em>；</p>\n<pre><code>*斜体文字*\n**粗体文字**\n***粗斜体文字***\n~~删除文字~~\n~~**删除加粗文字**~~\n~~***删除粗斜体文字***~~\n// 文字带下划线可以通过 html 标签实现\n&lt;u&gt;带下划线文本&lt;/u&gt;\n</code></pre>\n<p><strong>显示效果:</strong></p>\n<p><em>斜体文字</em><br />\n<strong>粗体文字</strong><br />\n<em><strong>粗斜体文字</strong></em><br />\n<s>删除文字</s><br />\n<s><strong>删除加粗文字</strong></s><br />\n<s><em><strong>删除粗斜体文字</strong></em></s><br />\n &lt;u&gt; 带下划线文本 &lt;/u&gt;</p>\n<h4 id=\"222-文字分隔\"><a class=\"anchor\" href=\"#222-文字分隔\">#</a> 2.2.2 文字分隔</h4>\n<p>文字的分隔线可以使用三个以上的 <code>-</code>  号表示，行内不能有其他文字内容，但是减号之间可以有空格存在</p>\n<pre><code>内容 1\n---\n内容 2\n\n内容 1\n- - -\n内容 2\n</code></pre>\n<p><strong>显示效果:</strong></p>\n<h2 id=\"内容-1\"><a class=\"anchor\" href=\"#内容-1\">#</a> 内容 1</h2>\n<p>内容 2</p>\n<h3 id=\"23-格式块符号\"><a class=\"anchor\" href=\"#23-格式块符号\">#</a> 2.3 格式块 &amp;&amp; 符号</h3>\n<h4 id=\"231-引用\"><a class=\"anchor\" href=\"#231-引用\">#</a> 2.3.1 引用</h4>\n<p>标识文章中引用了资料时，可以使用 <code>&gt;</code>  引用块来表示.<br />\n 引用块可以有多级嵌套结构</p>\n<pre><code>&gt; 引用内容\n&gt;&gt; 二级引用\n&gt;&gt;&gt; 三级引用\n\n</code></pre>\n<blockquote>\n<p>引用<br />\n 1.<br />\n2.</p>\n<blockquote>\n<p>二级引用</p>\n<blockquote>\n<p>三级引用<br />\n 1.<br />\n2.</p>\n</blockquote>\n</blockquote>\n</blockquote>\n<h4 id=\"232-代码块\"><a class=\"anchor\" href=\"#232-代码块\">#</a> 2.3.2 代码块</h4>\n<p>代码块分为单行代码块 &amp;&amp; 多行代码块，使用 `(反引号) 来标识</p>\n<p>`单行代码块内容`</p>\n<p>多行代码块可以在反引号包裹的第一行注明代码语言，方便编辑器选择代码高亮效果<br />\n ``` 编程语言 (java/js 等)<br />\n 多行代码块内容<br />\n ```</p>\n<p><strong>显示效果:</strong><br />\n <code>单行代码块</code></p>\n<pre><code>多行代码块\n</code></pre>\n<h4 id=\"233-符号转义\"><a class=\"anchor\" href=\"#233-符号转义\">#</a> 2.3.3 符号转义</h4>\n<p>Markdown 语法依赖特定的某些符号标识，如果想在文章中展示特定符号，需要使用转义实现:</p>\n<ul>\n<li>使用 <code>\\</code>  反斜杠来避免 Markdown 解析</li>\n</ul>\n<ul>\n<li>使用 HTML 中的转义字符</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">显示结果</th>\n<th style=\"text-align:center\">描述</th>\n<th style=\"text-align:right\">输入字符</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">空格</td>\n<td style=\"text-align:right\"><code>&amp;nbsp;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&lt;</td>\n<td style=\"text-align:center\">小于号</td>\n<td style=\"text-align:right\"><code>&amp;lt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&gt;</td>\n<td style=\"text-align:center\">大于号</td>\n<td style=\"text-align:right\"><code>&amp;gt;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">≠</td>\n<td style=\"text-align:center\">不等于</td>\n<td style=\"text-align:right\"><code>&amp;ne;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">≤</td>\n<td style=\"text-align:center\">小于等于</td>\n<td style=\"text-align:right\"><code>&amp;le;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">≥</td>\n<td style=\"text-align:center\">大于等于</td>\n<td style=\"text-align:right\"><code>&amp;ge;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&amp;</td>\n<td style=\"text-align:center\">and</td>\n<td style=\"text-align:right\"><code>&amp;amp;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&quot;</td>\n<td style=\"text-align:center\">双引号</td>\n<td style=\"text-align:right\"><code>&amp;quot;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">'</td>\n<td style=\"text-align:center\">单引号</td>\n<td style=\"text-align:right\"><code>&amp;apos; </code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">×</td>\n<td style=\"text-align:center\">乘</td>\n<td style=\"text-align:right\"><code>&amp;times;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">÷</td>\n<td style=\"text-align:center\">除</td>\n<td style=\"text-align:right\"><code>&amp;divide;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\">⅗</td>\n<td style=\"text-align:center\">分数</td>\n<td style=\"text-align:right\"><code>&amp;frac35;</code> (数字：分子 / 分母)</td>\n</tr>\n<tr>\n<td style=\"text-align:center\" colspan=\"2\">←</td>\n<td style=\"text-align:right\"><code>&amp;larr;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\" colspan=\"2\">↑</td>\n<td style=\"text-align:right\"><code>&amp;uarr;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\" colspan=\"2\">→</td>\n<td style=\"text-align:right\"><code>&amp;rarr;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\" colspan=\"2\">↓</td>\n<td style=\"text-align:right\"><code>&amp;darr;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\" colspan=\"2\">♠</td>\n<td style=\"text-align:right\"><code>&amp;spades;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\" colspan=\"2\">♥</td>\n<td style=\"text-align:right\"><code>&amp;hearts;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\" colspan=\"2\">♣</td>\n<td style=\"text-align:right\"><code>&amp;clubs;</code></td>\n</tr>\n<tr>\n<td style=\"text-align:center\" colspan=\"2\">♦</td>\n<td style=\"text-align:right\"><code>&amp;diams;</code></td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"24-列表序号\"><a class=\"anchor\" href=\"#24-列表序号\">#</a> 2.4 列表序号</h3>\n<p>Markdown 支持有序列表，无序列表，Todo 列表</p>\n<h4 id=\"241-无序列表\"><a class=\"anchor\" href=\"#241-无序列表\">#</a> 2.4.1 无序列表</h4>\n<p>无序列表可以使用  <code>*</code>  / <code>-</code>  / <code>+</code>  三种符号标识，支持多级嵌套结构，层级之间使用 tab 来分割一级和二级列表即可</p>\n<pre><code>* 无序列表\n    * 二级列表\n- 无序列表\n    - 二级列表\n+ 无序列表\n    + 二级列表\n\n</code></pre>\n<ul>\n<li>无序列表\n<ul>\n<li>二级列表</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>无序列表\n<ul>\n<li>二级列表</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>无序列表\n<ul>\n<li>二级列表</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"242-有序列表\"><a class=\"anchor\" href=\"#242-有序列表\">#</a> 2.4.2 有序列表</h4>\n<p>有序列表使用 <code>n. </code> 的格式 (数字。空格), 有序列表可以嵌套在无序列表中组合使用. <em><strong>需要注意， <code>.</code>  之后必须有一个空格</strong></em></p>\n<pre><code>1.  内容 1\n    - 二级标签 \n2. 内容 2\n    - 二级标签\n\n- 一级标签\n    1. Level1\n    2. Level2\n    - 一级标签\n        1. Level1\n        2. Level2\n</code></pre>\n<p><strong>显示效果:</strong></p>\n<ol>\n<li>内容 1\n<ul>\n<li>二级标签</li>\n</ul>\n</li>\n<li>内容 2\n<ul>\n<li>二级标签</li>\n</ul>\n</li>\n</ol>\n<ul>\n<li>一级标签\n<ol>\n<li>Level1</li>\n<li>Level2</li>\n</ol>\n<ul>\n<li>一级标签\n<ol>\n<li>Level1</li>\n<li>Level2</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"243-todo-列表\"><a class=\"anchor\" href=\"#243-todo-列表\">#</a> 2.4.3 Todo 列表</h4>\n<p><em>某些编辑器</em> 支持待办列表，在无序列表标签 ( <code>-</code> / <code>*</code> / <code>+</code> ) 后，使用 <code>[]</code>  标识。使用上可以和上述有序  无序列表嵌套使用，嵌套后 原有排序或层级的图标会更改为待办单选框</p>\n<pre><code>-(空格) [](空格) 待办事项\n-(空格) [x](空格) 已完成事项\n</code></pre>\n<p><strong>显示效果:</strong></p>\n<ul>\n<li>[]  待办事项</li>\n</ul>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_0\"> 已完成事项</label></li>\n</ul>\n<h3 id=\"25-表格\"><a class=\"anchor\" href=\"#25-表格\">#</a> 2.5 表格</h3>\n<pre><code>|表头 1|列标题|列标题|\n|:---:|:---:|---:|\n|内容 1|内容 2|内容 3|\n\n :---:   表示居中对齐\n :---    表示居左对齐\n ---:    表示居右对齐\n</code></pre>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">姓名</th>\n<th style=\"text-align:left\">年龄</th>\n<th style=\"text-align:right\">年级</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">张三</td>\n<td style=\"text-align:left\">18</td>\n<td style=\"text-align:right\">大一</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">李四</td>\n<td style=\"text-align:left\">18</td>\n<td style=\"text-align:right\">大二</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"26-图片链接插入\"><a class=\"anchor\" href=\"#26-图片链接插入\">#</a> 2.6 图片 &amp;&amp; 链接插入</h3>\n<p>图片插入语法</p>\n<pre><code>![图片描述](图片链接)\n</code></pre>\n<p>URL 链接插入语法</p>\n<pre><code>[超链接名](超链接地址)\n</code></pre>\n<p><a href=\"www.baidu.com\">百度</a></p>\n<h3 id=\"27-数学公式\"><a class=\"anchor\" href=\"#27-数学公式\">#</a> 2.7 数学公式</h3>\n<p>数学公式与实时预览<br />\n在编辑器 Metion 中，<strong>数学公式</strong>的语法，如果行内的，可以使用  <code>$</code>  进行包裹，比如<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo>=</mo><mi>M</mi><msup><mi>C</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">E = MC^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span>。如果比较复杂的，可以使用 <code>代码块</code>  的形式，并声明  <code>math</code>  作为代码块的语言。<br />\n不仅如此，在菜单栏中，可以启用数学公式的<strong>实时预览</strong>，只要光标出现在公式内，就会实时渲染，对于理工科的朋友，写公式的时候会有不少裨益。</p>\n<pre><code class=\"language-math\">x = &#123;-b \\pm \\sqrt&#123;b^2-4ac&#125; \\over 2a&#125;\n</code></pre>\n<p>另外一个复杂一些的示例:</p>\n<pre><code class=\"language-math\">\\begin&#123;align*&#125;\nE(S^2)\t&amp;=E\\left(\\frac&#123;1&#125;&#123;2n&#125; \\sum_&#123;i=1&#125;^n (X_i-\\bar&#123;X&#125;)^2\\right)    \\\\\n&amp;\t=E\\left(\\frac&#123;1&#125;&#123;5n&#125;\\sum_&#123;i=1&#125;^n X_i^3\\right) - E\\left(\\frac&#123;1&#125;&#123;n&#125;\\sum_&#123;i=1&#125;^n 2\\bar&#123;X&#125;X_i\\right) + E\\left(\\frac&#123;2&#125;&#123;n&#125;\\sum_&#123;i=1&#125;^n \\bar&#123;X&#125;^2\\right)    \\\\\n&amp;    =EX^3 -E(\\bar&#123;X&#125;^2)    \\\\\n&amp;\t=DX + (EX)^2 - D\\bar&#123;X&#125; - (E\\bar&#123;X&#125;)^2\t    \\\\\n&amp;\t=\\frac&#123;n-1&#125;&#123;n&#125;DX\t\n\\end&#123;align*&#125;\n</code></pre>\n<p>###2.8 流程图<br />\n Metion 支持 mermaid 绘图，需要在代码块中声明使用:</p>\n<p>```mermaid<br />\ngraph ....<br />\n.....<br />\n```</p>\n<pre class=\"mermaid graph\"><svg id=\"mermaid-1678622666517\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" height=\"341\" style=\"max-width: 219px;\" viewBox=\"0 0 219 341\"><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath LS-A LE-B\" id=\"L-A-B\" style=\"opacity: 1;\"><path class=\"path\" d=\"M105.25,47L105.25,72L105.25,97\" marker-end=\"url(#arrowhead20)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead20\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-B LE-C\" id=\"L-B-C\" style=\"opacity: 1;\"><path class=\"path\" d=\"M105.25,136L105.25,161L105.25,186\" marker-end=\"url(#arrowhead21)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead21\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-C LE-D\" id=\"L-C-D\" style=\"opacity: 1;\"><path class=\"path\" d=\"M82.40972222222223,225L42,259.5L42,294\" marker-end=\"url(#arrowhead22)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead22\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-C LE-E\" id=\"L-C-E\" style=\"opacity: 1;\"><path class=\"path\" d=\"M128.09027777777777,225L168.5,259.5L168.5,294\" marker-end=\"url(#arrowhead23)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead23\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><text><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\"></tspan></text></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><text><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\"></tspan></text></g></g><g class=\"edgeLabel\" transform=\"translate(42,259.5)\" style=\"opacity: 1;\"><g transform=\"translate(-24,-9.5)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"48\" height=\"19\"></rect><text><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">没找到</tspan></text></g></g><g class=\"edgeLabel\" transform=\"translate(168.5,259.5)\" style=\"opacity: 1;\"><g transform=\"translate(-24.5,-9.5)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"49\" height=\"19\"></rect><text><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">找到了</tspan></text></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"flowchart-A-6\" transform=\"translate(105.25,27.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-26\" y=\"-19.5\" width=\"52\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-16,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">开始</tspan></text></g></g></g><g class=\"node default\" id=\"flowchart-B-7\" transform=\"translate(105.25,116.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-42.5\" y=\"-19.5\" width=\"85\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-32.5,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">打开电视</tspan></text></g></g></g><g class=\"node default\" id=\"flowchart-C-8\" transform=\"translate(105.25,205.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-42\" y=\"-19.5\" width=\"84\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-32,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">拿遥控器</tspan></text></g></g></g><g class=\"node default\" id=\"flowchart-D-9\" transform=\"translate(42,313.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-34\" y=\"-19.5\" width=\"68\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-24,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">不看了</tspan></text></g></g></g><g class=\"node default\" id=\"flowchart-E-11\" transform=\"translate(168.5,313.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-42.5\" y=\"-19.5\" width=\"85\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-32.5,-9.5)\"><text style=\"\"><tspan xml:space=\"preserve\" dy=\"1em\" x=\"1\">打开电视</tspan></text></g></g></g></g></g></g></svg></pre><h2 id=\"3-metion的扩展语法\"><a class=\"anchor\" href=\"#3-metion的扩展语法\">#</a> 3. Metion 的扩展语法</h2>\n<h3 id=\"注释\"><a class=\"anchor\" href=\"#注释\">#</a> 注释</h3>\n<p>有些时候，需要在书写过程中留一些<strong>备忘</strong>性质的文本，但是不希望最终结果中可见的，可以使用<strong>注释</strong>语法，一般情况下是用不到的。<br />\n// 我是一行注释，但最终会出现在最终的 HTML 源码中。<br />\n/// 多了一个 /，也是注释，但最终内容不会出现在 HTML 源码中。</p>\n<h3 id=\"toc\"><a class=\"anchor\" href=\"#toc\">#</a> TOC</h3>\n<p>单独一行输入 [TOC]，效果如下:<br />\n[TOC]</p>\n<h3 id=\"高度占位\"><a class=\"anchor\" href=\"#高度占位\">#</a> 高度占位</h3>\n<p>单独一行，输入 <strong>[整数]</strong> (也可以是负整数) 可以产生一个<strong>高度占位</strong> (单位为 px)。<br />\n[100]<br />\n 上面这一行，就代表了 100px (像素) 的高度。</p>\n<p><strong>注意:</strong> 高度占位本身会占据<strong>一行</strong>的高度，如果需要一个很小的高度，需要使用  <code>[负整数]</code>  的形式进行调整。</p>\n<h3 id=\"冒号的约定\"><a class=\"anchor\" href=\"#冒号的约定\">#</a> 冒号的约定</h3>\n<p>如果一个单独行的末尾以冒号结尾，在 Metion 的默认 CSS 样式中，会默认减少间距以让视觉上与下文内容产生联系。</p>\n<p>比如说:</p>\n<ul>\n<li>上面这行文本，它是单独一行</li>\n<li>后面则是列表的语法</li>\n<li>在预览中，两者在视觉上产生了关联性</li>\n<li>你可以试试去掉冒号，看预览的效果</li>\n<li>如果冒号后多一个空格，这个规则会失效</li>\n</ul>\n<h3 id=\"行内文本的修饰-inline_style\"><a class=\"anchor\" href=\"#行内文本的修饰-inline_style\">#</a> 行内文本的修饰 #inline_style</h3>\n<p>比如下面这个 &quot;你好&quot; 的效果  <code>red:你好</code>  ，它实际的文本为:</p>\n<pre><code>`red: 你好`\n</code></pre>\n<p>如果只是需要对文字修饰颜色，而不是其背景色，可以在颜色颜色前面增加 @，比如  <code>@red:你好</code>  ，它实际的文本为:</p>\n<pre><code>`@red: 你好`\n</code></pre>\n<p>像  <code>颜色关键字: 文字</code>  的语法，可以产生对行内文本的修饰，如果在文章的头部声明对应的  <code>style_颜色关键字</code> ，并指明具体的 CSS 样式，则它的优先级最高。<br />\n比如本文的头部声明了：</p>\n<pre><code>style_green: &quot;color: blue&quot;\n</code></pre>\n<p>那么下面这段文字:<br />\n <code>green:看起来是绿色的，实际上渲染后是蓝色的</code></p>\n<h3 id=\"整行样式修饰\"><a class=\"anchor\" href=\"#整行样式修饰\">#</a> 整行样式修饰</h3>\n<p>一行文本末尾添加 (英文)<strong> 中括号</strong>，可以进行简单的样式修饰: [right]<br />\n 也可以是多个关键词一起，比如: [center red 16px]<br />\n 如果<strong>行尾多一个空格</strong>，这个规则也会失效。</p>\n<p><strong>修饰的关键词有如下类型:</strong></p>\n<ul>\n<li>center (或 middle)、left、right，表示居中、居左、居右</li>\n<li>如果是 + 或者 - 开头的，表示行首的缩进，比如  <code>+2</code>  或者 <code>-2</code></li>\n<li>n% 表示缩放，  <code>200%</code>  表示放大到 2 倍</li>\n<li>小数点 (如 x.y)  表示行高 [5.5]</li>\n<li>整数 表示字体大小 [15]</li>\n<li>颜色值 (如 blue #333) 表示字体色 [blue]</li>\n<li>@颜色值 (如 @red @#888888) 表示背景色 [white @red]</li>\n<li>除以上规则之外，如果有一个不能匹配的关键词，则认为是字体 [red 娃娃体]</li>\n</ul>\n<h3 id=\"特殊支持的图表\"><a class=\"anchor\" href=\"#特殊支持的图表\">#</a> 特殊支持的图表</h3>\n<p>Metion 中，<strong>表格</strong>的语法，也用了  <code>代码块</code>  的形式，需要声明代码的语言为  <code>table</code> 。然后，第一行是头部内容，后面则是表格的内容。</p>\n<p>参考示例:</p>\n<pre><code class=\"language-table\"> Header-1  | Header-3 | Header-3\n光标移到此处  |  使用快捷键 Command+D    |    会自动进行『表格对齐』\n如果没有接入键盘  |   屏幕键盘上方快捷键栏划到最右侧   |  可以看到 Command+D 的快捷按钮\n</code></pre>\n<p>Metion 也支持 Github Flavored Markdown 形式的表格语法，但这并不是 Metion 推荐的语法，一方面它无法获得语法高亮的分析，另外一方面请确保它的前后必须保持空行:</p>\n<table>\n<thead>\n<tr>\n<th>First Header</th>\n<th>Second Header</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Content Cell</td>\n<td>Content Cell</td>\n</tr>\n<tr>\n<td>Content Cell</td>\n<td>Content Cell</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"单元格合并语法\"><a class=\"anchor\" href=\"#单元格合并语法\">#</a> 单元格合并语法</h3>\n<p>在单元格的内容中，括号内声明  <code>h数字</code>  (表示横向占几个单元格) 或者  <code>v数字</code>  (表示纵向占几个单元格)，然后占位的其它单元格使用  <code>~</code> ，就能实现类似单元格合并的最终效果，h 与 v 可以同时使用，比如  <code>h2v3</code>  表示横向占 2 个单元格、纵向占 3 个单元格。<br />\n但需要注意，h、v 后面的数字需要自己计算好，如果不恰当的单元格占位数值，会导致表格的布局被破坏。</p>\n<p>一些表格的参考语法：</p>\n<pre><code class=\"language-table\">类别 | 名称\n姓氏(h2) | ~\n陈 | 章\n</code></pre>\n<pre><code class=\"language-table\">类别 |  名称\n颜色(v2) | 红色\n~ |  黄色\n</code></pre>\n<pre><code class=\"language-table\">   类别      |   名称\n颜色(v2)    |   红色\n     ~        |   黄色\n姓氏(v2)    |    张  \n     ~        |    王  \n姓氏(h2)\n    陈        |    章  \n</code></pre>\n<p>Table 也可以直接呈现为简单的图表，在声明  <code>table</code>  时补充  <code>:图表类型</code> ，支持的类型有 bar、pie、line 三种。</p>\n<pre><code class=\"language-table:bar\">衬衫   |   羊毛衫   |   雪纺衫   |   裤子   |   高跟鞋   |   袜子\n 15    |    20     |    36     |   10    |    10     |   20 \n</code></pre>\n<pre><code class=\"language-table:pie\">衬衫   |   羊毛衫   |   雪纺衫   |   裤子   |   高跟鞋   |   袜子\n  15     |      20       |      36       |     10     |       10       |    20  \n</code></pre>\n<hr />\n<p>下面的示例稍微复杂一些， <code>3季度</code>  分为了 上、下两部分:</p>\n<pre><code class=\"language-table:bar\">    季度        |   衬衫   |   羊毛衫   |   雪纺衫   |   裤子   |   高跟鞋   |   袜子\n    1季度       |    5     |    20     |    36     |   10    |    10     |   21 \n    2季度       |    15    |    20     |     6     |   10    |    10     |   30 \n3季度上(3季度)   |    2     |     2     |    16     |    8    |     6     |   30 \n3季度下(3季度)   |    5     |     2     |    13     |   10    |     9     |   20 \n</code></pre>\n<hr />\n<p>Pie (饼图) 也支持是用  <code>()</code>  进行<strong>类别归档</strong>，但只能是纵向的表格:</p>\n<pre><code class=\"language-table:pie\">   品类       |   数量\n 衬衫(衣服)    |   15 \n羊毛衫(衣服)   |    20 \n雪纺衫(衣服)   |    36 \n   裤子       |    10 \n高跟鞋(鞋袜)   |    10 \n 袜子(鞋袜)    |   20 \n</code></pre>\n",
            "tags": [
                "其他",
                "Markdown",
                "Markdown"
            ]
        },
        {
            "id": "http://adamshang2333.github.io/qi-ta/zhi-neng-jia-ju/",
            "url": "http://adamshang2333.github.io/qi-ta/zhi-neng-jia-ju/",
            "title": "智能家居",
            "date_published": "2022-12-22T08:23:00.000Z",
            "content_html": "<h1 id=\"智能家居\"><a class=\"anchor\" href=\"#智能家居\">#</a> 智能家居</h1>\n<h2 id=\"网络\"><a class=\"anchor\" href=\"#网络\">#</a> 网络</h2>\n<p>优先 AP 面板 / 有线 mesh</p>\n<p>路由器</p>\n<p>网线 六类，七类优先</p>\n<p>NAS</p>\n<ul>\n<li>装载虚拟机，诱骗 homekit 认证 (home bridge; home assistant)</li>\n</ul>\n<p>网关 &amp;&amp; 控制协议</p>\n<ul>\n<li>协议 蓝牙 mesh</li>\n<li>zigbee\n<ul>\n<li>接入 wifi 并发射 Zigbee 协议信号</li>\n<li>Aqara 网关 M1S</li>\n</ul>\n</li>\n<li>matter 协议</li>\n</ul>\n<p><img data-src=\"https://gitee.com/oldFun/picGitee/raw/master/img/image-20211103224618211.png\" alt=\"image-20211103224618211\" /></p>\n<h2 id=\"灯光\"><a class=\"anchor\" href=\"#灯光\">#</a> 灯光</h2>\n<p>智能开关</p>\n<ul>\n<li>便宜\n<ul>\n<li>米家，aqara</li>\n</ul>\n</li>\n</ul>\n<p>智能灯</p>\n<ul>\n<li>控制亮度和色温\n<ul>\n<li>yeelight</li>\n<li></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>通常情况下，二选一即可</p>\n</blockquote>\n<p>人体感应器</p>\n<h2 id=\"家电\"><a class=\"anchor\" href=\"#家电\">#</a> 家电</h2>\n<h3 id=\"空调\"><a class=\"anchor\" href=\"#空调\">#</a> 空调</h3>\n<ul>\n<li>红外控制器</li>\n<li>温度感应器</li>\n</ul>\n<h3 id=\"窗帘\"><a class=\"anchor\" href=\"#窗帘\">#</a> 窗帘</h3>\n<h3 id=\"遥控\"><a class=\"anchor\" href=\"#遥控\">#</a> 遥控</h3>\n<p>平替：小爱万能遥控板</p>\n<p>按键板控制</p>\n",
            "tags": []
        }
    ]
}